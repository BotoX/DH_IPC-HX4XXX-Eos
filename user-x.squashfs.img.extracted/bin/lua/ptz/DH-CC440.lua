local Protocol = {};

-- 表示数值可以用16或10进制(最小值，最大值)
Protocol.Attr = 
{
	-- 协议的显示名称,不能超过16字符，目前暂不支持中文
	Name = "DH-CC440",	
		
	-- 指明是云台协议还是矩阵协议，使用"PTZ", "MATRIX"表示
	Type = "PTZ",
	
	-- 以ms为单位
	Internal = 200,
	
	AlarmLen = 4,
				
	-- 没有对应的地址范围，请都设成0xff
	-- 云台地址范围
	CamAddrRange 		= {0x01, 0xFE}, 
	-- 监视地址范围
	MonAddrRange		= {0x00, 0xFF},	
	-- 预置点范围
	PresetRange 		= {0x00, 0xff},
	-- 自动巡航线路范围
	TourRange			= {0x01, 0xff},
	-- 轨迹线路范围
	PatternRange		= {0x01, 0xff},
	-- 垂直速度范围
	TileSpeedRange 		= {0x01, 0xfe},
	-- 水平速度范围
	PanSpeedRange 		= {0x01, 0xfe},
	-- 自动扫描范围
	ScanRange 			= {0x01, 0xff},
	
	-- 辅助范围
	AuxRange 			= {0x01, 0x01},
}

Protocol.CommandAttr =
{
	-- 协议中需要更改的位置，用LUA下标表示，即下标从１开始,用10进制表示
	AddrPos 			= 1, 
	PresetPos 		= 4, 
	TileSpeedPos 	= 4,
	PanSpeedPos 	= 4,
	AuxPos 				= 4,
}

Protocol.Command = 
{
	-- 写具体协议时只能用16进制或字符表示,没有的话就注释掉
	Start= 
	{
		--写上下左右, 左上，左下，右上，右下
		TileUp 		= "0x00, 0x00, 0x00, 0xfe,",
		TileDown 	= "0x00, 0x00, 0x01, 0xfe,",
		PanLeft 	= "0x00, 0x00, 0x02, 0xfe,", 
		PanRight 	= "0x00, 0x00, 0x03, 0xfe,",
		--LeftUp 		= "0xff, 0x01, 0x88, 0x0c, 0x00, 0x00, 0x00,",
		--LeftDown 	= "0xff, 0x01, 0x88, 0x14, 0x00, 0x00, 0x00,",
		--RightUp		= "0xff, 0x01, 0x88, 0x0a, 0x00, 0x00, 0x00,",
		--RightDown = "0xff, 0x01, 0x88, 0x12, 0x00, 0x00, 0x00,",

		ZoomWide 	= "0x00, 0x02, 0x01, 0x05,",
		ZoomTele 	= "0x00, 0x02, 0x00, 0x05,",
		FocusNear	= "0x00, 0x03, 0x01, 0x00, 0x00, 0x04, 0x01, 0x05, 0x00, 0x03, 0x00, 0x00, ",
		FocusFar 	= "0x00, 0x03, 0x01, 0x00, 0x00, 0x04, 0x00, 0x05, 0x00, 0x03, 0x00, 0x00, ",
		IrisSmall = "0x00, 0x09, 0x01, 0x05,",
		IrisLarge = "0x00, 0x09, 0x00, 0x05,",
		
		AlarmSearch = "0x00, 0x10, 0x00, 0x00",
			
		-- 灯光
		LightOn		= "0x00, 0x08, 0x01, 0x00,",
		LightOff  = "0x00, 0x08, 0x00, 0x00,",
			
		-- 预置点操作（设置，清除，转置)
		SetPreset 	= "0x00, 0x07, 0x00, 0x00,",
		ClearPreset	= "0x00, 0x07, 0x01, 0x00,",
		GoToPreset 	= "0x00, 0x07, 0x02, 0x00,",			
			
		-- 这儿只用来表示雨刷功能
		AuxOn 	= "0x00, 0x17, 0x00, 0x00,",
		AuxOff 	= "0x00, 0x17, 0x01, 0x00,",
			
		-- 菜单相关操作
		Menu = "0x00, 0x05, 0x01, 0x00,",
		MenuExit = "0x00, 0x05, 0x00, 0x00,",
		--MenuEnter = "0xff, 0x01, 0x00, 0x1D, 0x00, 0x00, 0x00",
		--MenuEsc = "0xff, 0x01, 0x00, 0x1D, 0x00, 0x00, 0x00",
		MenuUp = "0x00, 0x06, 0x00, 0x00,",
		MenuDown = "0x00, 0x06, 0x01, 0x00,",
		MenuLeft = "0x00, 0x06, 0x02, 0x00,",
		MenuRight = "0x00, 0x06, 0x03, 0x00,",
		
	},
	Stop = 
	{
		TileUp 		= "0x00, 0x00, 0x00, 0x01,",
		TileDown 	= "0x00, 0x00, 0x01, 0x01,",
		PanLeft 	= "0x00, 0x00, 0x02, 0x01,", 
		PanRight 	= "0x00, 0x00, 0x03, 0x01,",
		
		ZoomWide 	= "0x00, 0x02, 0x01, 0x00,",
		ZoomTele 	= "0x00, 0x02, 0x00, 0x00,",
		FocusNear	= "0x00, 0x04, 0x01, 0x00,",
		FocusFar 	= "0x00, 0x04, 0x00, 0x00,",
		IrisSmall = "0x00, 0x09, 0x01, 0x00,",
		IrisLarge = "0x00, 0x09, 0x00, 0x00,",
	},
}

Protocol.Checksum = function (s)
	if table.getn(s) ~= 4 then
		s[5] = s[1];
		s[9] = s[1];
	end;
	return s;
end;

Protocol.SpeedProcess = function(s, hor, ver)
	if hor ~= 0 then
		if s[4] == 0xfe then
			s[4] = hor;
		end;
	end;
	
	if ver ~= 0 then
		if s[4] == 0xfe then
			s[4] = ver;
		end;
	end;	
	return s;
end;

Protocol.MultipleProcess = function(s, speed)
       if table.getn(s) ~= 4 then
                s[8] = speed * 5;
       elseif s[4] == 0x05 then
		s[4] = speed * 5;
       end;
       return s;          

end;
Protocol.AuxProcess = function(s, value)
	return s;
end;

return Protocol;
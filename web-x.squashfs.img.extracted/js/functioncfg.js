define(function(require){function a(a,b,c){function d(){for(var a,d=jQuery(this).val(),e=0,f=0,g=d.length;g>f&&(a=d.charCodeAt(f),e+=127>=a?b.asciiByte||1:b.notAsciiByte||3,!(e>b.maxByte));f++);e>b.maxByte&&(jQuery(this).val(d.slice(0,f)),c&&c())}b=b||{},element=jQuery(a),b.maxlength&&element.attr("maxLength",b.maxlength),element.on("keyup",d),element.on("blur",d)}require("jsCore/modules/minPtzControl");var b=null,c=null,d=null,e=null,f=null,g=null,h=null,j=null,k=null,l={Support:!1,TaskNum:8,Action:["Preset","Tour","Pattern","AutoScan"],SupportSnapShot:!1},m=[],n={},o={},p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=-1,x=-1,y=!0,z=!0,A=!0,B=!0,C=["Preset","Scan","Pattern","Tour"],D=["Preset","Scan","Pattern","Tour","Auto"],E=!0,F=!0,G=10,H={def:60,max:3600,min:5,unit:1},I={},J={Support:!1,AngleRange:[0,-200]},K={},L=[],M=null;!function(){var a=null,i=null,k=null,G=Page.functioncfg={init:function(){b=rpc.PTZ,c=rpc.ConfigManager,G.translate(),G.bind(),-1!==webApp.DeviceType.indexOf("SD")&&G._initPtz(),G.render()},translate:function(){jQuery("#function").text(tl("w_Function")),jQuery("#func_yzd").text(tl("w_Preset")),jQuery("#func_spxz").text(tl("autoPan")),jQuery("#func_zdxs").text(tl("w_Auto-Scan")),jQuery("#func_zdxh").text(tl("w_Auto-Tour")),jQuery("#func_zdxj").text(tl("w_Pattern")),jQuery("#func_zngz").text(tl("intelliTrack")),jQuery("#func_kxdz").text(tl("idleMotion")),jQuery("#func_ytsd").text(tl("ptzSpeed")),jQuery("#func_kjdz").text(tl("powerUp")),jQuery("#func_yzcq").text(tl("ptzRestart")),jQuery("#func_hfmr").text(tl("w_DefaultConfig")),jQuery("#func_limit").text(tl("ptzlimit")),jQuery("#function_vedioControl_snap").attr("title",tl("w_Snap")),jQuery("#func_idle_enable_title").text(tl("enable")),jQuery("#func_idle_motion_title").text(tl("idleMotion")),jQuery("#func_idle_preset_title").text(tl("w_Preset")),jQuery("#func_idle_scan_title").text(tl("w_Auto-Scan")),jQuery("#func_idle_pattern_title").text(tl("w_Pattern")),jQuery("#func_idle_tour_title").text(tl("w_Auto-Tour")),jQuery("#func_idle_number_title").text(tl("w_Number")),jQuery("#func_idle_time_title").text(tl("idleTime")),jQuery("#func_idle_time_mimute").text(tl("w_Minute")),jQuery("#func_idle_confirm").text(tl("w_Confirm")),jQuery("#func_idle_refresh").text(tl("w_Refresh")),jQuery("#func_ptzspeed_title").text(tl("ptzSpeed")),jQuery("#func_ptzspeed_low_title").text(tl("w_low")),jQuery("#func_ptzspeed_middle_title").text(tl("w_Middle")),jQuery("#func_ptzspeed_high_title").text(tl("w_high")),jQuery("#func_powerup_enable_title").text(tl("enable")),jQuery("#func_powerup_motion_title").text(tl("powerUp")),jQuery("#func_powerup_auto_title").text(tl("Auto")),jQuery("#func_powerup_preset_title").text(tl("w_Preset")),jQuery("#func_powerup_scan_title").text(tl("w_Auto-Scan")),jQuery("#func_powerup_pattern_title").text(tl("w_Pattern")),jQuery("#func_powerup_tour_title").text(tl("w_Auto-Tour")),jQuery("#func_powerup_number_title").text(tl("w_Number")),jQuery("#func_powerup_confirm").text(tl("w_Confirm")),jQuery("#func_powerup_refresh").text(tl("w_Refresh")),jQuery("#func_ptzrestart").text(tl("ptzRestart")),jQuery("#func_default").text(tl("w_DefaultConfig")),jQuery("#func_ivstrack_enable_title").text(tl("enable")),jQuery("#func_continue_time_title").text(tl("ivsDuration")),jQuery("#func_continue_time_second").text(tl("w_Second")),jQuery("#func_ivsTrack_confirm").text(tl("w_Confirm")),jQuery("#func_ivsTrack_refresh").text(tl("w_Refresh")),jQuery("#func_limit_enable_title").text(tl("enable")),Page.functioncfg.PresetsConfig.translate(),Page.functioncfg.TourConfig.translate(),Page.functioncfg.PatternConfig.translate(),Page.functioncfg.ScanConfig.translate(),Page.functioncfg.AutoPanConfig.translate(),Page.functioncfg.PowerLevel.translate(),jQuery("#page_funcConfig").translation()},render:function(){b.getCurrentProtocolCaps().done(function(a){ptzCap=a,p=ptzCap.PresetMax-ptzCap.PresetMin+1,q=ptzCap.TourMax-ptzCap.TourMin+1,r=ptzCap.PatternMax-ptzCap.PatternMin+1,s=ptzCap.AutoScanMax-ptzCap.AutoScanMin+1||5,ptzCap.Tour===!1&&(E=ptzCap.Tour),ptzCap.Pattern===!1&&(F=ptzCap.Pattern),!E&&jQuery("#func_zdxh").addClass("fn-hide"),!F&&jQuery("#func_zdxj").addClass("fn-hide"),0==ptzCap.AutoScan&&jQuery("#func_zdxs").addClass("fn-hide"),ptzCap.PtzCrane&&ptzCap.PtzCrane.Support&&jQuery("#func_crane_wrap").removeClass("fn-hide"),ptzCap.PtzAutoMovement&&(l.Support=1==ptzCap.PtzAutoMovement.Support?!0:!1,l.TaskNum=ptzCap.PtzAutoMovement.TaskNum||8,l.Action=ptzCap.PtzAutoMovement.Action||["Preset"],l.SupportSnapShot=1==ptzCap.PtzAutoMovement.SupportSnapShot?!0:!1,Page.functioncfg.PtzAutoMovement.init()),ptzCap.SupportRestartCam&&jQuery("#func_jxcq").removeClass("fn-hide")}),c.getConfig("PtzMovement").done(function(a){y=-1==a[0].Function.indexOf("AutoPan"),z=-1==a[0].Function.indexOf("Scan"),z||(t=a[0].Index),A="Pattern"!==a[0].Function,A||(v=a[0].Index),B=-1==a[0].Function.indexOf("Tour"),B||(w=a[0].Index)}).always(function(){G._loadptzocx();jQuery("#func_tree_list .ui-subnav-item-current").attr("id"),jQuery("#func_tree_list .ui-subnav-item-current").attr("data-filename");G._onTabClick("func_yzd","func_item_yzd")})},leave:function(){plugin.hide()},_initPtz:function(){M=jQuery("#func_PTZ").minPtzControl(),webApp.CHANNEL_NUMBER>1?M.minPtzControl("init",{showBoat:!1,showStep:!1}):M.minPtzControl("init",{showBoat:!0,showStep:!0}),jQuery("a[boatCmd]")&&jQuery("#func_PTZ a[boatCmd]").mousedown(function(){G._changePtzBtn(),G._stopPtz()})},bind:function(){Page.functioncfg.PresetsConfig.init(),Page.functioncfg.TourConfig.init(),Page.functioncfg.PatternConfig.init(),Page.functioncfg.ScanConfig.init(),Page.functioncfg.AutoPanConfig.init(),ability.get("PTZCaps").done(function(a){if(a){if(a.Zoom===!1&&jQuery("#func_zoom_wrap").hide(),a.Focus===!1&&jQuery("#func_focus_wrap").hide(),a.Iris===!1&&jQuery("#func_iris_wrap").hide(),a.AutoPan?jQuery("#func_spxz").show():jQuery("#func_spxz").hide(),a.PtzLimit){I=a.PtzLimit;var b=0;for(var c in I)1==I[c]&&(jQuery('#func_item_limit a[data-cap="'+c+'"]').removeClass("fn-hide"),jQuery('#func_item_limit label[data-cap="'+c+'"]').removeClass("fn-hide")),b++;I.Support&&b>1&&(jQuery("#func_limit").show(),jQuery("#func_item_limit .fn-horizontal-line").removeClass("fn-invisib")),0==I.Support&&jQuery('#func_item_limit div[data-cap="PtzLimit"]').addClass("fn-hide")}a.IdleMotion&&(0!=a.IdleMotion.Support?jQuery("#func_kxdz").show():jQuery("#func_kxdz").hide(),a.IdleMotion.Action&&(C=a.IdleMotion.Action)),a.SupportPanoramicTrace?jQuery("#func_zngz").show():jQuery("#func_zngz").hide(),a.PowerUp&&(0!=a.PowerUp.Support?jQuery("#func_kjdz").show():jQuery("#func_kjdz").hide(),a.PowerUp.Action&&(D=a.PowerUp.Action)),a.PtzPowerLevel&&(a.PtzPowerLevel.Support?(jQuery("#func_PowerLevel").show(),Page.functioncfg.PowerLevel.init()):jQuery("#func_PowerLevel").hide()),jQuery.each(C,function(a,b){jQuery("#cap_idle_"+b)&&jQuery("#cap_idle_"+b).removeClass("fn-hide")}),jQuery.each(D,function(a,b){jQuery("#cap_powerup_"+b)&&jQuery("#cap_powerup_"+b).removeClass("fn-hide")}),a.PtzElevation&&(J.Support=a.PtzElevation.Support||!1,J.AngleRange=a.PtzElevation.AngleRange||[0,-200],1==J.Support&&(jQuery("#func_limit").show(),jQuery("#func_limit_enable_title").text(tl("ptzLimitEnable"))),G._initLimitDom())}}),jQuery("#func_tree_list").on("click",function(a){jQuery("#func_estopAll_three").hide(),jQuery("#func_estopAll_one").hide(),jQuery("#func_estopAll_seven").hide();var b;"func_yzd"==jQuery("#func_tree_list .ui-subnav-item-current").attr("id")&&(b=Page.functioncfg.PresetsConfig._onPresetListRefresh()),e=jQuery.extend(!0,[],f);var c=a?a.target.id:jQuery("#func_tree_list .ui-subnav-item-current").attr("id"),d=a?jQuery(a.target).attr("data-filename"):jQuery("#func_tree_list .ui-subnav-item-current").attr("data-filename")[0];d&&G._onTabClick(c,d)}),jQuery("#function_vedioControl_snap").on("click",G._onSnapPictureClick),jQuery("#fnFullScreen").on("click",function(){return plugin.SetFullScreen(),!1}),jQuery("#func_ptzspeed_low").on("click",G._setPtzSpeedSpeed),jQuery("#func_ptzspeed_middle").on("click",G._setPtzSpeedSpeed),jQuery("#func_ptzspeed_high").on("click",G._setPtzSpeedSpeed),jQuery("#func_ivsTrack_confirm").on("click",G._onIvsTrackConfirmClick),jQuery("#func_ivsTrack_refresh").on("click",G._onIvsTrackRefreshClick),jQuery("#func_continue_time").on({blur:function(){limit(this,300),limitMin(this,5),jQuery("#func_continue_time_value").hide()},focus:function(){jQuery("#func_continue_time_value").show()},keyup:function(){limitEx(this,300)}}),jQuery("#func_idle_confirm").on("click",G._onIdleConfirmClick),jQuery("#func_idle_refresh").on("click",G._onIdleRefreshClick),jQuery("#func_idle_time").on({blur:function(){limit(this,60),limitMin(this,1),jQuery("#func_idle_time_value").hide()},focus:function(){jQuery("#func_idle_time_value").show()},keyup:function(){limitEx(this,60)}}),jQuery("#func_powerup_confirm").on("click",G._onPowerUpConfirmClick),jQuery("#func_powerup_refresh").on("click",G._onPowerUpRefreshClick),jQuery("#page_funcConfig .func_motion").on("click",function(){var a=jQuery(this).attr("id").split("_"),b=jQuery(this).attr("id").split("_");b.splice(2,1,"number");var c=b.join("_");b.push("wrap");var f=b.join("_"),i=jQuery("#"+c).empty(),j="";switch(a[2]){case"preset":if(0==d.length)jQuery("#"+f).hide();else{jQuery("#"+f).show();for(var k=0;k<d.length;k++)j+='<option value="'+d[k].Index+'">'+d[k].Index+" : "+d[k].Name+"</option>"}break;case"pattern":jQuery("#"+f).show();for(var k=0;k<g.length;k++)g[k].Enable&&(j+='<option value="'+(k+1)+'">'+(k+1)+"</option>");break;case"scan":jQuery("#"+f).show();for(var k=0;k<h.length;k++)h[k].LeftEnable&&h[k].RightEnable&&(j+='<option value="'+(k+1)+'">'+(k+1)+"</option>");break;case"tour":jQuery("#"+f).show();for(var l=e.length>q?q:e.length,k=0;l>k;k++)e[k].Enable&&(j+='<option value="'+(k+1)+'">'+(k+1+" : "+e[k].Name)+"</option>");break;case"auto":jQuery("#"+f).hide()}i.append(j),""!=j?i.get(0).selectedIndex=0:jQuery("#"+f).hide()}),jQuery("#func_limit_enable").on("click",G._onLimitEnableClick),jQuery("#func_limit_Elevation").on("change",G._onLimitEleChange),jQuery("#func_ptzrestart").on("click",G._onPtzRestartClick),jQuery("#func_default").on("click",G._onDefaultClick),jQuery("#func_cameraRestart").on("click",G._onCameraRestart),jQuery("#func_item_spxz").show(),o=new FineSlider("func_autopan_slider_first","func_autopan_slider_end",{range:[1,8],steps:7,onComplete:function(){Page.functioncfg.AutoPanConfig._setAutoPanSpeed()}}),jQuery("#func_item_spxz").hide(),jQuery("#func_item_zdxs").show(),n=new FineSlider("func_scan_slider_first","func_scan_slider_end",{range:[1,8],onComplete:function(){Page.functioncfg.ScanConfig._setScanSpeed()}}),jQuery("#func_item_zdxs").hide(),jQuery("#page_funcConfig a[data-type]").on("click",G._onLimitBtnClick)},_subRender:function(a){switch(a){case"func_yzd":Page.functioncfg.PresetsConfig.render();break;case"func_spxz":Page.functioncfg.AutoPanConfig.render();break;case"func_zdxs":Page.functioncfg.ScanConfig.render();break;case"func_zdxh":Page.functioncfg.TourConfig.render();break;case"func_zdxj":Page.functioncfg.PatternConfig.render();break;case"func_zngz":G._ivsTrackRender();break;case"func_kxdz":Page.functioncfg.PatternConfig.render(),Page.functioncfg.ScanConfig.render(!0),Page.functioncfg.TourConfig.render(!0),G._idleRender();break;case"func_ytsd":G._ptzspeedRender();break;case"func_kjdz":Page.functioncfg.PatternConfig.render(),Page.functioncfg.ScanConfig.render(!0),Page.functioncfg.TourConfig.render(!0),G._powerUpRender();break;case"func_limit":G._limitRender();break;case"func_dsrw":Page.functioncfg.PatternConfig.render(),Page.functioncfg.ScanConfig.render(!0),Page.functioncfg.TourConfig.render(!0),Page.functioncfg.PtzAutoMovement.render();break;case"func_PowerLevel":Page.functioncfg.PowerLevel.render()}},_onTabClick:function(a,b){jQuery("#page_funcConfig div[id^=func_item_]").hide(),jQuery("#page_funcConfig .ui-subnav-item").removeClass("ui-subnav-item-current"),jQuery("#"+b).show(),jQuery("#"+a).addClass("ui-subnav-item-current"),G._subRender(a)},_onSnapPictureClick:function(){plugin.SubVideoWndCtrl(2,6)},_ivsTrackRender:function(){G._getptzconfig().done(function(){c.getConfig("PanoramicTrace").done(function(a){k=a[0],jQuery("#func_ivstrack_enable").prop("checked",k.Enable),jQuery("#func_continue_time").val(k.Duration)}).fail(function(){remarkDisplay("func_ivsTrack_remark",tl("Operateingfailure"),3e3,1)})})},_idleRender:function(){G._getptzconfig().done(function(){c.getConfig("IdleMotion").done(function(b){a=b[0],G._idleRenderElements()}).fail(function(){remarkDisplay("func_idle_remark",tl("Operateingfailure"),3e3,1)})})},_powerUpRender:function(){G._getptzconfig().done(function(){c.getConfig("PowerUp").done(function(a){i=a[0],G._powerUpRenderElements()}).fail(function(){remarkDisplay("func_powerup_remark",tl("Operateingfailure"),3e3,1)})})},_getptzconfig:function(){var a,i,j,k,l=[];return 0==e.length&&(a=c.getConfig("PtzTour").done(function(a){e=a[0],f=jQuery.extend(!0,[],e)}),l.push(a)),g||(i=c.getConfig("AutoPattern").done(function(a){g=a[0]}),l.push(i)),h||(j=c.getConfig("AutoScan").done(function(a){h=a[0]}),l.push(j)),d||(k=b.getPresets.done(function(a){d=a||[]}),l.push(k)),jQuery.when.apply(null,l)},_idleRenderElements:function(){jQuery("#func_idle_enable").prop("checked",a.Enable),jQuery("#func_idle_time").val(a.Timer);var b="",c=jQuery("#func_idle_number_wrap"),f=jQuery("#func_idle_number");switch(a.Function){case"Preset":if(jQuery("#func_idle_preset").prop("checked",!0),0==d.length)c.hide();else{f.empty();for(var i=0;i<d.length;i++)b+='<option value="'+d[i].Index+'">'+d[i].Index+" : "+d[i].Name+"</option>";f.append(b),a.PresetId&&f.val(a.PresetId)}break;case"Pattern":jQuery("#func_idle_pattern").prop("checked",!0);for(var b="",i=0;i<g.length;i++)g[i].Enable&&(b+="<option value="+(i+1)+">"+(i+1)+"</option>");f.empty().append(b),a.PatternId&&f.val(a.PatternId+1),""==b&&$selectwrap.hide();break;case"Scan":jQuery("#func_idle_scan").prop("checked",!0);for(var b="",i=0;i<h.length;i++)h[i].LeftEnable&&h[i].RightEnable&&(b+="<option value="+(i+1)+">"+(i+1)+"</option>");""==b?$selectwrap.hide():f.empty().append(b).val(a.ScanId+1);break;case"Tour":jQuery("#func_idle_tour").prop("checked",!0);for(var j=e.length>q?q:e.length,b="",i=0;j>i;i++)e[i].Enable&&(b+="<option value="+(i+1)+">"+(i+1)+" : "+e[i].Name+"</option>");""==b?$selectwrap.hide():f.empty().append(b).val(a.TourId+1);break;default:c.hide(),jQuery("#func_idle_preset").prop("checked",!1),jQuery("#func_idle_tour").prop("checked",!1),jQuery("#func_idle_scan").prop("checked",!1),jQuery("#func_idle_pattern").prop("checked",!1)}},_powerUpRenderElements:function(){jQuery("#func_powerup_enable").prop("checked",i.Enable);var a=jQuery("#func_powerup_number_wrap").hide(),b=jQuery("#func_powerup_number").empty(),c="";switch(i.Function){case"Auto":jQuery("#func_powerup_auto").prop("checked",!0);break;case"Preset":if(jQuery("#func_powerup_preset").prop("checked",!0),0!==d.length){a.show();for(var f=0;f<d.length;f++)c+="<option value="+d[f].Index+">"+d[f].Index+" : "+d[f].Name+"</option>";b.append(c),i.PresetId&&b.val(i.PresetId)}break;case"Pattern":jQuery("#func_powerup_pattern").prop("checked",!0);for(var f=0;f<g.length;f++)g[f].Enable&&(c+="<option value="+(f+1)+">"+(f+1)+"</option>");b.append(c),""!==c&&(a.show(),i.PatternId&&b.val(i.PatternId+1));break;case"Scan":jQuery("#func_powerup_scan").prop("checked",!0);for(var f=0;f<h.length;f++)h[f].LeftEnable&&h[f].RightEnable&&(c+="<option value="+(f+1)+">"+(f+1)+"</option>");b.append(c),""!==c&&(a.show(),i.ScanId&&b.val(i.ScanId+1));break;case"Tour":jQuery("#func_powerup_tour").prop("checked",!0);for(var j=e.length>q?q:e.length,f=0;j>f;f++)e[f].Enable&&(c+="<option value="+(f+1)+">"+(f+1)+" : "+e[f].Name+"</option>");b.append(c),""!==c&&(a.show(),i.TourId&&b.val(i.TourId+1))}},_onIvsTrackConfirmClick:function(){k.Enable=jQuery("#func_ivstrack_enable").prop("checked"),k.Duration=jQuery("#func_continue_time").val()-0,c.setConfig("PanoramicTrace",[k]).done(function(){remarkDisplay("func_ivsTrack_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("func_ivsTrack_remark",tl("Saving failure"),3e3,1)})},_onIdleConfirmClick:function(){if(a.Enable=jQuery("#func_idle_enable").prop("checked"),jQuery("#func_idle_preset").prop("checked")){if(a.Function="Preset","none"==jQuery("#func_idle_number_wrap")[0].style.display)return void remarkDisplay("func_idle_remark",tl("addPresetFirst"),3e3,3);a.PresetId=jQuery("#func_idle_number").val()-0}else if(jQuery("#func_idle_pattern").prop("checked")){if(a.Function="Pattern","none"==jQuery("#func_idle_number_wrap")[0].style.display)return void remarkDisplay("func_idle_remark",tl("addPatternFirst"),3e3,3);a.PatternId=jQuery("#func_idle_number").val()-1}else if(jQuery("#func_idle_scan").prop("checked")){if(a.Function="Scan","none"==jQuery("#func_idle_number_wrap")[0].style.display)return void remarkDisplay("func_idle_remark",tl("addScanFirst"),3e3,3);a.ScanId=jQuery("#func_idle_number").val()-1}else if(jQuery("#func_idle_tour").prop("checked")){if(a.Function="Tour","none"==jQuery("#func_idle_number_wrap")[0].style.display)return void remarkDisplay("func_idle_remark",tl("addTourFirst"),3e3,3);a.TourId=jQuery("#func_idle_number").val()-1}else a.Function=null;a.Timer=jQuery("#func_idle_time").val()-0,c.setConfig("IdleMotion",[a]).done(function(){remarkDisplay("func_idle_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("func_idle_remark",tl("Saving failure"),3e3,1)})},_onPowerUpConfirmClick:function(){if(i.Enable=jQuery("#func_powerup_enable").prop("checked"),jQuery("#func_powerup_preset").prop("checked")){if(i.Function="Preset","none"==jQuery("#func_powerup_number_wrap")[0].style.display)return void remarkDisplay("func_powerup_remark",tl("addPresetFirst"),3e3,3);i.PresetId=jQuery("#func_powerup_number").val()-0}else if(jQuery("#func_powerup_pattern").prop("checked")){if(i.Function="Pattern","none"==jQuery("#func_powerup_number_wrap")[0].style.display)return void remarkDisplay("func_powerup_remark",tl("addPatternFirst"),3e3,3);i.PatternId=jQuery("#func_powerup_number").val()-1}else if(jQuery("#func_powerup_scan").prop("checked")){if(i.Function="Scan","none"==jQuery("#func_powerup_number_wrap")[0].style.display)return void remarkDisplay("func_powerup_remark",tl("addScanFirst"),3e3,3);i.ScanId=jQuery("#func_powerup_number").val()-1}else if(jQuery("#func_powerup_tour").prop("checked")){if(i.Function="Tour","none"==jQuery("#func_powerup_number_wrap")[0].style.display)return void remarkDisplay("func_powerup_remark",tl("addTourFirst"),3e3,3);i.TourId=jQuery("#func_powerup_number").val()-1}else jQuery("#func_powerup_auto").prop("checked")&&(i.Function="Auto");c.setConfig("PowerUp",[i]).done(function(){remarkDisplay("func_powerup_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("func_idle_remark",tl("Saving failure"),3e3,1)})},_onIvsTrackRefreshClick:function(){c.getConfig("PanoramicTrace").done(function(a){k=a[0],jQuery("#func_ivstrack_enable").prop("checked",k.Enable),jQuery("#func_continue_time").val(k.Duration),remarkDisplay("func_ivsTrack_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_ivsTrack_remark",tl("Operateingfailure"),3e3,1)})},_onIdleRefreshClick:function(){c.getConfig("IdleMotion").done(function(b){a=b[0],G._idleRenderElements(),remarkDisplay("func_idle_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_idle_remark",tl("Operateingfailure"),3e3,1)})},_onPowerUpRefreshClick:function(){c.getConfig("PowerUp").done(function(a){i=a[0],G._powerUpRenderElements(),remarkDisplay("func_powerup_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_powerup_remark",tl("Operateingfailure"),3e3,1)})},_onLimitEnableClick:function(){var a=jQuery("#func_limit_enable").prop("checked");K.Enable=a,G.setLimitUI(K),b.enableLimit(a).done(function(){remarkDisplay("func_limit_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_limit_remark",tl("Operateingfailure"),3e3,1)})},setLimitUI:function(a){var b={Enable:-1,UpLimit:0,DownLimit:1,LeftLimit:2,RightLimit:3,EnlargeLimit:4,ShrinkLimit:5};jQuery('#func_item_limit a[data-func="prev"]').addClass("ui-button-disabled"),a.Enable?jQuery('#func_item_limit a[data-func="set"]').addClass("ui-button-disabled"):jQuery('#func_item_limit a[data-func="set"]').removeClass("ui-button-disabled");for(var c in a){var d=b[c];a[c]&&1==a[c].Enable&&jQuery('#func_item_limit a[data-func="prev"][data-type="'+d+'"]').removeClass("ui-button-disabled")}},_onLimitBtnClick:function(){var a=jQuery(this),b=a.attr("data-func"),c=a.attr("data-type");if(!a.hasClass("ui-button-disabled"))switch(b){case"set":G._onLimitSetClick(c);break;case"prev":G._onLimitPreviewClick(c)}},_onLimitSetClick:function(a){a-=0;var c=["UpLimit","DownLimit","LeftLimit","RightLimit","EnlargeLimit","ShrinkLimit"];b.markLimit(a).done(function(){remarkDisplay("func_limit_remark",tl("Operateingsuccess"),3e3,0),void 0==K[c[a]]&&(K[c[a]]={}),K[c[a]].Enable=!0,jQuery('#func_item_limit a[data-func="prev"][data-type="'+a+'"]').removeClass("ui-button-disabled")}).fail(function(){remarkDisplay("func_limit_remark",tl("Operateingfailure"),3e3,1)})},_onLimitPreviewClick:function(a){a-=0,b.gotoLimit(a).done(function(){remarkDisplay("func_limit_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_limit_remark",tl("Operateingfailure"),3e3,1)})},_limitRender:function(){c.getConfig("PtzLimit").done(function(a){K=a[0],jQuery("#func_limit_enable").prop("checked",K.Enable),G.setLimitUI(K)}).fail(function(){remarkDisplay("func_limit_remark",tl("Operateingfailure"),3e3,1)}),c.getConfig("VideoWidget").done(function(a){a[0].PTZCoordinates.EncodeBlend?jQuery("#func_limitTip_wrap").addClass("fn-hide"):jQuery("#func_limitTip_wrap").removeClass("fn-hide")}),J.Support&&c.getConfig("PtzElevation").done(function(a){L=a,jQuery("#func_limit_Elevation").val(L[0].ElevationAngle||0)}).fail(function(){remarkDisplay("func_limit_remark",tl("Operateingfailure"),3e3,1)})},_onLimitEleChange:function(){return 0==L.length?void remarkDisplay("func_limit_remark",tl("Operateingfailure"),3e3,1):(L[0].ElevationAngle=jQuery("#func_limit_Elevation").val()-0,void c.setConfig("PtzElevation",L).fail(function(){remarkDisplay("func_limit_remark",tl("Operateingfailure"),3e3,1)}))},_initLimitDom:function(){var a=jQuery("#func_item_limit"),b=jQuery("#func_limit_Elevation");if(J.Support){a.children('div[data-cap="PtzElevation"]').removeClass("fn-hide"),b.empty();for(var c="",d=J.AngleRange[0];d>=J.AngleRange[1];d-=10)c+="<option value="+d+">"+d/10+"°</option>";b.append(c)}},_rightButtonDown:function(){},_loadptzocx:function(){Site.currentPage.is.functioncfg&&plugin.cover("#function_vedio",function(){plugin.SetRegionNum(0),plugin.SetModuleMode(1),plugin.open()})},postBacklineCfg:function(a,b,c,d){},_onDefaultClick:function(){remarkDisplay("func_default_remark",tl("waitConfigEffected"),3e3,3),c.restore(["PtzPreset","PtzTour","AutoPan","AutoScan","PtzSpeed","AutoPattern","PowerUp","IdleMotion","PtzLimit","PtzAutoMovement","PtzElevation","PanoramicTrace","PtzPowerLevel"]).done(function(a){b.reset().done(function(){d=[],e=[],f=[],g=[],h=[],t=0,u=0,v=0,w=-1,x=-1,G._changePtzBtn(),m=[],function(){remarkDisplay("func_default_remark",tl("Operateingsuccess"),3e3,0)}.delay(3e3)}).fail(function(){remarkDisplay("func_default_remark",tl("Operateingfailure"),3e3,1)}),webApp.isNeedReboot(a)&&webApp.reboot("The configration take effect! The device is restarting now,please reconnect later...")}).fail(function(){remarkDisplay("func_default_remark",tl("Operateingfailure"),3e3,1)})},_onCameraRestart:function(){b.restartCamera().done(function(){remarkDisplay("func_cameraRestart_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_cameraRestart_remark",tl("Operateingfailure"),3e3,1)})},_onPtzRestartClick:function(){b.restartPtz().done(function(){G._changePtzBtn(),remarkDisplay("func_ptzrestart_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_ptzrestart_remark",tl("Operateingfailure"),3e3,1)})},_ptzspeedRender:function(){c.getConfig("PtzSpeed").done(function(a){switch(j=a[0],j.PtzSpeed){case 0:jQuery("#func_ptzspeed_low").prop("checked",!0);break;case 1:jQuery("#func_ptzspeed_middle").prop("checked",!0);break;case 2:jQuery("#func_ptzspeed_high").prop("checked",!0)}}).fail(function(){remarkDisplay("func_idle_remark",tl("Operateingfailure"),3e3,1)})},_setPtzSpeedSpeed:function(){j.PtzSpeed=jQuery("#func_ptzspeed_low").prop("checked")?0:jQuery("#func_ptzspeed_middle").prop("checked")?1:2,c.setConfig("PtzSpeed",[j]).done(function(){remarkDisplay("func_ptzspeed_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("func_ptzspeed_remark",tl("Saving failure"),3e3,1)})},_changePtzBtn:function(){z||(jQuery("#func_scan_setting").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.ScanConfig._onScanSettingClick),jQuery("#func_scan_limit_left").removeClass("ui-button-disabled").off().on("click",Page.functioncfg.ScanConfig._onScanLimitLeftClick),jQuery("#func_scan_limit_right").removeClass("ui-button-disabled").off().on("click",Page.functioncfg.ScanConfig._onScanLimitRightClick)),jQuery("#func_scan_start").show(),z=!0,B||(jQuery("#func_tour_add").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.TourConfig._onTourAddClick),jQuery("#func_tourpoint_add").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.TourConfig._onTourPointAddClick),jQuery("#func_tour_confirm").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.TourConfig._onTourConfirmClick),jQuery("#func_tour_refresh").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.TourConfig._onTourRefreshClick)),jQuery("#func_tour_start").show(),B=!0,A||(jQuery("#func_pattern_setting").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.PatternConfig._onPatternSettingClick),jQuery("#func_pattern_record_start").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.PatternConfig._onPatternRecordStartClick),jQuery("#func_pattern_record_stop").removeClass("ui-button-special-disabled").off().on("click",Page.functioncfg.PatternConfig._onPatternRecordStopClick)),jQuery("#func_pattern_start").show(),A=!0,jQuery("#func_autopan_start").show(),y=!0,jQuery("#func_estopAll_three").hide(),jQuery("#func_estopAll_one").hide(),jQuery("#func_estopAll_seven").hide()},_stopPtz:function(){B||Page.functioncfg.TourConfig._onTourStopClick(),y||Page.functioncfg.AutoPanConfig._onAutoPanStopClick(),z||(z=!0,b.stopScan(t-0+1).done()),A||(A=!0,b.stopPatternReplay(v-0+1).done())}}}(),function(){var c=!0,e=Page.functioncfg.PresetsConfig={init:function(){e.bind()},translate:function(){jQuery("#func_preset_number").text(tl("w_Numbers")),jQuery("#func_preset_title").text(tl("presetTitle")),jQuery("#func_preset_setting").text(tl("w_Save")),jQuery("#func_preset_delete").text(tl("Delete")),jQuery("#func_preset_add_label").text(tl("w_AddInPtz")),jQuery("#func_preset_refresh_label").text(tl("w_Refresh")),jQuery("#func_preset_clean_label").text(tl("w_Clean"))},render:function(a){jQuery("#func_estopAll_three").hide(),jQuery("#func_estopAll_seven").hide(),b.getPresets().done(function(b){d=b||[],e._showPresetsList(),1==a&&remarkDisplay("func_preset_remark",tl("Operateingsuccess"),3e3,0)})},bind:function(){jQuery("#func_preset_add").on("click",e._onPresetAddClick),jQuery("#func_preset_refresh").on("click",e._onPresetRefreshClick),jQuery("#func_preset_clean").on("click",e._onPresetCleanClick),e._presetListEvent()},_checkIVSpreset:function(a){for(var b=!1,c=0;c<d.length;c++)if(d[c].Index==a){1==d[c].Type&&(b=!0);break}return b},_presetListEvent:function(){jQuery("#func_preset_infolist").on("click",function(a){var b=a.target.id;if(""!=b){var c=b.replace(/[^\d]/g,"");if(b.match("func_preset_table_delete_")){var d=e._checkIVSpreset(c);d?(plugin.hide(),jQuery.confirm(tl("Ok"),tl("presetTip1"),function(){e._removePreset(c,c),e._removePresetDom(c),e._refreshDomTable(),plugin.cover("#function_vedio")},function(){plugin.cover("#function_vedio")})):(e._removePreset(c,c),e._removePresetDom(c),e._refreshDomTable())}else if(b.match("func_preset_table_setting_")){var f=jQuery("#func_preset_table_number_"+c).attr("title")-0,g=jQuery("#func_preset_table_name_"+c).attr("title");e._setPreset(f,g),e._gotoPresetDom(f)}else e._gotoPreset(c,function(){e._gotoPresetDom(c)})}else{var c=a.target.firstChild.id.replace(/[^\d]/g,"");e._gotoPreset(c,function(){e._gotoPresetDom(c)})}}),jQuery("#func_preset_infolist").on("dblclick",function(a){var b=a.target.id;if(""!=b){var c=b.replace(/[^\d]/g,"");b.match("func_preset_table_number_")?(jQuery("#"+b).hide(),jQuery("#func_preset_table_inputnumber_"+c).show(),jQuery("#func_preset_table_inputnumber_"+c).focus(),jQuery("#func_preset_table_inputnumber_"+c).val(jQuery("#func_preset_table_number_"+c).attr("title"))):b.match("func_preset_table_name_")?(jQuery("#"+b).hide(),jQuery("#func_preset_table_inputname_"+c).show(),jQuery("#func_preset_table_inputname_"+c).focus(),jQuery("#func_preset_table_inputname_"+c).val(jQuery("#func_preset_table_name_"+c).attr("title"))):e._gotoPreset(c,function(){e._gotoPresetDom(c)})}})},_bindPresetInputBlur:function(a){jQuery(a).on("blur",function(a){var b=a.target.id,c=b.replace(/[^\d]/g,"");if(b.match("func_preset_table_inputname_")){if(/[\"*<>?|&\/]+/.test(jQuery("#func_preset_table_inputname_"+c).val()))remarkDisplay("func_preset_remark",tl("w_useMannageErr_InputNotValid"),3e3,2);else{var d=jQuery("#func_preset_table_inputname_"+c).val().replace(/^\s+|\s+ $/g,"");""==d&&(d=jQuery("#func_preset_table_name_"+c).html()),jQuery("#func_preset_table_name_"+c).text(d),jQuery("#func_preset_table_name_"+c).attr("title",d)}jQuery("#func_preset_table_name_"+c).show(),jQuery("#func_preset_table_inputname_"+c).hide()}else if(b.match("func_preset_table_inputnumber_")){var f=jQuery("#func_preset_table_inputnumber_"+c).val();if(parseInt(f)!=f)return remarkDisplay("func_preset_remark",tl("Numbers only!"),2e3,1),jQuery("#func_preset_table_inputnumber_"+c).hide(),jQuery("#func_preset_table_number_"+c).show(),4;f=parseInt(f);var g=jQuery("#func_preset_table_number_"+c).attr("title");if(g=parseInt(g),parseInt(f)==g)jQuery("#func_preset_table_inputnumber_"+c).hide(),jQuery("#func_preset_table_number_"+c).show();else{var h=e._checkPresetIndex(f);switch(h){case 0:{var g=jQuery("#func_preset_table_number_"+c).attr("title")-0,i=jQuery("#func_preset_table_name_"+c).attr("title");e._setPreset(f,i,function(){e._removePreset.delay(1e3,"",g),jQuery("#func_preset_table_inputnumber_"+c).hide(),jQuery("#func_preset_table_number_"+c).show(),jQuery("#func_preset_table_number_"+c).attr("title",f),jQuery("#func_preset_table_number_"+c).html(f),jQuery("#func_preset_table_"+g).attr("id","func_preset_table_"+f),jQuery("#func_preset_table_number_"+g).attr("id","func_preset_table_number_"+f),jQuery("#func_preset_table_inputnumber_"+g).attr("id","func_preset_table_inputnumber_"+f),jQuery("#func_preset_table_name_"+g).attr("id","func_preset_table_name_"+f),jQuery("#func_preset_table_inputname_"+g).attr("id","func_preset_table_inputname_"+f),jQuery("#func_preset_table_setting_"+g).attr("id","func_preset_table_setting_"+f),jQuery("#func_preset_table_delete_"+g).attr("id","func_preset_table_delete_"+f)})}break;case 1:remarkDisplay("func_preset_remark",tl("presetExist"),2e3,1);break;case 2:remarkDisplay("func_preset_remark",tl("illegalPreset"),2e3,1);break;case 3:remarkDisplay("func_preset_remark",tl("noMorePreset"),2e3,1);break;case 4:remarkDisplay("func_preset_remark",tl("Numbers only!"),2e3,1);break;default:remarkDisplay("func_preset_remark",tl("请记录你的操作，此种用户行为无提示，反馈给开发人员？"),2e3,1)}jQuery("#func_preset_table_inputnumber_"+c).hide(),jQuery("#func_preset_table_number_"+c).show()
}}})},_checkPresetIndex:function(a){if("number"!=$type(a))return 4;if(a>p||1>a)return 2;var b=[];if(b=jQuery(".func_preset_table_number"),b.length>=p)return 3;for(var c=0;c<b.length;c++)if(jQuery(b[c]).attr("title")==a)return 1;return 0},_showPresetsList:function(){jQuery("#func_preset_infolist").html("");for(var b="",c=0;c<d.length;c++){var f=c%2?"":"ui-table-tr-odd";1==d[c].Type&&(f+=" ui-table-tr-ivs");var g=d[c].Index;b+='<tr id="func_preset_table_'+g+'" class="func_preset_table '+f+'">',b+='<td class="fn-width40">',b+='<a class="func_preset_table_number"  id="func_preset_table_number_'+g+'" style="display:block;" title="'+d[c].Index+'">'+d[c].Index+"</a>",b+='<input type="text" id = "func_preset_table_inputnumber_'+g+'" class= "func_preset_table_inputnumber ui-input fn-width30"  style="display:none;"  maxlength="10" />',b+="</td>",b+='<td class="fn-width120">',b+='<a class="func_preset_table_name"  id="func_preset_table_name_'+g+'" style="display:block; " title="'+d[c].Name+'">'+d[c].Name+"</a>",b+='<input type="text" class="func_preset_table_inputname ui-input fn-width100"  id = "func_preset_table_inputname_'+g+'"  style="display:none;"  maxlength="10" />',b+="</td>",b+='<td class="fn-width40">',b+='<i id="func_preset_table_setting_'+g+'" class="ui-table-icon-save"></i>',b+="</td>",b+="<td>",b+='<i id="func_preset_table_delete_'+g+'" class="ui-table-icon-del func_preset_table_delete"></i>',b+="</td>",b+="</tr>"}jQuery("#func_preset_infolist").html(b),e._bindPresetInputBlur("#func_preset_infolist input");for(var h=jQuery("#func_preset_infolist .func_preset_table_inputname"),c=0;c<h.length;c++)a(h[c],{maxlength:63,maxByte:63})},_onPresetRefreshClick:function(){e.render(!0)},_onPresetListRefresh:function(){return jQuery.Deferred(function(a){b.getPresets().done(function(b){d=b||[],a.resolve()})})},_gotoPreset:function(a,c){a-=0,Page.functioncfg._changePtzBtn(),b.gotoPreset(a,null).done(function(){void 0!=c&&c()}).fail(function(){remarkDisplay("func_preset_remark",tl("savePresetFirst"),3e3,1)})},_gotoPresetDom:function(a){jQuery("#func_preset_infolist .ui-table-tr-current").removeClass("ui-table-tr-current"),jQuery("#func_preset_table_"+a).addClass("ui-table-tr-current")},_onPresetCleanClick:function(){b.removePreset(0).done(function(){d=[],jQuery("#func_preset_infolist").html("")}).fail(function(){remarkDisplay("func_preset_remark",tl("Operateingfailure"),3e3,1)})},_onPresetAddClick:function(){var a=0,b=[];if(jQuery(".func_preset_table_number").attr("title",function(a,c){b.push(c-0)}),!(b.length<p))return void remarkDisplay("func_preset_remark",tl("noMorePreset"),3e3,3);b=b.sort(e.sortNumber);for(var c=0;c<b.length;c++)if(b[c]!=c+1){a=c+1;break}0==a&&(a=b.length+1);var d={Index:a,Name:tl("w_Preset")+a};e._addDom_tr(d),e._refreshDomTable()},_createDom_tr:function(a){var b="",c=new Element("tr",{id:"func_preset_table_"+a.Index,"class":"func_preset_table"});return b+='<td class="fn-width40">',b+='<a class="func_preset_table_number"  id="func_preset_table_number_'+a.Index+'" style="display:block;" title="'+a.Index+'">'+a.Index+"</a>",b+='<input type="text" id = "func_preset_table_inputnumber_'+a.Index+'" class= "func_preset_table_inputnumber ui-input fn-width30"  style="display:none;"  maxlength="10" />',b+="</td>",b+='<td class="fn-width120">',b+='<a class="func_preset_table_name"  id="func_preset_table_name_'+a.Index+'" style="display:block; " title="'+a.Name+'">'+a.Name+"</a>",b+='<input type="text" class="func_preset_table_inputname ui-input fn-width100"  id = "func_preset_table_inputname_'+a.Index+'"  style="display:none;"/>',b+="</td>",b+='<td class="fn-width40">',b+='<i id="func_preset_table_setting_'+a.Index+'" class="ui-table-icon-save"></i>',b+="</td>",b+="<td>",b+='<i id="func_preset_table_delete_'+a.Index+'" class="ui-table-icon-del func_preset_table_delete"></i>',b+="</td>",jQuery(c).html(b)},_addDom_tr:function(b){var c=e._createDom_tr(b),d=[];if(jQuery(".func_preset_table_number").attr("title",function(a,b){d.push(b-0)}),0==d.length)jQuery("#func_preset_infolist").append(c);else{d=d.sort(e.sortNumber);for(var f=0;f<d.length&&!(d[f]>f+1);f++);f==d.length?jQuery("#func_preset_infolist").append(c):jQuery("#func_preset_table_"+d[f]).before(c)}e._bindPresetInputBlur("#func_preset_table_"+b.Index+" input"),jQuery("#func_preset_infolist .ui-table-tr-current").removeClass("ui-table-tr-current"),jQuery("#func_preset_table_"+b.Index).addClass("ui-table-tr-current"),a($("func_preset_table_inputname_"+b.Index),{maxlength:63,maxByte:63});var g=jQuery("#func_preset_scroll").scrollTop(),h=jQuery("#func_preset_table_"+b.Index).offset().top;jQuery("#func_preset_scroll").scrollTop(g+h)},_removePreset:function(a){b.removePreset(a-0).done(function(){remarkDisplay("func_preset_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_preset_remark",tl("Operateingfailure"),3e3,1)})},_setPreset:function(a,d,e){a-=0,c?(c=!1,b.setPreset(a,d).done(function(){null!=e&&e(),remarkDisplay("func_preset_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_preset_remark",tl("Operateingfailure"),3e3,1)}).always(function(){c=!0})):remarkDisplay("func_preset_remark",tl("waitPresetSetted"),3e3,3)},_removePresetDom:function(a){jQuery("#func_preset_table_"+a).remove()},_refreshDomTable:function(){jQuery("#func_preset_infolist .ui-table-tr-odd").removeClass("ui-table-tr-odd"),jQuery.each(jQuery("#func_preset_infolist .func_preset_table"),function(a,b){a%2==0&&jQuery(b).addClass("ui-table-tr-odd")})},sortNumber:function(a,b){return a-b}}}(),function(){var a=Page.functioncfg.TourConfig={init:function(){a.translate(),a.bind()},translate:function(){jQuery("#func_tour_number").text(tl("tourNumber")),jQuery("#func_tour_name").text(tl("tourName")),jQuery("#func_tour_delete").text(tl("Delete")),jQuery("#func_tour_start_label").text(tl("Start")),jQuery("#func_tour_stop_label").text(tl("Stop")),jQuery("#func_tour_add_label").text(tl("w_AddInPtz")),jQuery("#func_tourpoint_number").text(tl("w_Numbers")),jQuery("#func_tourpoint_point").text(tl("w_Preset")),jQuery("#func_tourpoint_duration").text(tl("duration")+"(s)"),jQuery("#func_tourpoint_delete").text(tl("Delete")),jQuery("#func_tourpoint_add_label").text(tl("w_AddInPtz")),jQuery("#func_tour_confirm_label").text(tl("w_Save")),jQuery("#func_tour_refresh_label").text(tl("w_Refresh"))},render:function(){var b=arguments[0];c.getConfig("PtzMovement").done(function(d){B=-1==d[0].Function.indexOf("Tour"),B||(w=d[0].Index),B||b?a._tourNormalStatus():a._onTourEstopAll(),c.getConfig("PtzTour").done(function(b){e=b[0],f=jQuery.extend(!0,[],e),a._showToursList()}).fail(function(){remarkDisplay("func_tour_remark",tl("Operateingfailure"),3e3,1)})})},bind:function(){jQuery("#func_tour_add").on("click",a._onTourAddClick),jQuery("#func_tour_start").on("click",a._onTourStartClick),jQuery("#func_tour_stop").on("click",a._onTourStopClick),jQuery("#func_tourpoint_add").on("click",a._onTourPointAddClick),jQuery("#func_tour_confirm").on("click",a._onTourConfirmClick),jQuery("#func_tour_refresh").on("click",a._onTourRefreshClick)},_showToursList:function(){jQuery("#func_tour_infolist").html("");for(var b=e.length>q?q:e.length,c='<table cellpadding="0" cellspacing="0" >',d=0;b>d;d++){var f=d%2?"":"ui-table-tr-odd";e[d].Enable&&(c+='<tr id = "func_tour_table_'+d+'" class="func_tour_table '+f+'">',c+='<td class="fn-width80"><a class = "func_tour_table_number"  id = "func_tour_table_number_'+d+'" style="display:block;" title="'+(d+1)+'">'+(d+1)+"</a></td>",c+='<td class="fn-width140">',c+='<a class = "func_tour_table_name"  id = "func_tour_table_name_'+d+'" style="display:block; width:140px;" title="'+e[d].Name+'">'+e[d].Name+"</a>",c+='<input type="text" id = "func_tour_table_inputname_'+d+'" class= "func_tour_table_inputname J_table_input ui-input"  style="display:none; width:130px;"  maxlength=10 />',c+="</td>",c+='<td ><i id="func_tour_table_delete_'+d+'" class="ui-table-icon-del func_tour_table_delete"></i></td>',c+="</tr>")}if(c+="</table>",jQuery("#func_tour_infolist").html(c),w=0!==jQuery("#func_tour_table_"+w).length?w:-1,-1==w){jQuery("#func_tour_start").off(),jQuery("#func_tour_stop").off(),jQuery("#func_tour_start").addClass("ui-button-special-disabled"),jQuery("#func_tour_stop").addClass("ui-button-special-disabled");for(var d=0;b>d;d++)if(jQuery("#func_tour_table_"+d)){w=0!==jQuery("#func_tour_table_"+d).length?d:-1;break}}else jQuery("#func_tour_start").on("click",a._onTourStartClick),jQuery("#func_tour_stop").on("click",a._onTourStopClick),jQuery("#func_tour_start").removeClass("ui-button-special-disabled"),jQuery("#func_tour_stop").removeClass("ui-button-special-disabled");jQuery("#func_tour_table_"+w).length?(jQuery("#func_tour_table_"+w).addClass("ui-table-tr-current"),a._showTourPointList(w)):jQuery("#func_tourpoint_infolist").html(""),jQuery("#page_funcConfig .func_tour_table").on("click",function(){var b=jQuery(this).attr("id").replace(/[^\d]/g,""),c=jQuery("#func_tour_table_number_"+b).attr("title");jQuery(".func_tour_table").removeClass("ui-table-tr-current"),jQuery(this).addClass("ui-table-tr-current"),w=c-1,a._showTourPointList(w)}),jQuery("#page_funcConfig .func_tour_table_delete").on("click",function(){var b=jQuery(this).attr("id").replace(/[^\d]/g,""),c=jQuery("#func_tour_table_number_"+b).attr("title")-0;a._removeTour(c),w-=1}),jQuery("#page_funcConfig .func_tour_table_name").on("dblclick",function(){var a=jQuery(this).attr("id").replace(/[^\d]/g,"");jQuery("#func_tour_table_name_"+a).hide(),jQuery("#func_tour_table_inputname_"+a).show(),jQuery("#func_tour_table_inputname_"+a).focus(),jQuery("#func_tour_table_inputname_"+a).val(e[a].Name)}),jQuery("#page_funcConfig .func_tour_table_inputname").on("blur",function(){var b=jQuery(this).attr("id").replace(/[^\d]/g,"");a._onTourInputBlur(b,"func_tour_table_inputname_"+b,"func_tour_table_name_"+b,"Name")})},_removeTour:function(c){c-=0,b.removeTour(c).done(function(){remarkDisplay("func_tour_remark",tl("Operateingsuccess"),3e3,0),e[c-1].Enable=!1,e[c-1].Name="None";for(var b=0;b<e[c-1].Presets.length;b++)e[c-1].Presets[b]=[-1,10,G];f[c-1].Enable=!1,f[c-1].Name="None";for(var b=0;b<f[c-1].Presets.length;b++)f[c-1].Presets[b]=[-1,10,G];w-=1,a._showToursList()}).fail(function(){remarkDisplay("func_tour_remark",tl("Operateingfailure"),3e3,1)})},_onTourInputBlur:function(a,b,c,f){if(/[\"*<>?|&\/]+/.test(jQuery("#"+b).val()))return jQuery("#"+c).show(),jQuery("#"+b).hide(),jQuery("#"+c).html(e[a][f]),void remarkDisplay("func_tour_remark",tl("w_useMannageErr_InputNotValid"),3e3,2);var g=jQuery("#"+b).val().replace(/^\s+|\s+ $/g,"");""==g&&(jQuery("#func_preset_table_inputname_"+a).val(d[a].Name),jQuery("#"+b).val(e[a][f]),g=e[a][f]),jQuery("#"+c).show(),jQuery("#"+b).hide(),e[a][f]=g,jQuery("#"+c).html(g),jQuery("#"+c).attr("title",g)},_onTourAddClick:function(){for(var b=e.length>q?q:e.length,c=0;b>c;c++)if(!e[c].Enable){e[c].Enable=!0;break}return c==b?void remarkDisplay("func_tour_remark",tl("noMoreTour"),3e3,3):(w=c,void a._showToursList())},_onTourStartClick:function(){return-1==w?void remarkDisplay("func_tour_remark",tl("noTourSelected"),3e3,3):(Page.functioncfg._stopPtz(),Page.functioncfg._changePtzBtn(),B=!1,void a._sendTourStart.delay(100))},_onTourEstopAll:function(){jQuery("#func_estopAll_three").css({left:688,top:128,width:290,height:158,display:"block"}),jQuery("#func_estopAll_seven").css({left:688,top:355,width:290,height:158,display:"block"}),jQuery("#func_tour_add").addClass("ui-button-special-disabled").off(),jQuery("#func_tourpoint_add").addClass("ui-button-special-disabled").off(),jQuery("#func_tour_confirm").addClass("ui-button-special-disabled").off(),jQuery("#func_tour_refresh").addClass("ui-button-special-disabled").off(),remarkDisplay("func_tour_remark",tl("isTouring"),3e3,3)},_sendTourStart:function(){b.startTour(w-0+1).done(function(){a._onTourEstopAll()}).fail(function(){remarkDisplay("func_tour_remark",tl("Operateingfailure"),3e3,1)})},_onTourStopClick:function(){B=!0,a._tourNormalStatus(),b.stopTour(w-0+1).fail(function(){remarkDisplay("func_tour_remark",tl("Operateingfailure"),3e3,1)})},_tourNormalStatus:function(){jQuery("#func_estopAll_three").hide(),jQuery("#func_estopAll_seven").hide(),jQuery("#func_tour_add").removeClass("ui-button-special-disabled").off().on("click",a._onTourAddClick),jQuery("#func_tourpoint_add").removeClass("ui-button-special-disabled").off().on("click",a._onTourPointAddClick),jQuery("#func_tour_confirm").removeClass("ui-button-special-disabled").off().on("click",a._onTourConfirmClick),jQuery("#func_tour_refresh").removeClass("ui-button-special-disabled").off().on("click",a._onTourRefreshClick)},_showTourPointList:function(b){jQuery("#func_tourpoint_infolist").html("");for(var c='<table cellpadding="0" cellspacing="0" >',g=0;g<e[b].Presets.length;g++){var h=g%2?"":"ui-table-tr-odd";if(-1!=e[b].Presets[g][0]){var i=e[b].Presets[g][0]+1+":"+a._presetIndexToTitle(e[b].Presets[g][0]+1);c+='<tr id = "func_tourpoint_table_'+g+'" class="func_tourpoint_table '+h+'">',c+='<td class="fn-width35">',c+='<span title="'+(g+1)+'">'+(g+1)+"</span>",c+="</td>",c+='<td class="fn-width100">',c+='<span class = "func_tourpoint_table_number"  id = "func_tourpoint_table_number_'+g+'" style="width:100px; display:block;" title="'+i+'">'+(e[b].Presets[g][0]+1)+"</span>",c+='<select id = "func_tourpoint_table_inputnumber_'+g+'" class= "func_tourpoint_table_inputnumber ui-select fn-width100" style="display:none;"></select>',c+="</td>",c+='<td class="fn-width100">',c+='<a class = "func_tourpoint_table_duration"  id = "func_tourpoint_table_duration_'+g+'" style="display:block;" title="'+e[b].Presets[g][1]/H.unit+'">'+e[b].Presets[g][1]/H.unit+"</a>",c+='<input type="text" class= "func_tourpoint_table_inputduration ui-input" id = "func_tourpoint_table_inputduration_'+g+'"  style="display:none; width:50px;"  maxlength=10 />',c+="</td>",c+='<td class="wid15"><i id="func_tourpoint_table_delete_'+g+'" class="ui-table-icon-del func_tourpoint_table_delete"></i></td>',c+="</tr>"}}c+="</table>",jQuery("#func_tourpoint_infolist").html(c);for(var g=0;g<e[b].Presets.length;g++)if(jQuery("#func_tourpoint_table_"+g)){jQuery("#func_tourpoint_table_"+g).addClass("ui-table-tr-current");break}for(var j=!1,g=0;g<f[b].Presets.length;g++)if(-1!=f[b].Presets[g][0]){j=!0;break}f[b].Enable&&j?(jQuery("#func_tour_start").off().on("click",a._onTourStartClick),jQuery("#func_tour_stop").off().on("click",a._onTourStopClick),jQuery("#func_tour_start").removeClass("ui-button-special-disabled"),jQuery("#func_tour_stop").removeClass("ui-button-special-disabled")):(jQuery("#func_tour_start").show(),jQuery("#func_tour_start").off(),jQuery("#func_tour_stop").off(),jQuery("#func_tour_start").addClass("ui-button-special-disabled"),jQuery("#func_tour_stop").addClass("ui-button-special-disabled")),jQuery("#page_funcConfig .func_tourpoint_table").on("click",function(){var a=jQuery(this).attr("id").replace(/[^\d]/g,"");if(null!=jQuery("#func_tourpoint_table_number_"+a)){var b=jQuery("#func_tourpoint_table_number_"+a).attr("title").split(":"),c=b[0]-0;jQuery(".func_tourpoint_table").removeClass("ui-table-tr-current"),jQuery(this).addClass("ui-table-tr-current"),Page.functioncfg.PresetsConfig._gotoPreset(c)}}),jQuery("#page_funcConfig .func_tourpoint_table_delete").on("click",function(){var c=jQuery(this).attr("id").replace(/[^\d]/g,""),d=e[b].Presets[c][1],f=e[b].Presets[c][2];e[b].Presets.splice(c,1),e[b].Presets.push([-1,d,f]),a._showTourPointList(b)}),jQuery("#page_funcConfig .func_tourpoint_table_duration").on("dblclick",function(){var a=jQuery(this).attr("id").replace(/[^\d]/g,"");jQuery("#func_tourpoint_table_duration_"+a).hide(),jQuery("#func_tourpoint_table_inputduration_"+a).show(),jQuery("#func_tourpoint_table_inputduration_"+a).focus(),jQuery("#func_tourpoint_table_inputduration_"+a).val(e[b].Presets[a][1]/H.unit)}),jQuery("#page_funcConfig .func_tourpoint_table_inputduration").on("blur",function(){var a=jQuery(this).attr("id").replace(/[^\d]/g,""),c=H.max/H.unit,d=H.min/H.unit;limit(this,c),limitMin(this,d),""==jQuery("#func_tourpoint_table_inputduration_"+a).val()&&jQuery("#func_tourpoint_table_inputduration_"+a).val(e[b].Presets[a][1]/H.unit),jQuery("#func_tourpoint_table_duration_"+a).show(),jQuery("#func_tourpoint_table_inputduration_"+a).hide(),e[b].Presets[a][1]=(jQuery("#func_tourpoint_table_inputduration_"+a).val()-0)*H.unit,jQuery("#func_tourpoint_table_duration_"+a).html(jQuery("#func_tourpoint_table_inputduration_"+a).val()),jQuery("#func_tourpoint_table_duration_"+a).attr("title",jQuery("#func_tourpoint_table_inputduration_"+a).val())}),jQuery("#page_funcConfig .func_tourpoint_table_number").on("dblclick",function(){var a=jQuery(this).attr("id").replace(/[^\d]/g,""),b=jQuery("#func_tourpoint_table_number_"+a).html();jQuery("#func_tourpoint_table_number_"+a).hide(),jQuery("#func_tourpoint_table_inputnumber_"+a).show(),jQuery("#func_tourpoint_table_inputnumber_"+a).focus(),jQuery("#func_tourpoint_table_inputnumber_"+a).html("");for(var c=0;c<d.length;c++)jQuery("#func_tourpoint_table_inputnumber_"+a)[0].options.add(new Option(d[c].Index+" : "+d[c].Name,d[c].Index)),jQuery("#func_tourpoint_table_inputnumber_"+a)[0].options[c].title=jQuery("#func_tourpoint_table_inputnumber_"+a)[0].options[c].text;jQuery("#func_tourpoint_table_inputnumber_"+a).val(b)}),jQuery("#page_funcConfig .func_tourpoint_table_inputnumber").on("change",function(){var c=jQuery(this).attr("id").replace(/[^\d]/g,"");e[b].Presets[c][0]=jQuery("#func_tourpoint_table_inputnumber_"+c).val()-1;var d=a._presetIndexToTitle(jQuery("#func_tourpoint_table_inputnumber_"+c).val());jQuery("#func_tourpoint_table_number_"+c).attr("title",jQuery("#func_tourpoint_table_inputnumber_"+c).val()+":"+d),jQuery("#func_tourpoint_table_number_"+c).html(jQuery("#func_tourpoint_table_inputnumber_"+c).val()),Page.functioncfg.PresetsConfig._gotoPreset(jQuery("#func_tourpoint_table_inputnumber_"+c).val())}),jQuery("#page_funcConfig .func_tourpoint_table_inputnumber").on("blur",function(){var a=jQuery(this).attr("id").replace(/[^\d]/g,"");jQuery("#func_tourpoint_table_number_"+a).show(),jQuery("#func_tourpoint_table_inputnumber_"+a).hide()})},_onTourPointAddClick:function(){if(null==d[0])return void remarkDisplay("func_tour_remark",tl("addPresetFirst"),3e3,3);if(-1==w)return void remarkDisplay("func_tour_remark",tl("addTourFirst"),3e3,3);for(var b=0;b<e[w].Presets.length;b++)if(-1==e[w].Presets[b][0]){e[w].Presets[b][0]=d[0].Index-1;break}return b==e[w].Presets.length?void remarkDisplay("func_tour_remark",tl("noMorePreset"),3e3,3):void a._showTourPointList(w)},_onTourRefreshClick:function(){c.getConfig("PtzTour").done(function(b){e=b[0],f=jQuery.extend(!0,[],e),a._showToursList(),remarkDisplay("func_tour_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_tour_remark",tl("Operateingfailure"),3e3,1)})},_presetIndexToTitle:function(a){for(d=d||[],i=0;i<d.length;i++)if(d[i].Index==a)return d[i].Name;return null},_onTourConfirmClick:function(){var b=[e];c.setConfig("PtzTour",b).done(function(){f=jQuery.extend(!0,[],e),a._showToursList(),remarkDisplay("func_tour_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_tour_remark",tl("Operateingfailure"),3e3,1)})}}}(),function(){var a=!0,d=Page.functioncfg.PatternConfig={init:function(){d.translate(),d.bind()},translate:function(){jQuery("#func_pattern_number_title").text(tl("patternNumber")),jQuery("#func_pattern_start_label").text(tl("Start")),jQuery("#func_pattern_stop_label").text(tl("Stop")),jQuery("#func_pattern_setting_label").text(tl("w_SetInPtz")),jQuery("#func_pattern_record_start").text(tl("pt_Start Record")),jQuery("#func_pattern_record_stop").text(tl("pt_Stop Record"))},render:function(){c.getConfig("PtzMovement").done(function(a){A="Pattern"!==a[0].Function,A||(v=a[0].Index),A?d._patternNormalStatus():d._onPatternEstopAll()}),c.getConfig("AutoPattern").done(function(a){g=a[0],d._showPatternList(),d._startRecordStatus()},!1).fail(function(){remarkDisplay("func_pattern_remark",tl("Operateingfailure"),3e3,1)})},bind:function(){jQuery("#func_pattern_start").on("click",d._onPatternStartClick),jQuery("#func_pattern_stop").on("click",d._onPatternStopClick),jQuery("#func_pattern_setting").on("click",d._onPatternSettingClick),jQuery("#func_pattern_record_start").on("click",d._onPatternRecordStartClick),jQuery("#func_pattern_record_stop").on("click",d._onPatternRecordStopClick),jQuery("#func_pattern_number").on("change",d._onPatternNumberChange)},_onPatternStartClick:function(){Page.functioncfg._stopPtz(),Page.functioncfg._changePtzBtn(),A=!1,d._sendPatternStart.delay(100)},_onPatternEstopAll:function(){jQuery("#func_estopAll_three").css({left:780,top:105,width:164,height:26,display:"block"}),jQuery("#func_pattern_setting").addClass("ui-button-special-disabled").off(),jQuery("#func_pattern_record_start").addClass("ui-button-special-disabled").off(),jQuery("#func_pattern_record_stop").addClass("ui-button-special-disabled").off(),remarkDisplay("func_pattern_remark",tl("isPatterning"),3e3,3)},_sendPatternStart:function(){var a=jQuery("#func_pattern_number").val()-0;b.startPatternReplay(a).done(function(){d._onPatternEstopAll()}).fail(function(){remarkDisplay("func_pattern_remark",tl("Operateingfailure"),3e3,1)})},_onPatternStopClick:function(){A=!0;var a=jQuery("#func_pattern_number").val()-0;d._patternNormalStatus(),b.stopPatternReplay(a).fail(function(){remarkDisplay("func_pattern_remark",tl("Operateingfailure"),3e3,1)})},_patternNormalStatus:function(){jQuery("#func_pattern_setting").removeClass("ui-button-special-disabled").off().on("click",d._onPatternSettingClick),jQuery("#func_pattern_record_start").removeClass("ui-button-special-disabled").off().on("click",d._onPatternRecordStartClick),jQuery("#func_pattern_record_stop").removeClass("ui-button-special-disabled").off().on("click",d._onPatternRecordStopClick),jQuery("#func_estopAll_three").hide()},_startRecordStatus:function(){"start"===d.recordStatus&&(jQuery("#func_pattern_start").off(),jQuery("#func_pattern_stop").off(),jQuery("#func_pattern_start").addClass("ui-button-special-disabled"),jQuery("#func_pattern_stop").addClass("ui-button-special-disabled"),jQuery("#func_estopAll_three").css({left:780,top:105,width:164,height:26,display:"block"}))},_stopRecordStatus:function(){jQuery("#func_pattern_start").off().on("click",d._onPatternStartClick),jQuery("#func_pattern_stop").off().on("click",d._onPatternStopClick),jQuery("#func_pattern_start").removeClass("ui-button-special-disabled"),jQuery("#func_pattern_stop").removeClass("ui-button-special-disabled"),jQuery("#func_estopAll_three").hide()},_onPatternSettingClick:function(){a?jQuery("#func_pattern_record_wrap").show():jQuery("#func_pattern_record_wrap").hide(),a=!a},_onPatternRecordStartClick:function(){var a=jQuery("#func_pattern_number").val()-0,c="pattern1";b.startPatternRecord(a,c).done(function(){d.recordStatus="start",d._startRecordStatus()}).fail(function(){remarkDisplay("func_pattern_remark",tl("Operateingfailure"),3e3,1)})},_onPatternRecordStopClick:function(){var a=jQuery("#func_pattern_number").val()-0;b.stopPatternRecord(a).done(function(){d.recordStatus="stop",d._stopRecordStatus(),c.getConfig("AutoPattern").done(function(a){g=a[0],d._showPatternList()}).fail(function(){remarkDisplay("func_pattern_remark",tl("Operateingfailure"),3e3,1)})}).fail(function(){remarkDisplay("func_pattern_remark",tl("Operateingfailure"),3e3,1)})},_onPatternNumberChange:function(){var a=jQuery("#func_pattern_number").val();v=a-1,g[v].Enable?(jQuery("#func_pattern_start").off().on("click",d._onPatternStartClick),jQuery("#func_pattern_stop").off().on("click",d._onPatternStopClick),jQuery("#func_pattern_start").removeClass("ui-button-special-disabled"),jQuery("#func_pattern_stop").removeClass("ui-button-special-disabled")):(jQuery("#func_pattern_start").off(),jQuery("#func_pattern_stop").off(),jQuery("#func_pattern_start").addClass("ui-button-special-disabled"),jQuery("#func_pattern_stop").addClass("ui-button-special-disabled"))},_showPatternList:function(){jQuery("#func_pattern_number").empty();for(var a=g.length>r?r:g.length,b=0;a>b;b++){var c=jQuery("<option vlue="+(b+1)+">"+(b+1)+"</option>");c.css("color",g[b].Enable?"black":"gray"),jQuery("#func_pattern_number").append(c)}jQuery("#func_pattern_number").get(0).selectedIndex=v,g[jQuery("#func_pattern_number").val()-1].Enable?(jQuery("#func_pattern_start").off().on("click",d._onPatternStartClick),jQuery("#func_pattern_stop").off().on("click",d._onPatternStopClick),jQuery("#func_pattern_start").removeClass("ui-button-special-disabled"),jQuery("#func_pattern_stop").removeClass("ui-button-special-disabled")):(jQuery("#func_pattern_start").off(),jQuery("#func_pattern_stop").off(),jQuery("#func_pattern_start").addClass("ui-button-special-disabled"),jQuery("#func_pattern_stop").addClass("ui-button-special-disabled"))}}}(),function(){var a=!0,d=Page.functioncfg.ScanConfig={init:function(){d.translate(),d.bind()},translate:function(){jQuery("#func_scan_number_title").text(tl("scanNumber")),jQuery("#func_scan_speed_title").text(tl("speed")),jQuery("#func_scan_start_label").text(tl("Start")),jQuery("#func_scan_stop_label").text(tl("Stop")),jQuery("#func_scan_setting_label").text(tl("w_SetInPtz")),jQuery("#func_scan_limit_left").text(tl("Left Limit")),jQuery("#func_scan_limit_right").text(tl("Right Limit"))},render:function(){jQuery("#func_scan_stop").show();var a=arguments[0];c.getConfig("PtzMovement").done(function(b){z=-1==b[0].Function.indexOf("Scan"),z||(t=b[0].Index),z||a?d._scanNormalStatus():d._onScanEstopAll()}),c.getConfig("AutoScan").done(function(a){h=a[0],d._showScanList()}).fail(function(){remarkDisplay("func_scan_remark",tl("Operateingfailure"),3e3,1)})},bind:function(){jQuery("#func_scan_start").on("click",d._onScanStartClick),jQuery("#func_scan_stop").on("click",d._onScanStopClick),jQuery("#func_scan_setting").on("click",d._onScanSettingClick),jQuery("#func_scan_limit_left").on("click",d._onScanLimitLeftClick),jQuery("#func_scan_limit_right").on("click",d._onScanLimitRightClick),jQuery("#func_scan_number").on("change",d._onScanNumberChange)},_onScanStartClick:function(){Page.functioncfg._stopPtz(),Page.functioncfg._changePtzBtn(),jQuery("#func_scan_stop").show(),z=!1,d._sendScanStart.delay(100)},_sendScanStart:function(){var a=jQuery("#func_scan_number").val()-0,c=jQuery("#func_scan_slider_first").attr("title")-0;b.startScan(a,c).done(function(){d._onScanEstopAll()}).fail(function(){remarkDisplay("func_scan_remark",tl("Operateingfailure"),3e3,1)})},_onScanEstopAll:function(){jQuery("#func_estopAll_three").css({left:780,top:108,width:163,height:26,display:"block"}),jQuery("#func_estopAll_one").css({left:780,top:139,width:158,height:28,display:"block"}),jQuery("#func_scan_setting").addClass("ui-button-special-disabled").off(),jQuery("#func_scan_limit_left").addClass("ui-button-disabled").off(),jQuery("#func_scan_limit_right").addClass("ui-button-disabled").off(),remarkDisplay("func_scan_remark",tl("isScaning"),3e3,3)},_onScanStopClick:function(){z=!0;var a=jQuery("#func_scan_number").val()-0;b.stopScan(a).done(function(){d._scanNormalStatus()}).fail(function(){remarkDisplay("func_scan_remark",tl("Operateingfailure"),3e3,1)})},_scanNormalStatus:function(){jQuery("#func_scan_setting").removeClass("ui-button-special-disabled").off().on("click",d._onScanSettingClick),jQuery("#func_scan_limit_left").removeClass("ui-button-disabled").off().on("click",d._onScanLimitLeftClick),jQuery("#func_scan_limit_right").removeClass("ui-button-disabled").off().on("click",d._onScanLimitRightClick),jQuery("#func_estopAll_three").hide(),jQuery("#func_estopAll_one").hide()},_onScanSettingClick:function(){a?jQuery("#func_scan_limit_wrap").show():jQuery("#func_scan_limit_wrap").hide(),a=!a},_onScanLimitLeftClick:function(){var a=jQuery("#func_scan_number").val()-0;b.setScanLimit(a,"Left").done(function(){h[a-1].LeftEnable=!0,t=a-1,d.render(),remarkDisplay("func_scan_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_scan_remark",tl("autoScanTip1"),3e3,1)})},_onScanLimitRightClick:function(){var a=jQuery("#func_scan_number").val()-0;b.setScanLimit(a,"Right").done(function(){h[a-1].RightEnable=!0,t=a-1,d.render(),remarkDisplay("func_scan_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_scan_remark",tl("autoScanTip1"),3e3,1)})},_showScanList:function(){jQuery("#func_scan_number").empty();for(var a=h.length>s?s:h.length,b=0;a>b;b++){var c=new Option(b+1,b+1);c.style.color=h[b].LeftEnable&&h[b].RightEnable?"black":"gray",jQuery("#func_scan_number")[0].options.add(c)}jQuery("#func_scan_number").get(0).selectedIndex=t,h[jQuery("#func_scan_number").val()-1].LeftEnable&&h[jQuery("#func_scan_number").val()-1].RightEnable?(jQuery("#func_scan_start").off().on("click",d._onScanStartClick),jQuery("#func_scan_stop").off().on("click",d._onScanStopClick),jQuery("#func_scan_start").removeClass("ui-button-special-disabled"),jQuery("#func_scan_stop").removeClass("ui-button-special-disabled")):(jQuery("#func_scan_start").off(),jQuery("#func_scan_stop").off(),jQuery("#func_scan_start").addClass("ui-button-special-disabled"),jQuery("#func_scan_stop").addClass("ui-button-special-disabled")),n.set(h[t].ScanSpeed+1)},_onScanNumberChange:function(){var a=jQuery("#func_scan_number").val();t=a-1,h[t].LeftEnable&&h[t].RightEnable?(jQuery("#func_scan_start").off().on("click",d._onScanStartClick),jQuery("#func_scan_stop").off().on("click",d._onScanStopClick),jQuery("#func_scan_start").removeClass("ui-button-special-disabled"),jQuery("#func_scan_stop").removeClass("ui-button-special-disabled")):(jQuery("#func_scan_start").off(),jQuery("#func_scan_stop").off(),jQuery("#func_scan_start").addClass("ui-button-special-disabled"),jQuery("#func_scan_stop").addClass("ui-button-special-disabled")),n.set(h[t].ScanSpeed+1)},_setScanSpeed:function(){var a=jQuery("#func_scan_number").val();h[a-1].ScanSpeed=jQuery("#func_scan_slider_first").attr("title")-1,c.setConfig("AutoScan",[h]).fail(function(){remarkDisplay("func_scan_remark",tl("Saving failure"),3e3,1)})}}}(),function(){var a=Page.functioncfg.AutoPanConfig={init:function(){a.translate(),a.bind()},translate:function(){jQuery("#func_autopan_speed_title").text(tl("panSpeed")),jQuery("#func_autopan_start_label").text(tl("Start")),jQuery("#func_autopan_stop_label").text(tl("Stop"))},render:function(){y?jQuery("#func_estopAll_one").hide():a._onAutoPanEstopAll(),c.getConfig("AutoPan").done(function(a){k=a,o.set(k[0].PanSpeed+1)}).fail(function(){remarkDisplay("func_autopan_remark",tl("Operateingfailure"),3e3,1)})},bind:function(){jQuery("#func_autopan_start").on("click",a._onAutoPanStartClick),jQuery("#func_autopan_stop").on("click",a._onAutoPanStopClick)},_onAutoPanStartClick:function(){Page.functioncfg._stopPtz(),Page.functioncfg._changePtzBtn(),y=!1,function(){a._onAutoPanEstopAll();var b=-(jQuery("#func_autopan_slider_first").attr("title")-0)/8;webApp.IsNewProtocol&&-1!==webApp.DeviceType.indexOf("SD")?rpc.PTZ.moveAutoPan([b,0,0],0).fail(function(){remarkDisplay("func_autopan_remark",tl("Operateingfailure"),3e3,1)}):rpc.PTZ.start("AutoPanOn",0,0,0,0)}.delay(100)},_onAutoPanEstopAll:function(){jQuery("#func_estopAll_one").css({left:780,top:55,width:168,height:28,display:"block"}),remarkDisplay("func_autopan_remark",tl("isAutopaning"),3e3,3)},_onAutoPanStopClick:function(){y=!0,jQuery("#func_estopAll_one").hide(),webApp.IsNewProtocol&&-1!==webApp.DeviceType.indexOf("SD")?rpc.PTZ.stopMove():rpc.PTZ.start("AutoPanOff",0,0,0,0)},_setAutoPanSpeed:function(){k[0].PanSpeed=jQuery("#func_autopan_slider_first").attr("title")-1,c.setConfig("AutoPan",k).fail(function(){remarkDisplay("func_autopan_remark",tl("Saving failure"),3e3,1)})}}}(),function(){var a=[["0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"]],b=Page.functioncfg.PtzAutoMovement={taskNumber:8,timedialog:null,init:function(){l.Support&&(jQuery("#func_dsrw").removeClass("fn-hide"),b.translate(),b.initDom(),b.bind(),b.timedialog=new Dialog("tt_schedule_dialog",function(){},"tt_schedule_dialog_confirm","tt_schedule_dialog_cancel",tl("w_Setup")),b.timedialog.setPosition(680,100),b.timedialog.close())
},translate:function(){},initDom:function(){b.taskNumber=l.TaskNum,l.SupportSnapShot&&jQuery("#func_tt_capSnapShot").removeClass("fn-hide"),jQuery.each(l.Action,function(a,b){var c="div.capAction"+b;jQuery(c).removeClass("fn-hide")});for(var a=jQuery("#func_tt_number"),c=jQuery("#func_copytask_num"),d="",e=0;e<b.taskNumber;e++)d+='<option value="'+e+'">'+(e+1)+"</option>";a.empty().append(d),c.empty().append(d)},initSelect:function(){return Page.functioncfg._getptzconfig().done(function(){var a="";if(0==d.length)a+='<option value="-1">'+tl("addPresetFirst")+"</option>";else for(var c=0;c<d.length;c++)a+='<option value="'+d[c].Index+'">'+d[c].Index+" : "+d[c].Name+"</option>";jQuery("#func_tt_action_Preset").empty().append(a);var f=e.length>q?q:e.length;a="";for(var c=0;f>c;c++)e[c].Enable&&(a+='<option value="'+(c+1)+'">'+(c+1)+" : "+e[c].Name+"</option>");if(""==a&&(a+='<option value="-1">'+tl("addTourFirst")+"</option>"),jQuery("#func_tt_action_Tour").empty().append(a),null==g||null==h)return void setTimeout(b.initSelect,500);a="";for(var c=0;c<g.length;c++)g[c].Enable&&(a+='<option value="'+(c+1)+'">'+(c+1)+"</option>");""==a&&(a+='<option value="-1">'+tl("addPatternFirst")+"</option>"),jQuery("#func_tt_action_Pattern").empty().append(a),a="";for(var c=1;c<h.length+1;c++)h[c-1].LeftEnable&&h[c-1].RightEnable&&(a+='<option value="'+c+'">'+c+"</option>");""==a&&(a+='<option value="-1">'+tl("addScanFirst")+"</option>"),jQuery("#func_tt_action_Scan").empty().append(a)})},render:function(){b.initSelect().done(function(){c.getConfig("PtzAutoMovement").done(function(a){m=a[0],b._renderOneTask()})})},bind:function(){jQuery("#func_tt_del_all").on("click",b._clearAllConfig),jQuery("#func_tt_number").on("change",b._renderOneTask),jQuery("#func_tt_set_save").on("click",b._saveThisTask),jQuery("#func_tt_set_reset").on("click",b._resetThisTask),jQuery("#func_tt_set_refresh").on("click",b._refreshThisTask);for(var a=0;6>a;a++){var c="tt_schedule_from_",d="tt_schedule_to_";attachTimeEvent([c+"hour_"+a,c+"minite_"+a,c+"second_"+a,d+"hour_"+a,d+"minite_"+a,d+"second_"+a])}jQuery("#func_tt_autohome_time").on({blur:function(){limit(this,3600),limitMin(this,1)},keyup:function(){limit(this,3600)}}),jQuery('input[name="func_tt"]').on("click",function(){var a=jQuery(this).val();jQuery("#tt_action").val(a),"Preset"==a?(jQuery("#func_tt_snap").removeClass("fn-hide"),jQuery("#func_tt_snapDelay").removeClass("fn-hide")):(jQuery("#func_tt_snap").addClass("fn-hide"),jQuery("#func_tt_snapDelay").addClass("fn-hide")),jQuery(".func_action_num").addClass("fn-hide"),-1!=jQuery("#func_tt_action_"+a).children("option").val()&&jQuery("#func_tt_actionwrap_"+a).removeClass("fn-hide")}),jQuery("#func_tt_settime").on("click",function(){b.timedialog.show()}),jQuery("#tt_schedule_dialog_confirm").on("click",function(){b.timedialog.close()}),jQuery("#func_tt_copytask").on("click",b._copytask),jQuery("#func_timetask_date").on("change",function(){if(""==jQuery(this).val())return jQuery.each(jQuery('input[name="func_ttday"]'),function(a,b){b.prop("checked",!1)}),!0;var a=jQuery(this).val()-0,b=jQuery('input[name="func_ttday"][value="'+a+'"]:eq(0)');return b.prop("checked")||b.prop("checked",!0),!1}),jQuery('input[name="func_ttday"]').on("click",function(){jQuery("#func_timetask_date").val(jQuery(this).val()-0)}),attachLimit("func_tt_snapDelay_time",0,600)},_copytask:function(){var a=jQuery("#func_tt_number").val()-0,c=jQuery("#func_copytask_num").val()-0;c!==a&&(remarkDisplay("func_tt_remark",tl("w_Operateingsuccess"),3e3,0),m[c]=jQuery.extend(!0,{},m[a]),jQuery("#func_tt_number").val(c),b._renderOneTask())},_resetThisTask:function(){var d=jQuery("#func_tt_number").val();jQuery("#func_tt_enable").prop("checked",!1),m[d].Enable=!1,m[d].Function="None",m[d].PresetId=0,m[d].ScanId=0,m[d].PatternId=0,m[d].TourId=0,m[d].TimeSection=a,m[d].AutoHoming.Enable=!0,m[d].AutoHoming.Time=30,m[d].SnapshotEnable=!1,m[d].SnapshotDelayTime=30,c.setConfig("PtzAutoMovement",[m]).done(function(){remarkDisplay("func_tt_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("func_tt_remark",tl("Saving failure"),3e3,1)}),b._renderOneTask.delay(200)},_clearAllConfig:function(){for(var d=0;d<b.taskNumber;d++)m[d].Enable=!1,m[d].Function="None",m[d].PresetId=0,m[d].ScanId=0,m[d].PatternId=0,m[d].TourId=0,m[d].AutoHoming.Enable=!0,m[d].AutoHoming.Time=30,m[d].SnapshotEnable=!1,m[d].SnapshotDelayTime=30,m[d].TimeSection=jQuery.extend(!0,[],a);c.setConfig("PtzAutoMovement",[m]).done(function(){remarkDisplay("func_tt_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("func_tt_remark",tl("Saving failure"),3e3,1)}),b._renderOneTask()},_refreshThisTask:function(){b.render(),remarkDisplay("func_tt_remark",tl("Operateingsuccess"),3e3,0)},_saveThisTask:function(){var d=b._checkform();switch(d){case!1:return remarkDisplay("func_tt_remark",tl("taskError"),3e3,1),!1;case"preset":return remarkDisplay("func_tt_remark",tl("addPresetFirst"),3e3,1),!1;case"tour":return remarkDisplay("func_tt_remark",tl("addTourFirst"),3e3,1),!1;case"scan":return remarkDisplay("func_tt_remark",tl("addScanFirst"),3e3,1),!1;case"pattern":return remarkDisplay("func_tt_remark",tl("addPatternFirst"),3e3,1),!1}var e;switch(e=jQuery("#func_tt_number").val()-0,m[e].Enable=jQuery("#func_tt_enable").prop("checked")?!0:!1,m[e].AutoHoming.Time=parseInt(jQuery("#func_tt_autohome_time").val()),m[e].Function=jQuery("#tt_action").val(),m[e].PatternId=0,m[e].PresetId=0,m[e].ScanId=0,m[e].TourId=0,m[e].SnapshotEnable=!1,jQuery("#tt_action").val()){case"Preset":m[e].PresetId=jQuery("#func_tt_action_Preset").val()-0,m[e].SnapshotEnable=jQuery("#func_tt_SnapshotEnable").prop("checked"),m[e].SnapshotDelayTime=jQuery("#func_tt_snapDelay_time").val()-0;break;case"Scan":m[e].ScanId=jQuery("#func_tt_action_Scan").val()-0;break;case"Pattern":m[e].PatternId=jQuery("#func_tt_action_Pattern").val()-0;break;case"Tour":m[e].TourId=jQuery("#func_tt_action_Tour").val()-0}var f=jQuery("#func_timetask_date").val()||0,g=!1;if(m[e].TimeSection=jQuery.extend(!0,[],a),7==f)for(var h=0;7>h;h++)m[e].TimeSection[h]=b._saveTimesToVar(),g=b._TimeSection(m[e].TimeSection[h]);else m[e].TimeSection[f]=b._saveTimesToVar(),g=b._TimeSection(m[e].TimeSection[f]);g?c.setConfig("PtzAutoMovement",[m]).done(function(){remarkDisplay("func_tt_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("func_tt_remark",tl("Saving failure"),3e3,1)}):remarkDisplay("func_tt_remark",tl("taskError"),3e3,1)},_TimeSection:function(a){var b=!1;return jQuery.each(a,function(a,c){var d=c.split(" ")[0]-0;return 1==d?(b=!0,!1):void 0}),b},_getTime:function(){var a=jQuery("#timetask_from_hour").val()-0,c=jQuery("#timetask_from_minite").val()-0,d=jQuery("#timetask_from_second").val()-0,e=jQuery("#timetask_to_hour").val()-0,f=jQuery("#timetask_to_minite").val()-0,g=jQuery("#timetask_to_second").val()-0;a=b._numAdd0(a),c=b._numAdd0(c),d=b._numAdd0(d),e=b._numAdd0(e),f=b._numAdd0(f),g=b._numAdd0(g);var h="1 "+a+":"+c+":"+d+"-"+e+":"+f+":"+g;return h},_numAdd0:function(a){return a-=0,a=a>9?a:"0"+a},_renderOneTask:function(){var a=jQuery("#func_tt_number").val();switch(jQuery("#func_tt_enable").prop("checked",m[a].Enable),jQuery("#func_tt_autohome_time").val(m[a].AutoHoming.Time),jQuery("#tt_action").val(m[a].Function),jQuery("#func_tt_snap").addClass("fn-hide"),jQuery("#func_tt_snapDelay").addClass("fn-hide"),jQuery(".func_action_num").addClass("fn-hide"),jQuery("#tt_action").val()){case"Preset":jQuery("#func_tt_preset").prop("checked",!0),jQuery("#func_tt_action_Preset").val(m[a].PresetId),jQuery("#func_tt_SnapshotEnable").prop("checked",m[a].SnapshotEnable),jQuery("#func_tt_snapDelay_time").val(m[a].SnapshotDelayTime||30),jQuery("#func_tt_snap").removeClass("fn-hide"),jQuery("#func_tt_snapDelay").removeClass("fn-hide"),jQuery("#func_tt_action_Preset").val()==m[a].PresetId&&jQuery("#func_tt_actionwrap_Preset").removeClass("fn-hide");break;case"Scan":jQuery("#func_tt_scan").prop("checked",!0),jQuery("#func_tt_action_Scan").val(m[a].ScanId),jQuery("#func_tt_action_Scan").val()==m[a].ScanId&&jQuery("#func_tt_actionwrap_Scan").removeClass("fn-hide");break;case"Tour":jQuery("#func_tt_tour").prop("checked",!0),jQuery("#func_tt_action_Tour").val(m[a].TourId),jQuery("#func_tt_action_Tour").val()==m[a].TourId&&jQuery("#func_tt_actionwrap_Tour").removeClass("fn-hide");break;case"Pattern":jQuery("#func_tt_pattern").prop("checked",!0),jQuery("#func_tt_action_Pattern").val(m[a].PatternId),jQuery("#func_tt_action_Pattern").val()==m[a].PatternId&&jQuery("#func_tt_actionwrap_Pattern").removeClass("fn-hide");break;default:jQuery("#func_tt_preset").prop("checked",!1),jQuery("#func_tt_scan").prop("checked",!1),jQuery("#func_tt_tour").prop("checked",!1),jQuery("#func_tt_pattern").prop("checked",!1)}var c=b._getDay(a,"render");if(jQuery("#func_timetask_date").val(c),jQuery("#func_timetask_date").trigger("change"),c>=0){c=7==c?0:c;var d=m[a].TimeSection[c][0];d=parsrTimeEx(d),b._setDay(d),b._setTimesFromVar(m[a].TimeSection[c])}else b._setDay_reset()},_getDay:function(a,b){var c=-1;if(0==m[a].Enable&&"check"==b)return c;var d,e=0;return jQuery.each(m[a].TimeSection,function(a,b){for(var f=0;6>f;f++)d=parsrTimeEx(b[f]),1==d[0]&&(c=a,e++)}),e>6&&(c=7),c},_getTimeFromJson:function(a){var b=[],c=[];return jQuery.each(m[a].TimeSection,function(a,d){for(var e=0;6>e;e++)b=parsrTimeEx(d[e]),1==b[0]&&c.push(b)}),c},_setDay:function(a){jQuery("#timetask_from_hour").val(a[1]),jQuery("#timetask_from_minite").val(a[2]),jQuery("#timetask_from_second").val(a[3]),jQuery("#timetask_to_hour").val(a[4]),jQuery("#timetask_to_minite").val(a[5]),jQuery("#timetask_to_second").val(a[6])},_setDay_reset:function(){for(jQuery("#func_timetask_date").val(-1),jQuery("#func_timetask_date").trigger("click"),jQuery("#timetask_from_hour").val(0),jQuery("#timetask_from_minite").val(0),jQuery("#timetask_from_second").val(0),jQuery("#timetask_to_hour").val(23),jQuery("#timetask_to_minite").val(59),jQuery("#timetask_to_second").val(59),i=0;i<6;i++)jQuery("#tt_schedule_enable_"+i).prop("checked",!1),jQuery("#tt_schedule_from_hour_"+i).val("00"),jQuery("#tt_schedule_from_minite_"+i).val("00"),jQuery("#tt_schedule_from_second_"+i).val("00"),jQuery("#tt_schedule_to_hour_"+i).val("23"),jQuery("#tt_schedule_to_minite_"+i).val("59"),jQuery("#tt_schedule_to_second_"+i).val("59")},_checkform:function(){var a=!0;return"None"==jQuery("#tt_action").val()?a=!1:1==jQuery("#func_tt_autohome_time").prop("checked")&&""==jQuery("#func_tt_autohome_time").val()?a=!1:jQuery("#func_tt_preset").prop("checked")&&-1==jQuery("#func_tt_action_Preset").val()?a="preset":jQuery("#func_tt_tour").prop("checked")&&-1==jQuery("#func_tt_action_Tour").val()?a="tour":jQuery("#func_tt_scan").prop("checked")&&-1==jQuery("#func_tt_action_Scan").val()?a="scan":jQuery("#func_tt_pattern").prop("checked")&&-1==jQuery("#func_tt_action_Pattern").val()?a="pattern":""==jQuery("#func_timetask_date").val()?a=!1:0==b._check_user_time()?a=!1:(1==jQuery("#func_tt_enable").prop("checked")&&b._checkTaskTimeSame()&&(a=!1),a)},_checkTaskTimeSame:function(){var a=!1,c=parseInt(jQuery("#func_tt_number").val()-0),d=parseInt(jQuery("#func_timetask_date").val()-0),e=[];e[0]=1,e[1]=parseInt(jQuery("#timetask_from_hour").val()-0),e[2]=parseInt(jQuery("#timetask_from_minite").val()-0),e[3]=parseInt(jQuery("#timetask_from_second").val()-0),e[4]=parseInt(jQuery("#timetask_to_hour").val()-0),e[5]=parseInt(jQuery("#timetask_to_minite").val()-0),e[6]=parseInt(jQuery("#timetask_to_second").val()-0);for(var f=[],g=0;6>g;g++)if(jQuery("#tt_schedule_enable_"+g).prop("checked")){var h=[];h[0]=g,h[1]=jQuery("#tt_schedule_from_hour_"+g).val()-0,h[2]=jQuery("#tt_schedule_from_minite_"+g).val()-0,h[3]=jQuery("#tt_schedule_from_second_"+g).val()-0,h[4]=jQuery("#tt_schedule_to_hour_"+g).val()-0,h[5]=jQuery("#tt_schedule_to_minite_"+g).val()-0,h[6]=jQuery("#tt_schedule_to_second_"+g).val()-0,f.push(h)}for(var i,j,k,l,m=0;m<b.taskNumber;m++)if(m!=c){if(i=b._getDay(m,"check"),-1==i)continue;if(l=7==i||7==d||d==i?!0:!1){if(k=jQuery.extend(!0,[],b._getTimeFromJson(m)),k==[]);else for(var n=0;n<f.length;n++)for(var o=0;o<k.length;o++)if(j=b._check_two_arr(k[o],f[n]))return a=!0}else switch(i){case-1:}}return a},_check_two_arr:function(a,b){var c=!0,d=3600*a[1]+60*a[2]+a[3],e=3600*a[4]+60*a[5]+a[6],f=3600*b[1]+60*b[2]+b[3],g=3600*b[4]+60*b[5]+b[6];return(d>g||f>e)&&(c=!1),c},_check_user_time:function(){var a=[];a[0]=1,a[1]=jQuery("#timetask_from_hour").val()-0,a[2]=jQuery("#timetask_from_minite").val()-0,a[3]=jQuery("#timetask_from_second").val()-0,a[4]=jQuery("#timetask_to_hour").val()-0,a[5]=jQuery("#timetask_to_minite").val()-0,a[6]=jQuery("#timetask_to_second").val()-0;var b=3600*a[1]+60*a[2]+a[3],c=3600*a[4]+60*a[5]+a[6];if(b>c)return!1;for(var d=[],e=0;6>e;e++)if(jQuery("#tt_schedule_enable_"+e).prop("checked")){d[0]=e,d[1]=jQuery("#tt_schedule_from_hour_"+e).val()-0,d[2]=jQuery("#tt_schedule_from_minite_"+e).val()-0,d[3]=jQuery("#tt_schedule_from_second_"+e).val()-0,d[4]=jQuery("#tt_schedule_to_hour_"+e).val()-0,d[5]=jQuery("#tt_schedule_to_minite_"+e).val()-0,d[6]=jQuery("#tt_schedule_to_second_"+e).val()-0;var b=3600*d[1]+60*d[2]+d[3],c=3600*d[4]+60*d[5]+d[6];if(b>c)return!1}return!0},_setTimesFromVar:function(a){var c=a,d=0,e=[];for(d=0;6>d;d++)e=parsrTimeEx(c[d]),jQuery("#tt_schedule_enable_"+d).prop("checked",1==e[0]),jQuery("#tt_schedule_from_hour_"+d).val(b._numAdd0(e[1])),jQuery("#tt_schedule_from_minite_"+d).val(b._numAdd0(e[2])),jQuery("#tt_schedule_from_second_"+d).val(b._numAdd0(e[3])),jQuery("#tt_schedule_to_hour_"+d).val(b._numAdd0(e[4])),jQuery("#tt_schedule_to_minite_"+d).val(b._numAdd0(e[5])),jQuery("#tt_schedule_to_second_"+d).val(b._numAdd0(e[6]))},_saveTimesToVar:function(){var a=(jQuery("#func_tt_number").val(),[]),b=0,c=[];for(b=0;6>b;b++)c[0]=1==jQuery("#tt_schedule_enable_"+b).prop("checked")?1:0,c[1]=jQuery("#tt_schedule_from_hour_"+b).val(),c[2]=jQuery("#tt_schedule_from_minite_"+b).val(),c[3]=jQuery("#tt_schedule_from_second_"+b).val(),c[4]=jQuery("#tt_schedule_to_hour_"+b).val(),c[5]=jQuery("#tt_schedule_to_minite_"+b).val(),c[6]=jQuery("#tt_schedule_to_second_"+b).val(),a[b]=c[0]+" "+c[1]+":"+c[2]+":"+c[3]+"-"+c[4]+":"+c[5]+":"+c[6];return a}}}(),function(){var a=0,b={},d=Page.functioncfg.PowerLevel={init:function(){d.bind()},translate:function(){jQuery("#PtzPowerLevel").text(tl("PtzPowerLevel")),jQuery("#PtzPowerNormal").text(tl("PtzPowerNormal")),jQuery("#PtzPowerSaving").text(tl("PtzPowerSaving"))},bind:function(){jQuery("#func_PowerLevel_confirm").on("click",d._setConfig),jQuery("#func_PowerLevel_refresh").on("click",d._getConfig)},render:function(){d._getConfig(!1)},_renderDom:function(){jQuery("#func_PowerLevel_Level").val(b[a].Level)},_saveDom:function(){b[a].Level=jQuery("#func_PowerLevel_Level").val()},_getConfig:function(a){c.getConfig("PtzPowerLevel").done(function(c){b=c,d._renderDom(),0!=a&&remarkDisplay("func_PowerLevel_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_PowerLevel_remark",tl("Operateingfailure"),3e3,1)})},_setConfig:function(){d._saveDom(),c.setConfig("PtzPowerLevel",b).done(function(){remarkDisplay("func_PowerLevel_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("func_PowerLevel_remark",tl("Operateingfailure"),3e3,1)})}}}()});
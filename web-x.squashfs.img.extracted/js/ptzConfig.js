!function(a){define(function(require,b,c){var d,e=require("jsCore/ability");c.exports=require("jsCore/pageTab"),c.exports.prototype.getCondition=function(){a.when(e.get("HasPtz"),e.get("PtzFunctionMenu")).then(function(a,b){d=-1===webApp.DeviceType.indexOf("TPC")&&a&&!(b&&b.Support)&&!isEnable("is_8M_Flash")&&-1===webApp.DeviceType.indexOf("SD_CA_ICT")&&-1===webApp.DeviceType.indexOf("IPC-HDB3200C"),c.exports.prototype.ptz_net=function(){return d?!0:-1===webApp.DeviceType.indexOf("SD")}(),c.exports.prototype.ptz_sd=function(){return d?!1:-1!==webApp.DeviceType.indexOf("SD")}(),c.exports.prototype.ptz_analog=e.get("PTZCaps").then(function(a){return d?!1:a&&a.PtzDevice})})}}),define("ptz_net",function(require,b,c){var d,e,f,g,h,i,j=require("jsCore/pageBase"),k=require("jsCore/rpc"),l=(require("common/common"),null),m=null,n=null;c.exports=j.extend({init:function(){l=this,d=l.$("#ptz_protocol"),f=l.$("#ptz_baudrate"),g=l.$("#ptz_databit"),h=l.$("#ptz_stopbit"),i=l.$("#ptz_parity"),e=l.$("#ptz_addr").numberfield({min:0,max:255,allowDecimal:!1,allowNegative:!1}),n=-1!==webApp.DeviceType.indexOf("TPC")?k.PTZ.getProtocol().done(function(b){var c=b.RS;a.isArray(c)&&(d.empty(),a.each(c,function(a,b){d.append("<option value="+b+">"+tl(b)+"</option>")}))}):k.PTZ.getProtocolList().done(function(b){a.isArray(b)&&(d.empty(),a.each(b,function(a,b){d.append("<option value="+b+">"+tl(b)+"</option>")}))}),l.render()},render:function(){this._getConfig()},_render:function(){var b=m[0];n.done(function(c){-1!==webApp.DeviceType.indexOf("TPC")&&(c=c.RS),a.isArray(c)?-1!==a.inArray(b.ProtocolName,c)&&d.val(b.ProtocolName):d.html("<option value="+b.ProtocolName+">"+tl(b.ProtocolName)+"</option>").prop("disabled",!0)}),e.numberfield("value",b.Address),f.val(b.Attribute[0]),g.val(b.Attribute[1]),i.val(b.Attribute[2]),h.val(b.Attribute[3])},_getConfig:function(a){k.ConfigManager.getConfig("Ptz").done(function(b){m=b,l._render(),a&&l.tip("success","Operateingsuccess"),l.disabled("[btn-for=onSave]",!1)}).fail(function(){l.tip("error","Operateingfailure"),l.disabled("[btn-for=onSave]",!0)})},onSave:function(){var a=m[0];return a.ProtocolName=d.val(),a.Attribute[0]=f.val()-0,a.Attribute[1]=g.val()-0,a.Attribute[2]=i.val(),a.Attribute[3]=h.val(),a.Address=e.numberfield("value"),k.ConfigManager.setConfig("Ptz",m).done(function(){l.tip("success","Succeed in saving configure")}).fail(function(){l.tip("error","Saving failure")}),!1},onRefresh:function(){return this._getConfig(!0),!1},onDefault:function(){return k.ConfigManager.getDefault("Ptz").done(function(a){m=a,l._render(),l.tip("success","Defaultsuccess"),l.disabled("[btn-for=onSave]",!1)}).fail(function(){l.tip("error","Defaultfailure"),l.disabled("[btn-for=onSave]",!0)}),!1}})}),define("ptz_sd",function(require,b,c){var d,e=require("jsCore/pageBase"),f=require("jsCore/rpc"),g=null,h=null,i=null;c.exports=e.extend({init:function(){g=this,d=g.$("#sd_protocol"),i=-1!==webApp.DeviceType.indexOf("TPC")?f.PTZ.getProtocol().done(function(b){var c=b.RS;a.isArray(c)&&(d.empty(),a.each(c,function(a,b){d.append("<option value="+b+">"+tl(b)+"</option>")}))}):f.PTZ.getProtocolList().done(function(b){a.isArray(b)&&(d.empty(),a.each(b,function(a,b){d.append("<option value="+b+">"+tl(b)+"</option>")}))}),g.render()},render:function(){this._getConfig()},_render:function(){var b=h[0];i.done(function(c){-1!==webApp.DeviceType.indexOf("TPC")&&(c=c.RS),a.isArray(c)?-1!==a.inArray(b.ProtocolName,c)&&d.val(b.ProtocolName):d.html("<option value="+b.ProtocolName+">"+tl(b.ProtocolName)+"</option>").prop("disabled",!0)})},_getConfig:function(a){f.ConfigManager.getConfig("Ptz").done(function(b){h=b,g._render(),a&&g.tip("success","Operateingsuccess"),g.disabled("[btn-for=onSave]",!1)}).fail(function(){g.tip("error","Operateingfailure"),g.disabled("[btn-for=onSave]",!0)})},onSave:function(){h[0].ProtocolName=d.val();var a=webApp.CHANNEL_NUMBER>1?1:0;return a&&(h[1].ProtocolName=d.val()),f.ConfigManager.setConfig("Ptz",h).done(function(){g.tip("success","Succeed in saving configure")}).fail(function(){g.tip("error","Saving failure")}),!1},onRefresh:function(){return this._getConfig(!0),!1},onDefault:function(){return f.ConfigManager.getDefault("Ptz").done(function(a){h=a,g._render(),g.tip("success","Defaultsuccess"),g.disabled("[btn-for=onSave]",!1)}).fail(function(){g.tip("error","Defaultfailure"),g.disabled("[btn-for=onSave]",!0)}),!1}})}),define("ptz_analog",function(require,a,b){var c,d,e,f,g,h=require("jsCore/pageBase"),i=require("jsCore/rpc"),j=null,k=null;b.exports=h.extend({init:function(){k=this,d=k.$("#ana_baudrate"),e=k.$("#ana_databit"),f=k.$("#ana_stopbit"),g=k.$("#ana_parity"),c=k.$("#ana_addr").numberfield({min:0,max:255,allowDecimal:!1,allowNegative:!1}),k.render()},render:function(){k._getConfig()},_render:function(){c.numberfield("value",j.Address),d.val(j.Attribute[0]),e.val(j.Attribute[1]),g.val(j.Attribute[2]),f.val(j.Attribute[3])},_getConfig:function(a){i.ConfigManager.getConfig("PtzDevice").done(function(b){j=b,k._render(),a&&k.tip("success","Operateingsuccess"),k.disabled("[btn-for=onSave]",!1)}).fail(function(){k.tip("error","Operateingfailure"),k.disabled("[btn-for=onSave]",!0)})},onSave:function(){return j.Attribute[0]=d.val()-0,j.Attribute[1]=e.val()-0,j.Attribute[2]=g.val(),j.Attribute[3]=f.val(),j.Address=c.numberfield("value"),i.ConfigManager.setConfig("PtzDevice",j).done(function(){k.tip("success","Succeed in saving configure")}).fail(function(){k.tip("error","Saving failure")}),!1},onRefresh:function(){return k._getConfig(!0),!1},onDefault:function(){return i.ConfigManager.getDefault("PtzDevice").done(function(a){j=a,k._render(),k.tip("success","Defaultsuccess"),k.disabled("[btn-for=onSave]",!1)}).fail(function(){k.tip("error","Operateingfailure"),k.disabled("[btn-for=onSave]",!0)}),!1}})})}(jQuery);
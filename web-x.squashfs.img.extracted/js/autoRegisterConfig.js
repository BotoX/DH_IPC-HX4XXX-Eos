!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("auto",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=null,g=null,h=null,i=null,j=0,k=null,l=require("common/common"),m=l.Check;c.exports=e.extend({init:function(){f=this,g=f.$("[sel-for=autoNum]"),validator=a.validator([{element:f.$("#autoReg_deviceid"),check:[m.noQuotation,m.noQuotation],errorMsg:["w_wrongDeviceID","w_wrongDeviceID"],events:["keyup","blur"]}],function(a){a.parent().translation()}),i=f.$("#autoReg_port").numberfield({min:0,max:65535,allowDecimal:!1,allowNegative:!1}),f.$("#autoReg_deviceid").keyup(function(){StringUtil.byteLength(this.value,"xxx")>63&&(this.value=StringUtil.substring(this.value,63))}).blur(function(){StringUtil.byteLength(this.value,"xxx")>63&&(this.value=StringUtil.substring(this.value,63))}),h=f.$("#autoReg_serverip"),f.render()},render:function(){d.ConfigManager.getConfig("DVRIP").done(function(a){k=a,f._renderElements()})},autoNum:function(){return h.val()?m.ip(h.val())||m.ipv6(h.val())?(k.RegisterServer.Servers[j].Address=h.val(),k.RegisterServer.Servers[j].Port=i.numberfield("value"),j=g.val(),h.val(k.RegisterServer.Servers[j].Address),void i.numberfield("value",k.RegisterServer.Servers[j].Port)):(f.$("[sel-for=autoNum]").eq(j).attr("selected",!0),f.tip("warning","w_server_ip_error")):(f.$("[sel-for=autoNum]").eq(j).attr("selected",!0),f.tip("warning","IP Can not be null"))},_renderElements:function(){g.empty(),a.each(k.RegisterServer.Servers,function(a){g.append('<option value="'+a+'">'+a+"</option>")}),g.val(j),f.$("#autoReg_eable").prop("checked",k.RegisterServer.Enable||!1),f.$("#autoReg_deviceid").val(k.RegisterServer.DeviceID),h.val(k.RegisterServer.Servers[j].Address),i.numberfield("value",k.RegisterServer.Servers[j].Port),validator.validate()},onDefault:function(){d.ConfigManager.getDefault("DVRIP").done(function(a){k=a,f._renderElements(),f.tip("success","Defaultsuccess")}).fail(function(){f.tip("error","Defaultfailure")})},onRefresh:function(){d.ConfigManager.getConfig("DVRIP").done(function(a){k=a,f._renderElements(),f.tip("success","Operateingsuccess")}).fail(function(){f.tip("error","Operateingfailure")})},onConfirm:function(){return h.val()?m.ip(h.val())||m.ipv6(h.val())?validator.isInvalid()?f.tip("warning",validator.errors()[0].errorMsg):void d.ConfigManager.getConfig("DVRIP").done(function(a){k=a,k.RegisterServer.Enable=f.$("#autoReg_eable").is(":checked"),k.RegisterServer.DeviceID=f.$("#autoReg_deviceid").val(),f.autoNum(),l.chkPort(i.numberfield("value"))?d.ConfigManager.setConfig("DVRIP",k).done(function(a){l.chkMutilCallRet(a)?f.tip("success","Succeed in saving configure"):f.tip("error","Saving failure")}):f.tip("warning","Port in use Saving failure")}):f.tip("warning","w_server_ip_error"):f.tip("warning","IP Can not be null")}})})}(jQuery);
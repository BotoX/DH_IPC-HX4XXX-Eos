!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("comm_cfg",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=null,g=null,h=[];c.exports=e.extend({init:function(){f=this,f.render()},render:function(){!isEnable("is_show_help")&&a("[help-file=commConfig.htm").hide(),h=[],d.CommPort.getProtocolList().done(function(a){for(var b=0;b<a.length;b++)"Console"===a[b]&&h.push("Console"),"COM_EXALARM"===a[b]&&h.push("COM_EXALARM");d.ConfigManager.getConfig("Comm").done(function(a){g=a,f._renderElements(g)})})},_renderElements:function(a){var b=a[0],c=f.$("#comm_protocol"),d="";h.each(function(a){d+='<option value="'+a+'" tl="'+a+'"></option>'}),c.empty().append(d),c.selectedIndex=h.indexOf(b.ProtocolName)<0?0:tp,f.$("#comm_baudrate").val(b.Attribute[0]),f.$("#comm_databit").val(b.Attribute[1]),f.$("#comm_parity").val(b.Attribute[2]),f.$("#comm_stopbit").val(b.Attribute[3])},onDefault:function(){d.ConfigManager.getDefault("Comm").done(function(a){f._renderElements(a),f.tip("success","Defaultsuccess")}).fail(function(){f.tip("error","Defaultfailure")})},onRefresh:function(){d.ConfigManager.getConfig("Comm").done(function(a){g=a,f._renderElements(g)}).fail(function(){f.tip("error","Operateingfailure")})},onSave:function(){var a=g[0];a.ProtocolName=f.$("#comm_protocol").val(),a.Attribute[0]=f.$("#comm_baudrate").val()-0,a.Attribute[1]=f.$("#comm_databit").val()-0,a.Attribute[2]=f.$("#comm_parity").val(),a.Attribute[3]=f.$("#comm_stopbit").val(),d.ConfigManager.setConfig("Comm",g).done(function(){f.tip("success","Succeed in saving configure")}).fail(function(){f.tip("error","Saving failure")})}})})}(jQuery);
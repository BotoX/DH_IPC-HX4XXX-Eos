function isDDNS(){var a=window.location.href.split("?"),b=null;if(a[1]&&a[1].trim()){var c=a[1];c.test(/username/g)&&c.test(/ccid/g)&&c.test(/p2pport/g)&&(b=c.split("&"))}return b}function getDDNSMessage(){var a=isDDNS(),b={};a[1]=Base64.decode(a[1]);for(var c=0;c<a.length;c++){var d=a[c].split("=");b[d[0]]=d[1]}return b}function getScreenOrder(a,b,c,d){var e=new Array(4);if(Browser.Platform.win){if(a==c)return null;if(a>c?(e[0]=c,e[2]=a):(e[0]=a,e[2]=c),b==d)return null;b>d?(e[1]=d,e[3]=b):(e[1]=b,e[3]=d)}if(Browser.Platform.mac){if(a==c)return null;if(a>c?(e[0]=c,e[2]=a):(e[0]=a,e[2]=c),b==d)return null;b>d?(e[1]=b,e[3]=d):(e[1]=d,e[3]=b)}return e}function getPreLanguage(){return new Request.JSON({async:!1,url:"/web_caps/preLanguage?version=2.400",onSuccess:function(a){Site.currentLanguage=a.PreLanguage}}).get(),Site.currentLanguage}function getlang(a,b){Site.currentLanguage=a||getPreLanguage(),Site.languages[Site.currentLanguage]?b&&b():new Request.JSON({url:"/custom_lang/"+Site.currentLanguage+".txt?version=2.400",aysnc:!1,onSuccess:function(a){Site.languages[Site.currentLanguage]=a,b&&b()},onFailure:function(){new Request.JSON({url:"/default_lang/"+Site.currentLanguage+".txt?version=2.400",async:!1,onSuccess:function(a){Site.languages[Site.currentLanguage]=a,b&&b()},onFailure:function(){new Request.JSON({url:"../debugEx/"+Site.currentLanguage+".txt?version=2.400",async:!1,onSuccess:function(a){Site.languages[Site.currentLanguage]=a,b&&b()}}).get()}}).get()}}).get(),Cookie.write("DHLangCookie30",Site.currentLanguage,{duration:30,path:"/"})}function retranslate(){jQuery(document.body).trans_wgt(Site.currentLanguage),jQuery(document.body).translation()}function tl(a){var b=Site.languages[Site.currentLanguage];return b&&(b[a]||b[a+" "]||"").trim()||a}function getLocalPngHash(){new Request({url:"/Custom/local.png?version=2.400",async:!1,onSuccess:function(a){var b=a.split("\n");b.filter(function(a){if(""!=a.trim()&&a.test("=","i")){var b=a.split("=");localPngHash.include(b[0].trim(),b[1].trim())}})}}).get()}function isEnable(a){var b=localPngHash.get(a);if(null===b)return b;var c=b-0;return c?c:!1}function getWebCapsConfig(){new Request.JSON({async:!1,url:"/web_caps/webCapsConfig?version=2.400&"+Date.now(),onSuccess:function(a){jsonWebCaps=a},onFailure:function(){jsonWebCaps={Anonymous:!1,deviceType:"IPC",mode:"IPC",vendor:" "}},onException:function(){}}).get();return jsonWebCaps}function attachLimit(a,b,c){var d="element"==typeOf(a)?a:$(a);d.removeEvents("keyup"),d.removeEvents("blur"),d.removeEvents("beforepaste"),d.addEvents({keyup:function(){limitEx(this,c)},blur:function(){limit(this,c),limitMin(this,b)},beforepaste:function(){clipboardData.setData("text",clipboardData.getData("text").replace(/[^\d]/g,""))}}),limit(d,c),limitMin(d,b)}function attachTimeEvent(a,b){void 0==b&&(b=!0);var c=new Array;c="array"!=$type(a)?[$(a+"0"),$(a+"1"),$(a+"2"),$(a+"3"),$(a+"4"),$(a+"5")]:[$(a[0]),$(a[1]),$(a[2]),$(a[3]),$(a[4]),$(a[5])];var d=function(a,d){c[a]&&(c[a].removeEvents("keyup"),c[a].removeEvents("blur"),c[a].addEvents({keyup:function(b){if(/[^\d]/g.test(this.value)&&(this.value=this.value.replace(/[^\d]/g,"")),"right"==b.key)return void(5>a&&c[a+1].select());if(37==b.code)return void(a>0&&6>a&&c[a-1].select());if("tab"!=b.key){this.value-0>d&&(this.value=d);var e=a>2?3:0;"24"==c[e].value&&(c[e+1].value="00",c[e+2].value="00"),this.value.length>=2&&5>a&&c[a+1].select()}},blur:function(){/[^\d]/g.test(this.value)&&(this.value=this.value.replace(/[^\d]/g,"")),this.value-0>d&&(this.value=d),this.value=this.value-0>=10?this.value-0:"0"+(this.value-0);var a=60*(60*(c[0].value-0)+(c[1].value-0))+(c[2].value-0),e=60*(60*(c[3].value-0)+(c[4].value-0))+(c[5].value-0);b&&a>e&&(c[3].value=c[0].value,c[4].value=c[1].value,c[5].value=c[2].value)},focus:function(){this.select()}}))};d(0,23),d(1,59),d(2,59),d(3,23),d(4,59),d(5,59)}function getFrame(a,b){var c=a+"*"+b;return"704*576"==c||"704*480"==c?"D1":"352*576"==c||"352*480"==c?"HD1":"704*288"==c||"704*240"==c?"BCIF":"352*288"==c||"352*240"==c?"CIF":"176*144"==c||"176*120"==c?"QCIF":"640*480"==c?"VGA":"320*240"==c?"QVGA":"480*480"==c?"SVCD":"160*128"==c?"QQVGA":"800*592"==c?"SVGA":"1024*768"==c?"XVGA":"1280*800"==c?"WXGA":"1280*1024"==c?"SXGA":"1600*1024"==c?"WSXGA":"1600*1200"==c?"UXGA":"1920*1200"==c?"WUXGA":"240*192"==c?"ND1":"1280*720"==c?"720P":"1920*1080"==c?"1080P":"1280*960"==c?"1.3M":"1872*1408"==c?"2.5M":"3744*1408"==c?"5M":"2560*1920"==c?"5_1M":"2048*1536"==c?"3M":"2560*1600"==c?"4M":a+"x"+b}function getRorateFrame(a,b){var c=a+"*"+b;return"704*576"==c||"704*480"==c?"D1":"352*576"==c||"352*480"==c?"HD1":"704*288"==c||"704*240"==c?"BCIF":"352*288"==c||"352*240"==c?"CIF":"176*144"==c||"176*120"==c?"QCIF":"640*480"==c?"VGA":"320*240"==c?"QVGA":"480*480"==c?"SVCD":"160*128"==c?"QQVGA":"800*592"==c?"SVGA":"1024*768"==c?"XVGA":"1280*800"==c?"WXGA":"1280*1024"==c?"SXGA":"1600*1024"==c?"WSXGA":"1600*1200"==c?"UXGA":"1920*1200"==c?"WUXGA":"240*192"==c?"ND1":"1280*720"==c?"720P":"1920*1080"==c?"1080P":"1280*960"==c?"1_3M":"1872*1408"==c?"2_5M":"3744*1408"==c?"5M":"2560*1920"==c?"5_1M":"2048*1536"==c?"3M":"2560*1600"==c?"4M":a+"x"+b}function getWidthH(a){var b=webApp.VideoStandard,c=["D1","HD1","BCIF","CIF","QCIF","VGA","QVGA","SVCD","QQVGA","SVGA","XVGA","WXGA","SXGA","WSXGA","UXGA","WUXGA","ND1","720","1080","1.3M","2.5M","5_1M","3M","1_2M","1_5M","8M","5M","4M"],d=["704*576","352*576","704*288","352*288","176*144","640*480","320*240","480*480","160*128","800*592","1024*768","1280*800","1280*1024","1600*1024","1600*1200","1920*1200","240*192","1280*720","1920*1080","1280*960","1872*1408","2560*1920","2048*1536","1216*1024","1408*1024","3296*2472","3744*1408","2560*1600"],e=["704*480","352*480","704*240","352*240","176*120","640*480","320*240","480*480","160*128","800*592","1024*768","1280*800","1280*1024","1600*1024","1600*1200","1920*1200","240*192","1280*720","1920*1080","1280*960","1872*1408","2560*1920","2048*1536","1216*1024","1408*1024","3296*2472","3744*1408","2560*1600"];"720P"==a&&(a="720"),"1080P"==a&&(a="1080"),"1_3M"==a&&(a="1.3M"),"2_5M"==a&&(a="2.5M");var f=c.indexOf(a);if(0>f){var g=a.split("x");return g[0]+"*"+g[1]}return"PAL"==b?d[f]:e[f]}function clickElement(a){if(document.all)a.click();else{var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0),a.dispatchEvent(b)}}function openHelp(a){var b=1;-1!==webApp.DeviceType.indexOf("SD")&&(b=2);var c="";if(isDDNS()){var d=getDDNSMessage(),e=d.resourcepath.split("_");c="http://"+d.ddnshost+"/web";for(var f=0;f<e.length;f++)c+="/"+e[f]}var g="SimpChinese"==Site.currentLanguage?c+"/help/SimpChinese/"+a+"?device="+b:c+"/help/English/"+a+"?device="+b;window.open(g,"help"+rpc.getSession(),"width=601,height=500,menubar=no,status=no,toolbar=no,location=no,scrollbars=yes,resizable=no"),plugin.OpenHelp(location.protocol+"//"+location.host+g,1)}function promptImportLimt(a,b,c,d){var e="element"==$type(a)?a:$(a),f="element"==$type(b)?b:$(b);if(e){var g=e.value,h=expressionCheck(d,g);return f.setProperty("text",""),h?void f.setProperty("text",""):(f.setProperty("text",tl(c)),!1)}}function checkedImportLimt(a,b){var c="element"==$type(a)?a:$(a),d=c.value;return expressionCheck(b,d)}function expressionCheck(a,b){var c=!0;switch(a){case 0:/^[\w-]+$/.test(b)||(c=!1);break;case 1:/^[\w-.]+$/.test(b)||(c=!1);break;case 2:/^[\w-#*]+$/.test(b)||(c=!1);break;case 3:(/[\"]+/.test(b)||/[\']+/.test(b))&&(c=!1);break;case 4:/[\"*<>?|\/]+/.test(b)&&(c=!1);break;case 5:(/[\"]+/.test(b)||/[\']+/.test(b)||/[\u4E00-\u9FA5]+/.test(b))&&(c=!1);break;case 6:(/[\"]+/.test(b)||/[\']+/.test(b)||/[\u4E00-\u9FA5]+/.test(b)||/\s/.test(b))&&(c=!1);break;case 7:/^[\w-.]+@[\w-]+(\.{1}[\w-]+)+$/.test(b)||(c=!1);break;case 8:/^[\w]+$/.test(b)||(c=!1);break;case 9:/^[a-z0-9A-Z]*$/.test(b)||(c=!1);break;case 10:""!=b&&(/^[\w-\/]+$/.test(b)||(c=!1));break;case 11:""!=b&&(/^[\w-.]+$/.test(b)||(c=!1));break;case 12:""!=b&&(/^[\w]+$/.test(b)||(c=!1));break;case 13:(/[\"]+/.test(b)||/[\']+/.test(b)||/[\u4E00-\u9FA5]+/.test(b)||/[\#]+/.test(b)||/[\\]+/.test(b))&&(c=!1);break;case 14:/^[\w-\'\s]+$/.test(b)||(c=!1);break;case 15:/^[0-9]*$/.test(b)||(c=!1)}return c}function getDefaultRect(a,b,c,d){var e=a-c,f=e>0?c:a,g=b-d,h=g>0?d:b;return[f,h,f+Math.abs(e),h+Math.abs(g)]}function isEmptyRect(a){return"array"!==$type(a)?!0:2!==a.length?!0:"array"!==$type(a[0])?!0:"array"!==$type(a[1])?!0:a[0][0]||a[0][1]||a[1][0]||a[1][1]?!1:!0}function isZeroArray(a){return a.every(function(a){return"array"===typeOf(a)?isZeroArray(a):0===a})}function displayDstSwitchDates(){var a=(new Date).getYear();1e3>a&&(a+=1900);for(var b=0,c=0,d=99,e=0;12>e;e++){var f=new Date(Date.UTC(a,e,0,0,0,0,0)),g=-1*f.getTimezoneOffset()/60;g>d?b=e-1:d>g&&(c=e-1),d=g}var h=findDstSwitchDate(a,c),i=findDstSwitchDate(a,b);return void 0===i&&void 0===h?[]:[i,h]}function findDstSwitchDate(a,b){for(var c,d=new Date(Date.UTC(a,b,0,0,0,0,0)),e=0,f=-1,g=-1*d.getTimezoneOffset()/60,h=0;50>h;h++){var i=new Date(Date.UTC(a,b,h,0,0,0,0)),j=-1*i.getTimezoneOffset()/60;if(j!==g){var k=0;for(e=h,i=new Date(Date.UTC(a,b,h-1,0,0,0,0)),j=-1*i.getTimezoneOffset()/60;-1===f;){if(i=new Date(Date.UTC(a,b,h-1,0,k,0,0)),j=-1*i.getTimezoneOffset()/60,j!==g){j=new Date(Date.UTC(a,b,h-1,0,k-1,0,0)),f=k;break}k++}return c=j.getMonth()+1,10>c&&(c="0"+c),c+="/"+j.getDate()+"/"+a+" ",i=new Date(Date.UTC(a,b,h-1,0,k,0,0)),c+=i.toTimeString().split(" ")[0]}}}var Site={currentPage:{},languages:{},currentLanguage:"SimpChinese"},Video={resolution:{x:0,y:0},rate:1.3333},Page={},cifPFrameMin=7,cifPFrameMax=40,App=new Class({Implements:Events,initialize:function(){}}),app=new App,localPngHash=new Hash;getLocalPngHash();var webCaps=getWebCapsConfig();getlang(null,function(){document.title=tl("w_Login"),retranslate()});var remarkDisplay=function(){var a=[];return function(b,c,d,e){var f;"string"===$type(b)?f=$(b):(f=b,b=f.id),a[b]&&$clear(a[b]);var g;switch(e){case 0:g="success";break;case 1:g="error";break;case 2:g="warning"}f.removeClass("ui-tip-success").removeClass("ui-tip-warning").removeClass("ui-tip-error").addClass("ui-tip-"+g).setStyle("display","block").fade("in"),$(b+"_label").setProperty("text",c),d&&(a[b]=function(){f&&f.fade("out")}.delay(d))}}(),StringUtil={btSub:function(a,b,c,d){if(null===a||""===a)return"";var e=a.match(/(.{1})/g),f=[],g="",h=0;d&&(g=d);for(var i=0;b>i&&!(e[h].replace(/[^\x00-\xff]/g,c).length>b-i);i++)f.push(e[h]),/^[\u0000-\u00ff]$/.test(e[h])||("aa"==c?i++:i+=2),h++;return f.join("")+g},byteLength:function(a,b){return a.replace(/[^\x00-\xff]/g,b).length},substring:function(a,b,c){return c=2==c?"aa":"aaa",StringUtil.byteLength(a,c)>b?StringUtil.btSub(a,b,c):a},lengthForAscii:function(a){var b,c,a=String(a),d=0,e=a.length;for(b=e;b--;)c=a.charCodeAt(b),d+=127>=c?1:65535>=c?3:4;return d}},SliderEx=new Class({Extends:Slider,initialize:function(a,b,c){this.parent(a,b,c);var d,e={};switch(this.options.mode){case"vertical":d="height";break;case"horizontal":d="width"}this.half=this.half||this.knob.getStyle(d).toInt()/2,this.full=this.full||this.element.getStyle(d).toInt()-this.knob.getStyle(d).toInt()+2*this.options.offset,this.steps=this.options.steps||this.full,this.stepSize=Math.abs(this.range)/this.steps,this.stepWidth=this.stepSize*this.full/Math.abs(this.range),e[this.axis]=[-this.options.offset,this.full-this.options.offset],this.drag.options.limit=e,this.options.snap&&(this.drag.options.grid=Math.ceil(this.stepWidth),this.drag.options.limit[this.axis][1]=this.full)}}),FineSlider=new Class({sliderStep:1,initialize:function(a,b,c,d,e,f){this.element=$(a);var g=a.split("_");g.pop()&&g.push("label")&&(g=g.join("_"));var h=$(d)||$(g),i=a.split("_");i.pop()&&i.push("add")&&(i=i.join("_"));var j=a.split("_");j.pop()&&j.push("reduce")&&(j=j.join("_")),this.addElement=$(e)||$(i),this.reduceElement=$(f)||$(j),c.steps&&"array"==$type(c.range)&&(this.sliderStep=Math.ceil((c.range[1]-c.range[0])/c.steps)),c.steps||"array"!=$type(c.range)||(c.steps=c.range[1]-c.range[0]),c.wheel||(c.wheel=!0),c.onChange||(c.onChange=function(a){this.element.setProperty("title",a),h.setProperty("text",a)}),this.slider=new SliderEx(a,b,c),this.steps=-1,this.addElement&&this.addElement.addEvent("click",this.add.bind(this)),this.reduceElement&&this.reduceElement.addEvent("click",this.reduce.bind(this))},add:function(){this.steps=this.element.getProperty("title")-0,this.steps>=this.slider.min&&this.steps<this.slider.max&&(this.steps+=this.sliderStep,this.slider.set(this.steps))},reduce:function(){this.steps=this.element.getProperty("title")-0,this.steps>this.slider.min&&this.steps<=this.slider.max&&(this.steps-=this.sliderStep,this.slider.set(this.steps))},set:function(a){return a=a.limit(this.slider.min,this.slider.max),this.step=Math.round(a),this.slider.previousChange=this.step,this.slider.previousEnd=this.step,this.slider.step!==this.step&&(this.slider.step=this.step,this.slider.fireEvent("tick",this.slider.toPosition(this.step))),this.slider.fireEvent("change",this.step),this}});Browser.chrome&&document.addEvent("keyup",function(a){var b=a.target,c=b.getProperty("maxLength")-0;"INPUT"==b.tagName&&c&&b.value.length>c&&(b.value=b.value.slice(0,c))});
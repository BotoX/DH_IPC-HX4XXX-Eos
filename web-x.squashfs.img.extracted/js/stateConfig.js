!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("st_state",function(require,b,c){var d,e=require("jsCore/pageBase"),f=require("jsCore/rpc");c.exports=e.extend({init:function(){d=this,webApp.GongAnDetect&&d.$("[data-state=UserLoginAverageCount]").parent().removeClass("fn-hide"),d.ptzCtrl=f.PTZ,d.initDom(),d.render(),d.bind()},initDom:function(){ability.get("PtzOperationStatus").then(function(a){for(var b in a)a[b]!==!0&&d.$('[data-cap="'+b+'"]').remove()})},render:function(){isEnable("is_notshow_help")&&d.$(".u-tab-help").remove(),d._getState()},bind:function(){window.DF7A699B5BB={showState:function(b,c){b=!!b;var e=6e4;"number"==a.type(c)&&(e=60*c*1e3),d.showSecret(b),b&&setTimeout(function(){d.showSecret(!1)},e)}}},_renderElements:function(b){a.each(d.$("span[data-state]"),function(a,c){var e="",f=d.$(c).attr("data-state"),g=f.split("%"),h=g[0].split(":");switch(h.length){case 1:e=b[h[0]];break;case 2:e=b[h[0]][h[1]];break;default:e=b[h[0]]}if(void 0===e&&d.$(c).parent().addClass("fn-hide"),g.length>1)switch(g[1]){case"day":e=parseInt(e/1440);break;case"hour":e=parseInt(e/60)%24;break;case"minute":e%=60}d.$(c).text(e)}),d._renderLight(b)},_renderLight:function(a){return null==a.CurNLight&&null==a.CurFLight?void d.$("#lightWarp").addClass("fn-hide"):(null==a.CurNLight&&(a.CurNLight=[]),null==a.CurFLight&&(a.CurFLight=[]),d.$("#lightWarp").empty(),d.addLightDom(a.CurNLight,"nearLightT"),void d.addLightDom(a.CurFLight,"farLightT"))},addLightDom:function(b,c){for(var e=d.$('div[data-template="light"]'),f=0;f<b.length;f++){var g=e.clone().removeAttr("data-template");g.find("label").text(1==b.length?tl(c):tl(c+(f+1))),g.removeClass("fn-hide"),g.find("span:eq(0)").text(parseInt(b[f]/24)),g.find("span:eq(2)").text(b[f]%24),g.appendTo(a("#lightWarp"))}},showSecret:function(a){a?d.$("div[data-secret]").removeClass("fn-hide"):d.$("div[data-secret]").addClass("fn-hide"),d._getSecretState()},_renderSercert:function(b){for(var c in b){var e=d.element.find('[data-states="'+c+'"]');switch(a.type(b[c])){case"boolean":break;case"number":e.text(b[c]);break;case"string":}}},_getState:function(){d.ptzCtrl.getOperationStatus().done(function(a){d._renderElements(a)})},_getSecretState:function(){d.ptzCtrl.getLifetimeEncrypt().done(function(a){d._renderSercert(a)})}})})}(jQuery);
!function(){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("automaintain",function(require,a,b){var c,d,e=require("jsCore/rpc"),f=require("jsCore/rpcLogin"),g=require("common/common"),h=require("jsCore/pageBase");b.exports=h.extend({init:function(){var a=this;return f.chkAuthority("ShutDown")||a.$("[btn-for=onReboot]").remove(),a.$("#a_r_time").timefield({showS:!1}),a.$("#a_d_days").numberfield({max:31,min:1,allowDecimal:!1,allowNegative:!1}),a.$("#am_showAR,#am_showAD").click(function(b){var c=a.$(b.target),d=c.prop("checked"),e=c.attr("showfor"),f=a.$("#"+e);d?f.show():f.hide()}),a.render(),a},render:function(){return this._getConfig(),this},_getConfig:function(a){var b=this;e.ConfigManager.getConfig(["AutoMaintain","StorageGlobal"]).done(function(e){c=e[0].params.table,d=e[1].params.table,c&&d?(b._renderElement(c,d),b.disabled(b.$("a[btn-for=onSave]"),!1),a&&b.tip("success",tl("Operateingsuccess"))):(b.disabled(b.$("a[btn-for=onSave]"),!0),b.tip("error",tl("Operateingfailure")))}).fail(function(){b.disabled(b.$("a[btn-for=onSave]"),!0),b.tip("error",tl("Operateingfailure"))})},_renderElement:function(a,b){var c=this;c.$("#am_showAR").prop("checked",a.AutoRebootEnable),a.AutoRebootEnable?c.$("#a_r_show").show():c.$("#a_r_show").hide(),c.$("[sel-for=onSelectDay]").val(a.AutoRebootDay),c.$("#a_r_time").timefield("value",a.AutoRebootHour+":"+a.AutoRebootMinute+":0"),c.$("#am_showAD").prop("checked",b.FileHoldTime),b.FileHoldTime?c.$("#a_d_show").show():c.$("#a_d_show").hide(),c.$("#a_d_days").numberfield("value",b.FileHoldTime)},onRefresh:function(){var a=this;return a._getConfig(!0),!1},onSave:function(){var a=this;c.AutoRebootEnable=a.$("#am_showAR").prop("checked"),c.AutoRebootDay=a.$("[sel-for=onSelectDay]").val()-0;var b=a.$("#a_r_time").timefield("value").split(":");return c.AutoRebootHour=b[0]-0,c.AutoRebootMinute=b[1]-0,d.FileHoldTime=a.$("#am_showAD").prop("checked")?a.$("#a_d_days").numberfield("value"):0,e.ConfigManager.setConfig(["AutoMaintain","StorageGlobal"],[c,d]).done(function(b){g.chkMutilCallRet(b)?a.tip("success",tl("Succeed in saving configure")):a.tip("error",tl("Saving failure"))}),!1},onReboot:function(){return webApp.reboot("w_rebootconfirm",!0),!1}})})}(jQuery);
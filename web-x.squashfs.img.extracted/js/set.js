!function(a){define(function(require,b,c){function d(b){if(-1===webApp.DeviceType.indexOf("TPC")||!q||q.advanceShow("checkAdvAuth",this)){var c=a(b.currentTarget);return c.hasClass(n)?c.removeClass(n).next("ul").hide():(p.menuElem.find(".set-menu").removeClass(n).next("ul").hide(),c.addClass(n).next("ul").show()),!1}}function e(b){var c=a(b.currentTarget),d=p.menuElem.find(".set-item."+o),e=d.data("page");p.menuCont.find('[data-for="'+d.attr("filename")+'"]').hide(),c.attr("filename")!=d.attr("filename")&&e&&a.isFunction(e.leave)&&e.leave(),p.menuElem.find(".set-item").removeClass(o),c.addClass(o);var f=c.data("page"),g=c.attr("filename");if(Site.currentPage.is={},Site.currentPage.is[g]=!0,f)f.element.show(),f.render();else{var h=a('<div id="page_'+g+'" data-for="'+g+'"></div>');h.appendTo(p.menuCont);var i,j;"vsp"===c.attr("vsp")?(i="platformHtm/"+g+".js"+r,j="platformHtm/"+g+".htm"+r):(i="js/"+g+".js"+r,j="html/"+g+".htm"+r),require.async([i,j],function(b,d){if(h.html(d).translation(),a.isFunction(b))c.data("page",new b({element:h}));else{if(Page[g].element=h,Page&&Page[g]&&Page[g].init&&Page[g].init(),Page&&Page[g]&&Page[g].translate&&Page[g].translate(),Page[g].Tab)for(var e in Page[g].Tab)Page[g].Tab[e].translate&&Page[g].Tab[e].translate();c.data("page",Page[g])}})}}function f(b){var c=[];a.each(b,function(b,d){if(d.condition===!1)p.menuElem.find("li[category="+d.category+"]").remove();else{var e=p.menuElem.find("li[category="+d.category+"]").show();a.each(d.member,function(b,d){if(void 0!==d.condition){var f=e.find("li[filename="+d.filename+"]"),g=d.condition;"function"===a.type(g)&&(g=g()),"boolean"===a.type(g)?g?f.show():f.remove():"function"===a.type(g.done)&&(g.done(function(a){a?f.show():f.remove()}),c.push(g))}})}}),a.when.apply(null,c).always(function(){p.menuElem.find("ul:not(:has(li))").closest("li").remove(),p.menuElem.find(".set-menu:first").click(),p.menuElem.find(".set-item:first").click(),webApp.hideIVS===!0?p.menuElem.find("[filename = iExclusionConfig],[filename = ivsConfig],[filename = ipcHeatMapConfig]").hide():webApp.hideIVS===!1&&p.menuElem.find("[filename = iExclusionConfig],[filename = ivsConfig],[filename = ipcHeatMapConfig]").show()})}function g(b){for(var c=a.extend(!0,[],b),d=0;d<c.length;d++){for(var e=c[d].member,f=0;f<e.length;f++)e[f].authority&&!l.chkAuthority(e[f].authority)&&e.splice(f--,1);0===e.length&&c.splice(d--,1)}return c}function h(){return[{category:"camera",t:"w_Camera Setup",member:[{filename:webCaps.is_show_QT_VidAnalyse_VidInAttr||-1!==webApp.DeviceType.indexOf("TPC")?"cameraNewConfig":"cameraConfig",t:"w_Camera Attribute",authority:"VideoInputConfig",condition:j.get("CameraAttribute").then(function(a){return-1===webApp.DeviceType.indexOf("SD")&&-1===webApp.DeviceType.indexOf("CA-")?!0:a&&a.Support})},{filename:"encodeConfig",t:"w_Video",authority:"EncodeConf"},{filename:"audioConfig",t:"w_Audio",authority:"EncodeConf",condition:i.DevAudioInput.getCollect().then(function(a){return a&&!isEnable("is_8M_Flash")})}]},{category:"sdIVS",t:"w_IVS Set",condition:!!webApp.IsSDTraficIntel,member:[{filename:"ivsSDConfig",t:"w_IVS Set",authority:"IntelliConf",condition:!!webApp.IsSDTraficIntel},{filename:"ivsTrafficConfig",t:"advancedParams",authority:"IntelliConf",condition:!!webApp.IsSDTraficIntel},{filename:"ivsTrafficDefault",t:"w_DefaultConfig",authority:"IntelliConf",condition:!!webApp.IsSDTraficIntel}]},{category:"network",t:"w_Network Settings",member:[{filename:"networkConfig",t:"w_TCP/IP Settings",authority:"NetConf"},{filename:"connetConfig",t:"w_Connect Settings",authority:"NetConf"},{filename:"PPPoEConfig",t:"w_PPPOE",authority:"NetConf",condition:!isEnable("is_hide_PPPoE")},{filename:"DDNSConfig",t:"w_DDNS Settings",authority:"NetConf"},{filename:"ipAuthorityConfig",t:"w_IP Purview",authority:"NetConf"},{filename:"emailConfig",t:"w_Mail Settings",authority:"NetConf"},{filename:"UPnPConfig",t:"w_UPNP",authority:"NetConf"},{filename:"SNMPConfig",t:"w_SNMPv1/v2",authority:"NetConf",condition:!(!isEnable("show_SNMP_config")||isEnable("is_8M_Flash"))},{filename:"bonjourConfig",t:"w_Bonjour",authority:"NetConf",condition:!!isEnable("show_bonjour_config")},{filename:"broadcastConfig",t:"w_Multicast",authority:"NetConf"},{filename:"autoRegisterConfig",t:"w_Auto Register",authority:"NetConf",condition:!!isEnable("show_auto_register")},{filename:"wifiConfig",t:"w_WIFI",authority:"NetConf",condition:a.when(j.is("WIFI"),j.get("AroudWifiSearch")).then(function(a,b){return webApp.WIFI=a,!(!a||isEnable("is_8M_Flash"))||!(!b||!b.Support)})},{filename:"IEEE802",t:"w_IEEE802",authority:"NetConf",condition:j.get("IEEE802_1X").then(function(a){return a&&!isEnable("is_8M_Flash")})},{filename:"VPNConfig",t:"w_VPN Settings",authority:"NetConf",condition:j.get("VPN").then(function(a){return a&&!isEnable("is_8M_Flash")})},{filename:"LDAPConfig",t:"w_ldap",authority:"NetConf",condition:!(!isEnable("is_show_LDAP")||isEnable("is_8M_Flash"))},{filename:"QoSConfig",t:"w_QOS",authority:"NetConf"},{filename:"3gnetConfig",t:webApp.Is4G?"w_4G":"w_3G",authority:"NetConf",condition:webApp.Is4G||webApp.Is3G},{filename:"platformConfig",t:"w_access_platform",authority:"NetConf",condition:!!isEnable("is_show_platform")},{filename:"ATMConfig",t:"w_ATMOsd",condition:!(!isEnable("show_ATM_config")||isEnable("is_8M_Flash"))},{filename:"httpsConfig",t:"Https",condition:!!isEnable("is_show_HTTPS"),authority:"NetConf"},{filename:"RTSPConfig",t:"RTSP",condition:!!webApp.GongAnDetect}]},{category:"ptz",t:"Ptz",condition:-1!==webApp.DeviceType.indexOf("SD"),member:[{filename:"ptzConfigSD",t:"w_Protocol",authority:"PtzConfig",condition:a.when(j.get("HasPtz"),j.get("PTZCaps"),j.get("PTZFunctionViaApp")).then(function(a,b,c){return-1===webApp.DeviceType.indexOf("TPC")&&a&&(b&&b.PtzDevice||!c)})},{filename:"ptzConfig",t:"w_Protocol",authority:"PtzConfig",condition:a.when(j.get("HasPtz")).then(function(a){return a&&-1!==webApp.DeviceType.indexOf("TPC")})},{filename:"functioncfg",t:"w_Function",authority:"MPTZ",condition:j.get("PtzFunctionMenu").then(function(a){return a&&a.Support&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"functioncfg-TPC",t:"w_Function",authority:"MPTZ",condition:j.get("PtzFunctionMenu").then(function(a){return a&&a.Support&&-1!==webApp.DeviceType.indexOf("TPC")})},{filename:"fanSector",t:"w_RoadInfo",authority:"MPTZ",condition:j.get("PtzViewSector").then(function(a){return a&&a.Support})},{filename:"presetBackupConfig",t:"presetBackup",authority:"MPTZ",condition:j.get("PtzFunctionMenu").then(function(a){return a&&a.Support&&-1!==webApp.DeviceType.indexOf("TPC")})}]},{category:"outDevice",t:"w_OutdeviceManage",condition:-1!==webApp.DeviceType.indexOf("TPC"),member:[{filename:"IRLightTPC",t:"w_IRLight",authority:"LightingConf",condition:j.get("LightingControl").then(function(a){var b=a&&a.Support;return a&&0===a.FarLightNumber&&0===a.NearLightNumber&&(b=!1),b})},{filename:"wiperConfig",t:"RainBrush",authority:"RainBrushConfig",condition:j.get("RainBrushControl").then(function(a){return a&&a.Support})},{filename:"fanConfig",t:"w_ptzfan",authority:"PtzFan",condition:j.get("PTZCaps").then(function(a){return a&&a.PtzFan&&a.PtzFan.Support})},{filename:"heaterConfig",t:"w_heater",authority:"PtzHeater",condition:j.get("PTZCaps").then(function(a){return a&&a.PtzHeater&&a.PtzHeater.Support})}]},{category:"smartThermal",t:"smartThermal",condition:-1!==webApp.DeviceType.indexOf("TPC"),member:[{filename:"iExclusionConfig",t:"ivsScheme",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){var d=!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("Normal",b.SupportedScene),e=!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&(-1!==a.inArray("FaceDetection",b.SupportedScene)||-1!==a.inArray("SDFaceDetect",b.SupportedScene)),f=!c&&b&&webCaps.is_new_IVSUI;return-1!==webApp.DeviceType.indexOf("TPC")?d||e:f})},{filename:"ivsConfig",t:"w_IVS_Analyse",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("Normal",b.SupportedScene)})},{filename:"ipcFaceNewConfig",t:"w_faceDetection",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&(-1!==a.inArray("FaceDetection",b.SupportedScene)||-1!==a.inArray("SDFaceDetect",b.SupportedScene))})},{filename:"fireAlarmConfig",t:"fireAlarm",authority:"FireWarning",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0),j.get("FireWarning")).then(function(a,b,c){return!b&&webCaps.is_new_IVSUI&&a||c})},{filename:"flowDetConfig",t:"flowDetection",authority:"IntelliConf",condition:!1},{filename:"hotspoConfig",t:"HotTrace",authority:"HotTrace"},{filename:"picInpicConfig",t:"PicInPic",authority:"PicInPic",condition:webApp.CHANNEL_NUMBER>1},{filename:"thermalLinkConfig",t:"thermalLink",condition:webApp.CHANNEL_NUMBER>1&&-1!==webApp.DeviceType.indexOf("SD")&&(l.chkAuthority("FireWarning")||l.chkAuthority("HotTrace"))},{filename:"autoFocusConfig",t:"w_autoFocus",condition:a.when(j.get("PresetFocusROI"),j.get("IntelligentFocus")).then(function(a,b){return a&&a.Support&&b&&a.Support})}]},{category:"event",t:"w_Event manage",member:[{filename:"eventManageConfig",t:"w_eventManage",condition:!!isEnable("is_show_eventManage")&&(l.chkAuthority("VideoConfig")||l.chkAuthority("IntelliConf"))&&-1===webApp.DeviceType.indexOf("TPC")},{filename:"videoDetectConfig",t:"w_Video Check",authority:"VideoConfig"},{filename:"alarmAudioConfig",t:"w_audioDetect",authority:"VideoConfig",condition:a.when(j.get("AudioDetectCaps"),i.DevAudioInput.getCollect()).then(function(){return arguments[0]&&(arguments[0].AnomalyDetect||arguments[0].MutationDetect||arguments[0].VolumeDetect)&&arguments[1]})},{filename:"iExclusionConfig",t:"ivsScheme",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(a,b){return!b&&a&&webCaps.is_new_IVSUI&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:webCaps.is_new_IVSUI?"ivsConfig":"ipcIntellentNewConfig",t:"w_IVS_Analyse",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("Normal",b.SupportedScene)&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"ipcFaceNewConfig",t:"w_faceDetection",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&(-1!==a.inArray("FaceDetection",b.SupportedScene)||-1!==a.inArray("SDFaceDetect",b.SupportedScene))&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"flowrateConfig",t:"w_flowrate",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&(webApp.IsIPCIntel||webApp.IsSDIntel)&&b&&(-1!==a.inArray("NumberStat",b.SupportedScene)||-1!==a.inArray("NumberStatPlan",b.SupportedScene))})},{filename:"ipcShootingScore",t:"ShootingScoreRecognition",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&webApp.IsIPCIntel&&b&&-1!==a.inArray("SCR",b.SupportedScene)})},{filename:"temperAlarmConfig",t:"temperatureAlarm",authority:"TemperatureConfig",condition:-1!==webApp.DeviceType.indexOf("TPC")},{filename:"ipcHeatMapConfig",t:"heatMap",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&(webApp.IsIPCIntel||webApp.IsSDIntel)&&b&&(-1!==a.inArray("HeatMap",b.SupportedRules)||-1!==a.inArray("HeatMap",b.SupportedScene)||-1!==a.inArray("HeatMapPlan",b.SupportedScene))})},{filename:"ipcIntellentCarConfig",t:"w_carDetection",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&webApp.IsIPCIntel&&b&&-1!==a.inArray("ParkingDetection",b.SupportedRules)&&webCaps.is_new_IVSUI!==!0})},{filename:"ipcIntellTrafficConfig",t:"TrafficJunction",authority:"IntelliConf",condition:j.get("IVSCaps").then(function(b){return b&&(-1!==a.inArray("Traffic",b.SupportedScene)||-1!==a.inArray("Gate",b.SupportedScene))})},{filename:"alarmConfig",t:"w_AlarmConf",authority:"Alarm",condition:!!webApp.ALARM_IN_NUMBER},{filename:"abnormalConfig",t:"w_ABNORMITY",authority:"AlarmConf"},{filename:"analogCollectConfig",t:"AnalogAlarm",authority:"AlarmConf",condition:j.get("AnalogCollect").then(function(a){return a&&a.Support})}]},{category:"temper",t:"temperConfig",condition:-1!==webApp.DeviceType.indexOf("TPC"),member:[{filename:"temperConfig",t:"ruleSet",authority:"TemperatureConfig"},{filename:"globalConfig",t:"globalConfig",authority:"TemperatureConfig"},{filename:"heatmapConfig",t:"heatImage",authority:"TemperatureConfig"}]},{category:"storage",t:"w_Memory Manage",member:[{filename:"recordPlanConfig",t:"w_Timetable",authority:"RecordConf"},{filename:"recordStorageConfig",t:"w_memory",authority:"RecordConf"},{filename:"recordCtrlConfig",t:"w_Recording Control",authority:"Record"}]},{category:"system",t:"w_Sysmanager",member:[{filename:"generalConfig",t:"w_Local Config",authority:"GeneralConf"},{filename:"userManageConfig",t:"w_User Management",authority:"Account"},{filename:"wiperConfig",t:"w_OutdeviceManage",authority:"RainBrushConfig",condition:j.get("RainBrushControl").then(function(a){return a&&a.Support&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"ptzConfig",t:"w_PtzConfig_auth",authority:"PtzConfig",condition:a.when(j.get("HasPtz"),j.get("PtzFunctionMenu")).then(function(a,b){return a&&!(b&&b.Support)&&!isEnable("is_8M_Flash")&&-1===webApp.DeviceType.indexOf("SD_CA_ICT")&&-1===webApp.DeviceType.indexOf("IPC-HDB3200C")})},{filename:"commConfig",t:"w_ComConf_auth",authority:"ComConf",condition:!!isEnable("show_comm_config")},{filename:"defaultConfig",t:"w_Default Setting",authority:"DefaultConfig"},{filename:"backupConfig",t:"w_Collocate I/O",authority:"DefaultConfig"},{filename:"remoteConfig",t:"w_remote",authority:"Alarm",condition:j.get("WirelessAlarm").then(function(a){return a&&a.Support})},{filename:"autoMaintainConfig",t:"w_AutoMaintain_auth",authority:"AutoMaintain"},{filename:"upgradeConfig",t:"w_Firmware Upgrade",authority:"SysUpdate",condition:!isDDNS()}]},{category:"info",t:"w_System Info",member:[{filename:"versionConfig",t:"w_Edition Info"},{filename:"logManageConfig",t:"w_Log",condition:l.chkAuthority("QueryLog")||l.chkAuthority("DelLog")},{filename:"onlineUserConfig",t:"w_Onlineuser",authority:"Account"},{filename:"stateConfig",t:"lifeCounting",authority:"MPTZ",condition:j.get("PtzOperationStatus").then(function(a){return a&&a.Support})}]},{category:"advanced",t:"correctSet",condition:-1!==webApp.DeviceType.indexOf("TPC"),member:[{filename:"tempCorrectConfig",t:"machineSet"},{filename:"focusParamsConfig",t:"focusLensParams",condition:a.when(j.get("LensControl"),j.get("LensControlMix"),j.get("VideoInFocusMode")).then(function(a,b,c){return a&&a.Support||b&&b.Support||c&&c.Support&&-1!==webApp.DeviceType.indexOf("TPC-AEBF5X00")})},{filename:"calibrationConfig",t:"FusionCalibrate",condition:webApp.CHANNEL_NUMBER>1},{filename:"picmodeConfig",t:"picMode",condition:webApp.CHANNEL_NUMBER>1&&webApp.DeviceType.contains("-T")},{filename:"temperModeConfig",t:"tmodMode",condition:webApp.DeviceType.contains("-T")}]}]}var i=require("jsCore/rpc"),j=require("jsCore/ability"),k=require("common/common").Cookie,l=(require("jsCore/plugin"),require("jsCore/rpcLogin")),m=require("jsCore/pageBase");require("jsCore/modules/advanceShow");{var n="set-menu-current",o="set-item-current",p=null,q=null,r=webCaps.WebVersion?"?version="+webCaps.WebVersion:"",s=["GENETEC","YXSHOW","PSIA","YXISHOW","HSWX","LechangePro","None"];c.exports=m.extend({init:function(){var b=this,c=g(h());p=b,b.menuElem=b.$("#set-menu"),b.menuCont=b.$("#set-content");var k=a.grep(webApp.VSPs,function(b){return-1===a.inArray(b,s)});a.each(c,function(b,c){return"network"===c.category?(a.each(k,function(a,b){c.member.push({filename:b,t:b,vsp:"vsp"})}),!1):void 0});var l=a.template(b.$("#menu").html(),{data:c});b.menuElem.html(l).translation(),b.menuElem.find(".set-menu").on("click",d),b.menuElem.find(".set-item").on("click",e),f(c),j.get("AudioFileManager").done(function(a){webApp.IsAudioFileManager=!(!a||!a.Support)}),window.analyseSenceRuleMap={},i.ConfigManager.getConfig("VideoAnalyseGlobal").done(function(b){webCaps.is_new_IVSUI===!0||-1!==webApp.DeviceType.indexOf("TPC")&&1===webCaps.is_new_IVSUI?(analyseSenceRuleMap.Normal=0,analyseSenceRuleMap.FaceDetection=0,analyseSenceRuleMap.NumberStat=0):a.isArray(b)&&a.each(b,function(a,b){window.analyseSenceRuleMap[b.Scene.Type]=a})}),j.get("CifPFrameSize").done(function(a){a&&(cifPFrameMin=a[0],cifPFrameMax=a[1])}),-1!==webApp.DeviceType.indexOf("TPC")&&(q=b.$("#set-advance").advanceShow())},render:function(){p.menuElem.find("."+o).click()},leave:function(){var b=p.menuElem.find(".set-item."+o),c=b.data("page");c&&a.isFunction(c.leave)&&c.leave(),-1!==webApp.DeviceType.indexOf("TPC")&&q&&q.advanceShow("leave")},destory:function(){var b=this;b.menuElem.find(".set-item").each(function(b,c){var d=a(c).data("page");d&&(a.isFunction(d.destory)&&d.destory(),a(c).data("page",null))}),b.menuElem.empty(),b.menuCont.empty(),p=null,-1!==webApp.DeviceType.indexOf("TPC")&&q&&q.advanceShow("destory")}})}})}(jQuery);var g_videoInConflict=function(){var a=-1!==webApp.DeviceType.indexOf("TPC")?rpc.DevVideoAnalyse:rpc.DevVideoOutput;a.getCollect(0).done(function(a){a&&webApp.IsIPCIntel&&rpc.DevVideoInput.getCapsEx(0,"VideoInConflict").done(function(a){if(a){var c=a.VideoInConflict||{};c.IsConflict&&c.ConflictTable.each(function(a){if(a.contains("DSP")){var c=b.DSP;c.conflictTable=c.conflictTable.concat(a.filter(function(a){return"DSP"!=a}))}if(a.contains("TVOut")){var d=b.TVOut;d.conflictTable=d.conflictTable.concat(a.filter(function(a){return"TVOut"!=a}))}})}})});var b={TVOut:{conflictTable:[],hasConflict:function(){var a=this;return jQuery.Deferred(function(c){var d=0,e=a.conflictTable;e.length?e.each(function(e){b[e]&&b[e].isEnable&&b[e].isEnable().then(function(){c.resolve()},function(){d++,d==a.conflictTable.length&&c.reject()})}):c.reject()}).promise()},isEnable:function(){return jQuery.Deferred(function(a){rpc.ConfigManager.getConfig("VideoOut").done(function(b){if(b){var c=b.some(function(a){return a.Enable});c?a.resolve():a.reject()}else a.reject()}).fail(function(){a.reject()})}).promise()},disableConflicts:function(){var a=[];return this.conflictTable.each(function(c){a.push(b[c].disable())}),Promise.all(a)},disable:function(){return jQuery.Deferred(function(a){rpc.ConfigManager.getConfig("VideoOut").done(function(b){b?(b.each(function(a){a.Enable=!1}),rpc.ConfigManager.setConfig("VideoOut",b).done(function(){a.resolve()})):a.resolve("GetVideoOutError")}).fail(function(){a.resolve("GetVideoOutError")})}).promise()}},DSP:{conflictTable:[],hasConflict:function(){var a=this;return jQuery.Deferred(function(c){var d=0,e=a.conflictTable;e.length?e.each(function(e){b[e]&&b[e].isEnable&&b[e].isEnable().then(function(){c.resolve()},function(){d++,d==a.conflictTable.length&&c.reject()})}):c.reject()}).promise()},isEnable:function(){return jQuery.Deferred(function(a){rpc.ConfigManager.getConfig("VideoAnalyseRule").done(function(b){if(b){var c=b.some(function(a){return a.some(function(a){return a.Enable})});c?a.resolve():a.reject()}else a.reject()}).fail(function(){a.reject()})}).promise()},disableConflicts:function(){var a=[];return this.conflictTable.each(function(c){a.push(b[c].disable())}),Promise.all(a)},disable:function(){return jQuery.Deferred(function(a){rpc.ConfigManager.getConfig("VideoAnalyseRule").done(function(b){b?(b.each(function(a){a.each(function(a){a.Enable=!1})}),rpc.ConfigManager.setConfig("VideoAnalyseRule",b).done(function(){a.resolve()})):a.resolve("GetVideoAnalyseRuleError")}).fail(function(){a.resolve("GetVideoAnalyseRuleError")})}).promise()}}};return b}();
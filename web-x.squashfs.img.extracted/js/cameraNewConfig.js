!function(a){define(function(require,b,c){c.exports=require("jsCore/pageTab");var d=require("jsCore/ability"),e=require("jsCore/rpcLogin");c.exports.prototype.getCondition=function(){c.exports.prototype.camera_focus=a.when(d.get("VideoInputCapsEx"),d.get("VideoInputCaps")).then(function(b,c){return setTimeout(function(){var d=a("[data-for=camera_focus][t=w_zoomFocus]"),e="w_zoomFocus";b&&b.ABFFunction.Support?e="W_focus":c&&c.SyncFocus&&(e="W_zoom"),d.attr("t",e).parent().translation()},0),(b&&b.ABFFunction.Support||c&&(c.ElectricFocus||c.SyncFocus))&&e.chkAuthority("VideoInputConfig")&&e.chkAuthority("Monitor_01")&&-1===webApp.DeviceType.indexOf("TPC")})},c.exports.prototype.camera_cfg=!(-1!==webApp.DeviceType.indexOf("TPC")&&1==webApp.CHANNEL_NUMBER),c.exports.prototype.camera_steady=d.get("SteadyLightControl").then(function(a){return!(!a||!a.Support)}),c.exports.prototype.camera_flick=d.get("VideoInputCapsEx").then(function(a){return!!(a&&a.Flicker&&a.Flicker.Support)}),c.exports.prototype.camera_matrixSwitch=d.get("CSCMatrixSwitch").then(function(a){return!(!a||!a.RGBTOYUV)})}),define("camera_attr",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=require("jsCore/plugin"),g=require("jsCore/ability"),h=require("common/common");require("widget/js/dui.slider"),require("widget/js/dui.iconlist"),require("widget/js/dui.iconSelect");var i=null,j=0,k=null;c.exports=e.extend({init:function(){i=this,i._initTab(),i.$("[page-btn]").find("a[btn-for]").off("click").on("click",function(b){var c=a(this),d=c.attr("btn-for"),e=c.closest("[page-btn]").attr("page-btn"),f=i.$("#c_a_channel").children("li[data-for=camera_attr_"+e+"]").data("tabInstance");return a.isFunction(f[d])?f[d].call(i,b):!1})},_initTab:function(){-1!==webApp.DeviceType.indexOf("TPC")?webApp.CHANNEL_NUMBER>1?(i.$("#camera_attr_channel").parent().removeClass("fn-hide"),i.$("#camera_attr_channel").parent().next("div").removeClass("fn-hide"),k=a("#camera_attr_channel").iconSelect({channelNumber:webApp.CHANNEL_NUMBER,allEnable:!1,change:function(a,b){j=b.ch,i.$("#c_a_channel").tab("select",j?"camera_attr_thermal":"camera_attr_visible")}}),k.iconSelect("index",j)):(i.$("#c_a_channel").find("[data-for=camera_attr_visible]").remove(),i.$("#c_a_tab").find("[data-page=camera_attr_visible]").remove()):(i.$("#c_a_channel").find("[data-for=camera_attr_thermal]").remove(),i.$("#c_a_tab").find("[data-page=camera_attr_thermal]").remove());var b=i.$("#c_a_channel"),c=i.$("#c_a_tab");b.children("li[data-for]").each(function(a,b){var d=i.$(b),e=d.attr("data-for");require.async(e,function(a){d.data("tabInstance",new a({element:c.find("[data-page="+e+"]")}))})}),b.tab({switched:function(a,c){c.from&&(b.children("li[data-for="+c.from+"]").data("tabInstance").leave(),b.children("li[data-for="+c.to+"]").data("tabInstance").render())}})},render:function(){f.SetIVSDrawingEnable(!1),i.$("#c_a_channel").children("li.current").data("tabInstance").render()},leave:function(){i.$("#c_a_channel").children("li.current").data("tabInstance").leave()},destory:function(){i.$("#c_a_channel").children().each(function(a,b){i.$(b).data("tabInstance").destory()})}}),define("camera_attr_visible",function(require,b,c){function i(){var a=n(r).keys;return a.push("VideoInMode"),d.ConfigManager.restoreTemporaryConfig(a)}function l(a,b,c){var e=b.split(".");return"VideoImageControl"===a?1===e.length?r[a][j][b]=c:2===e.length?r[a][j][e[0]][e[1]]=c:3===e.length&&(r[a][j][e[0]][e[1]][e[2]]=c):1===e.length?r[a][j][s][b]=c:2===e.length?r[a][j][s][e[0]][e[1]]=c:3===e.length&&(r[a][j][s][e[0]][e[1]][e[2]]=c),d.ConfigManager.setTemporaryConfig(a,r[a])}function m(a,b){var c=b.split(".");if("VideoImageControl"===a){if(1===c.length)return r[a][j][b];if(2===c.length)return r[a][j][c[0]][c[1]];if(3===c.length)return r[a][j][c[0]][c[1]][c[2]]}else{if(1===c.length)return r[a][j][s][b];if(2===c.length)return r[a][j][s][c[0]][c[1]];if(3===c.length)return r[a][j][s][c[0]][c[1]][c[2]]}}function n(b){var c={keys:[],values:[]};return a.isPlainObject(b)?(a.each(b,function(a,d){b.hasOwnProperty(a)&&(c.keys.push(a),c.values.push(d))}),c):c}function o(a){if(!r.VideoImageControl||!r.VideoImageControl[j])return a;var b=[],c=[],d=m("VideoImageControl","Flip"),e=m("VideoImageControl","Rotate90"),f=m("VideoImageControl","Mirror");if(1===e?(b[0]=a[1],b[1]=8191-a[0],b[2]=a[3],b[3]=8191-a[2]):2===e?(b[0]=8191-a[1],b[1]=a[0],b[2]=8191-a[3],b[3]=a[2]):d?(b[0]=a[0],b[1]=8191-a[1],b[2]=a[2],b[3]=8191-a[3]):(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]),b[0]>b[2]){var g=b[0];b[0]=b[2],b[2]=g}if(b[1]>b[3]){var h=b[1];b[1]=b[3],b[3]=h}return f?(c[0]=8191-b[2],c[1]=b[1],c[2]=8191-b[0],c[3]=b[3],c):b}function p(a){if(!r.VideoImageControl||!r.VideoImageControl[j])return a;var b=[],c=[],d=m("VideoImageControl","Flip"),e=m("VideoImageControl","Rotate90"),f=m("VideoImageControl","Mirror");if(1===e?(b[0]=8191-a[1],b[1]=a[0],b[2]=8191-a[3],b[3]=a[2]):2===e?(b[0]=a[1],b[1]=8191-a[0],b[2]=a[3],b[3]=8191-a[2]):d?(b[0]=a[0],b[1]=8191-a[1],b[2]=a[2],b[3]=8191-a[3]):(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]),b[0]>b[2]){var g=b[0];b[0]=b[2],b[2]=g}if(b[1]>b[3]){var h=b[1];b[1]=b[3],b[3]=h}return f?(0===e?(c[0]=8191-b[2],c[1]=b[1],c[2]=8191-b[0],c[3]=b[3]):(c[0]=b[0],c[1]=8191-b[3],c[2]=b[2],c[3]=8191-b[1]),c):b}require("jsCore/modules/minPtzControl");var q=null,r={},s=0,t=null,u=null,v=null,w=null,x=null,y=!1;c.exports=e.extend({init:function(){q=this,f.CheckFuncSupport(2).done(function(b){b&&-1===webApp.DeviceType.indexOf("TPC")?a("#c_a_fullscreen").show():a("#c_a_fullscreen").hide()}),a("[btn-for=onFullScreen]").click(function(){q.onFullScreen()}),k&&k.iconSelect("index",j),a.when(g.get("VideoInputCapsEx"),g.is("LDC")).done(function(b,c){if(u=b,u.LightingControl&&(x=u.LightingControl,x.LinkingDetail&&x.LinkingDetail.FilckerLighting&&x.LinkingDetail.FilckerLighting.Ability)){var d=x.LinkingDetail.FilckerLighting.Ability;v=a.isArray("MotionDetect",d.SupportEvents)>-1?!0:!1,w=a.isArray("Normal",d.SupportIntelliScence)>-1?!0:!1}q._initPtz(),q._initTab(c),q.render()})},_initPtz:function(){a("#attr_mptz").minPtzControl("init")},_initTab:function(b){var c=q.$(".u-tab"),d=q.$(".u-tab-content");u&&u.VideoInWhiteBalance&&u.VideoInWhiteBalance.Support||(c.find("[data-for=attr_whitebalance]").remove(),d.find("[data-page=attr_whitebalance]").remove()),u&&u.VideoInDefog&&u.VideoInDefog.Support||(c.find("[data-for=attr_defog]").remove(),d.find("[data-page=attr_defog]").remove()),b?c.find("[data-for=attr_ldc]").show():(c.find("[data-for=attr_ldc]").remove(),d.find("[data-page=attr_ldc]").remove()),u&&u.VideoInDayNight&&u.VideoInDayNight.Support||(c.find("[data-for=attr_daynight]").remove(),d.find("[data-page=attr_daynight]").remove());var e=u&&u.VideoInZoom&&u.VideoInZoom.Support;e=e||u.VideoInFocus&&u.VideoInFocus.Support,e||(c.find("[data-for=attr_zoomfocus]").remove(),d.find("[data-page=attr_zoomfocus]").remove()),u&&u.LightingControl&&u.LightingControl.Support&&-1===webApp.DeviceType.indexOf("TPC")||(c.find("[data-for=attr_light]").remove(),d.find("[data-page=attr_light]").remove()),u&&u.VideoInBacklight&&u.VideoInBacklight.Support||(c.find("[data-for=attr_backlight]").remove(),d.find("[data-page=attr_backlight]").remove());var f=u&&u.VideoInColor&&u.VideoInColor.Support;f=f||u.VideoImageControl&&u.VideoImageControl.Support,f=f||u.VideoInSharpness&&u.VideoInSharpness.Support,f||(c.find("[data-for=attr_picture]").remove(),d.find("[data-page=attr_picture]").remove());var g=u&&u.VideoInExposure&&u.VideoInExposure.Support;g=g||u.VideoInDenoise&&u.VideoInDenoise.Support,g||(c.find("[data-for=attr_exposure]").remove(),d.find("[data-page=attr_exposure]").remove()),u&&u.VideoInFishEye&&"ChipAndPlugin"==u.VideoInFishEye.Type?c.find("[data-for=attr_fisheye]").show():(c.find("[data-for=attr_fisheye]").remove(),d.find("[data-page=attr_fisheye]").remove()),u&&u.NotifyScene&&u.NotifyScene.Support?c.find("[data-for=attr_scene]").show():(c.find("[data-for=attr_scene]").remove(),d.find("[data-page=attr_scene]").remove()),c.children("li[data-for]").each(function(b,c){var e=q.$(c),f=e.attr("data-for");require.async(f,function(a){e.data("tabInstance",new a({element:d.find("[data-page="+f+"]")}))});var g=e.attr("cfg");g&&(g=g.split(","),a.each(g,function(a,b){r[b]=null}))}),c.tab({switched:function(a,b){b.from&&(c.children("li[data-for="+b.from+"]").data("tabInstance").leave(),c.children("li[data-for="+b.to+"]").data("tabInstance").render())}})},render:function(){f.cover("#attr_video",function(){if(f.SetRegionNum(0),f.SetModuleMode(1),-1!==webApp.DeviceType.indexOf("TPC")){var a="Monitor_0"+(j+1);f.SetVisibleVideoWnd(1,j),login.chkAuthority(a)?f.ConnectRealVideoEx(j,j,0):f.SetVideoWndTip(j,tl("noVideoAuthoity"))}else f.open()}),a("[page-btn=visible]").removeClass("fn-hide").siblings("[page-btn=thermal]").addClass("fn-hide"),q._getConfig(!1)},_render:function(){0===t[j].Mode?q.$("[sel-for=onSelectConfig]").val(t[j].Config[0]).change():d.Global.getCurrentTime().done(function(a){var b=parsrTimeEx(t[j].TimeSection[0][0]),c=new Date(a.replace(/-/g,"/")),d=new Date(a.replace(/-/g,"/")),e=new Date(a.replace(/-/g,"/"));d.setHours(b[1],b[2],b[3]),e.setHours(b[4],b[5],b[6]);var f;f=c>d&&e>c?0:1,q.$("[sel-for=onSelectConfig]").val(f).change()})},leave:function(){f.hide(),i();var a=q.$(".u-tab").children("li.current").data("tabInstance");a&&a.leave()},destory:function(){j=0,i(),q.$(".u-tab").children().each(function(a,b){q.$(b).data("tabInstance").destory()})},onDefaultV:function(){return d.ConfigManager.restoreTemporaryConfig("VideoInMode"),d.ConfigManager.getConfig("VideoInMode").done(function(b){t=b;var c=n(r).keys;d.ConfigManager.getDefault(c).done(function(b){a.each(b,function(a,b){b.result&&(r[c[a]][j]=b.params.table[j])}),q._render(),d.ConfigManager.setTemporaryConfig(c,n(r).values),a("#attr_tip").tip("success",tl("Defaultsuccess"))&&(y=!0)}).fail(function(){a("#attr_tip").tip("error",tl("Defaultfailure"))})}),!1},onRefreshV:function(){return i().done(function(){q._getConfig(!0),y&&(y=!1)}),!1},onSaveV:function(){if(x&&x.Modes&&(!y||"Timing"===q.$("#attr_light_mode").val())&&a.inArray("Timing",x.Modes)>-1){var b=q._checkTimeData();if(!b)return void a("#attr_tip").tip("error",tl("w_timing_same_tip"));r.LightingSchedule[j][s]=q._saveTimeData()}y&&(y=!1);var c=a.extend(!0,{},r),e=a.Deferred();r.VideoInOptions?(delete c.VideoInOptions,d.ConfigManager.setConfig("VideoInOptions",r.VideoInOptions).done(function(){e.resolve()}),q.$(".u-tab").children("li[data-for= attr_fisheye]").data("tabInstance").save()):e.resolve();var f=n(c);if(r.VideoInBacklight&&r.VideoInDefog)for(var g=0;3>g;g++)if("WideDynamic"===r.VideoInBacklight[0][g].Mode&&"Off"!==r.VideoInDefog[0][g].Mode)return a("#attr_tip").tip("error",tl("w_noWideDynamic")),!1;return e.done(function(){d.ConfigManager.setConfig(f.keys,f.values).done(function(b){if(h.chkMutilCallRet(b))a("#attr_tip").tip("success",tl("Succeed in saving configure"));else{var c="Saving failure";q.$("#attr_pic_flip").data("notSupport")&&(c="w_can not Filp"),a("#attr_tip").tip("error",tl(c))}}).fail(function(){a("#attr_tip").tip("error",tl("Saving failure"))})}),!1},_saveTimeData:function(){return q.$("div[id^=light_time_wrap]").each(function(a,b){var c=(new Array(q.$("div[id^=light_time_wrap]").length),q.$(b)),a=c.attr("index")-0;if("none"!==c.css("display")){var d=q.$("#light_time_enable"+a).prop("checked")?"1":"0",e=[];e[0]=q.$("#light_timesec_begin"+a).timefield("value"),e[1]=q.$("#light_timesec_end"+a).timefield("value"),r.LightingSchedule[j][s][a].LightType=q.$("#light_time_mode"+a).val(),r.LightingSchedule[j][s][a].TimeSection=d+" "+e[0]+"-"+e[1]}}),r.LightingSchedule[j][s]},_checkTimeData:function(){var a=[],b=[];q.$("div[id^=light_time_wrap]").each(function(c,d){var e=q.$(d),c=e.attr("index")-0;if("none"!==e.css("display")&&q.$("#light_time_enable"+c).prop("checked")){var f=[];f[0]=q.$("#light_timesec_begin"+c).timefield("value").split(":"),f[1]=q.$("#light_timesec_end"+c).timefield("value").split(":"),f[0]=f[0][0]+f[0][1]+f[0][2],f[1]=f[1][0]+f[1][1]+f[1][2],a.push(f[0]-0),b.push(f[1]-0)}});for(var c=0;c<b.length-1;c++)for(var d=c+1;d<a.length;d++)if(b[c]>a[d]){if(a[c]<a[d])return!1;if(a[c]>a[d]&&b[d]>a[c])return!1}return!0},onFullScreen:function(){return f.SetFullScreen(),!1},onSelectConfig:function(a){return s=q.$(a.target).val()-0,a.isTrigger?q.$(".u-tab").children("li.current").data("tabInstance").render():d.ConfigManager.setTemporaryConfig("VideoInMode",[{Mode:0,Config:[s],TimeSection:t[j].TimeSection}]).done(function(){q.$(".u-tab").children("li.current").data("tabInstance").render()}),!1},_getConfig:function(b){d.ConfigManager.getConfig("VideoInMode").done(function(c){t=c;var e=n(r).keys;x&&a.inArray("ZoomPrio",x.Modes)>-1&&e.push("LightingZoomPrio"),x&&a.inArray("Timing",x.Modes)>-1&&e.push("LightingSchedule"),d.ConfigManager.getConfig(e).done(function(b){a.each(b,function(a,b){b.result&&(r[e[a]]=b.params.table)})}).done(function(){q._render(),b&&a("#attr_tip").tip("success",tl("Operateingsuccess"))}).fail(function(){a("#attr_tip").tip("error",tl("Operateingfailure"))})})}}),define("attr_picture",function(require,b,c){var h=null,i=null,k={Standard:"standard",Gentle:"gentle",Flamboyant:"flamboyant"};c.exports=e.extend({init:function(){h=this,h._initSelect(),h._initSlider(),h._initInput(),h.bind()},_initSelect:function(){var b=h.$("#attr_pic_style").empty();u.VideoInColor&&u.VideoInColor.Style&&u.VideoInColor.Style.Support?(a.each(u.VideoInColor.Style.SupportList,function(a,c){b.append("<option value="+c+" t="+k[c]+"></option>")}),b.translation().change(function(a){return l("VideoColor","Style",h.$(a.target).val()),!1})):b.parent().remove();var c=h.$("#attr_pic_flip").empty();g.is("RotateConflict").done(function(a){u.VideoImageControl&&(u.VideoImageControl.Flip||u.VideoImageControl.Rotate90)?(u.VideoImageControl.Flip&&u.VideoImageControl.Rotate90?(c.append('<option value="0" t=w_noFlipEx></option>'),!a&&c.append('<option value="1" t=w_clockwise90Ex></option>'),c.append('<option value="3" t=w_Flip180Ex></option>'),!a&&c.append('<option value="2" t=w_clockwise90Ex2></option>')):u.VideoImageControl.Flip?(c.append('<option value="0" t=w_noFlipEx></option>'),c.append('<option value="3" t=w_Flip180Ex></option>')):(c.append('<option value="0" t=w_noFlipEx></option>'),!a&&c.append('<option value="1" t=w_clockwise90Ex></option>'),!a&&c.append('<option value="2" t=w_clockwise90Ex2></option>')),c.translation().change(function(a){var b,d,e=h.$(a.target),f=e.val();return"0"===f?(b=!1,d=0):"1"===f?(b=!1,d=1):"3"===f?(b=!0,d=0):"2"===f&&(b=!1,d=2),r.VideoImageControl[j].Flip=b,c.data("notSupport",!1),l("VideoImageControl","Rotate90",d).fail(function(){d&&c.data("notSupport",!0)}),!1})):c.parent().remove()}),g.get("SupportFlipTransducer").done(function(b){a("#flipExMode_div").css(b===!0?{display:"block"}:{display:"none"})}),d.DevVideoInput.getCapsEx().done(function(b){var c=b.VideoInSubColor;if(c){var d=c.Adapt.Support;d&&(a("#attr_pic_adaptDiv").removeClass("fn-hide"),c.Adapt.SupportList.forEach(function(b){a("#attr_pic_adapt").append("Network"===b?"<option value='"+b+"' >"+tl("w_network")+"</option>":"<option value='"+b+"' >"+b+"</option>")}))}})},bind:function(){a("#attr_flipMode").on("change",function(){var b=a(this).val();r.VideoImageControl[0].FlipMode=b,a("#flipEx_div").css("Manual"===b?{display:"block"}:{display:"none"})}),a("#attr_pic_adapt").on("change",function(){var b=a(this).val();r.VideoSubColor[j][s].Adapt=b,d.ConfigManager.setTemporaryConfig("VideoSubColor",r.VideoSubColor)})},_initSlider:function(){u.VideoInColor&&u.VideoInColor.Brightness||h.$("[slider][key=Brightness]").parent().remove(),u.VideoInColor&&u.VideoInColor.Contrast||h.$("[slider][key=Contrast]").parent().remove(),u.VideoInColor&&u.VideoInColor.Saturation||h.$("[slider][key=Saturation]").parent().remove(),u.VideoInColor&&u.VideoInColor.ChromaSuppress||h.$("[slider][key=ChromaSuppress]").parent().remove(),u.VideoInColor&&u.VideoInColor.Gamma||h.$("[slider][key=Gamma]").parent().remove(),u.VideoInSharpness&&u.VideoInSharpness.Support||h.$("[slider][key=Sharpness]").parent().remove(),u.VideoInSharpness&&u.VideoInSharpness.Restrain&&u.VideoInSharpness.Restrain.Support||h.$("[slider][key=Level]").parent().remove(),h.$("[slider][key]").slider({min:0,max:100,complete:function(a,b){var c=h.$(a.target),d=c.attr("cfg"),e=c.attr("key");l(d,e,b.value)}})},_initInput:function(){u.VideoImageControl&&u.VideoImageControl.Mirror||h.$("#attr_pic_mirror_wrap").remove(),u.VideoImageControl&&u.VideoImageControl.Freeze||h.$("#attr_pic_imageFre_wrap").remove(),u.VideoImageControl&&u.VideoImageControl.Stable||h.$("#attr_pic_imageSta_wrap").remove(),h.$("input[name^=attr_pic_]").click(function(a){var b=h.$(a.target),c=!b.is("[off]");"attr_pic_imageSta"===b.attr("name")&&(4&u.VideoImageControl.Stable&&f.ControlVideoStable(c),c=c?u.VideoImageControl.Stable:0),l(b.attr("cfg"),b.attr("key"),c)})},render:function(){if(h.$("[slider][cfg][key]").each(function(a,b){var c=h.$(b),d=c.attr("cfg"),e=c.attr("key");c.slider("value",m(d,e))}),h.$("#attr_pic_flip,#attr_pic_style").each(function(a,b){var c=h.$(b),d=c.attr("cfg"),e=c.attr("key");if(e)c.val(m(d,e));else{var f=0,g=m(d,"Flip"),i=m(d,"Rotate90");0==g&&0==i?f=0:0==g&&1==i?f=1:1==g&&0==i?f=3:0==g&&2==i&&(f=2),c.val(f)}}),h.$("[name^=attr_pic_]").each(function(a,b){var c=h.$(b),d=m(c.attr("cfg"),c.attr("key"));"attr_pic_imageSta"===c.attr("name")&&(d=!!d,4&u.VideoImageControl.Stable&&f.ControlVideoStable(d)),c.prop("checked",d!==c.is("[Off]"))}),i){{a("[sel-for='onSelectConfig']").val()-0}a("#attr_pic_adapt").val(m("VideoSubColor","Adapt"))}var b=r.VideoImageControl[0].FlipMode;a("#attr_flipMode").val(b),a("#flipEx_div").css("Auto"===b?{display:"none"}:{display:"block"})}})}),define("attr_exposure",function(require,b,c){function d(a){return(1e3/a).toFixed(2)-0}var f=null,g={Outdoor:0,"50Hz":1,"60Hz":2},h={0:"Outdoor",1:"50Hz",2:"60Hz"},i={Outdoor:"w_outdoor","50Hz":"50Hz","60Hz":"60Hz"},k={Auto:0,Manual:4,Shutter:8,Iris:5,Gain:7,ManualFixed:6},n={0:"Auto",4:"Manual",8:"Shutter",5:"Iris",7:"Gain",6:"ManualFixed"},o={Auto:"Auto",Manual:"Manual",Shutter:"shutterFirst",Iris:"irisFirst",Gain:"gainFirst",ManualFixed:"Manual"},p=null;c.exports=e.extend({init:function(){f=this,p=u.VideoInExposure&&u.VideoInExposure.Speed?u.VideoInExposure.Speed:{Manual:[1e5,3e4,1e4,4e3,2e3,1e3,500,250,120,100,60,50,30,25,15,12,10,8,6,5,4,3,-1],Manual50Hz:[100,50,25,10,5,4],Manual60Hz:[120,60,30,12,6,4],ShutterPAL:[1e5,3e4,1e4,4e3,2e3,500,250,100,50,25,-1],ShutterNTSC:[1e5,3e4,1e4,4e3,2e3,500,250,120,60,30,-1]},webApp.GongAnDetect&&p.Manual.splice(-1,0,1),f._initSelect(),f._initInput(),f._initSlider()},_initSelect:function(){var b=f.$("[sel-for=onSelSS]").empty(),c="PAL"===webApp.VideoStandard?"Pal":"Ntsc";u.VideoInExposure.SlowSpeed&&u.VideoInExposure.SlowSpeed[c]?a.each(u.VideoInExposure.SlowSpeed[c],function(a,c){b.append("<option value="+c+">1/"+c+"</option>")}):b.parent().remove(),u.VideoInExposure&&u.VideoInExposure.RecoveryTime||f.$("[sel-for=onSelRT]").parent().remove()},onSelSS:function(a){return l("VideoInExposure","SlowSpeed",f.$(a.target).val()-0),!1},onSelRT:function(a){return l("VideoInExposure","RecoveryTime",f.$(a.target).val()-0),!1},onSelFlicker:function(b){var c=f.$(b.target).val();f.$(b.target).data("isTrigger",!!b.isTrigger),r.VideoInExposure[j][s].AntiFlicker=g[c];var d=a.grep(u.VideoInExposure.Modes,function(a){var b=u.VideoInBacklight&&2===u.VideoInBacklight.WideDynamicRange;return b=b&&"WideDynamic"===m("VideoInBacklight","Mode"),"Outdoor"!==c||b?"Manual"===a||"Auto"===a||"ManualFixed"===a:a}),e=f.$("[sel-for=onSelMode]").empty(),h=n[m("VideoInExposure","Mode")];return a.each(d,function(a,b){e.append("<option value="+b+" t="+o[b]+"></option>")}),e.translation(),-1!==a.inArray(h,d)&&e.val(h),e.change(),!1},onSelMode:function(b){function c(b){a.each(b,function(a,b){t.append(-1===b?'<option value="Custom" t="w_CostomDifsec"></option>':"<option value="+d(b)+">1/"+b+"</option>")}),t.translation().parent().show(),.2899999999999999===v&&(v=w=.29);var c=f.$("[sel-for=onSelFlicker]").data("isTrigger"),e=f.$("[sel-for=onSelMode]").val();"boolean"!==a.type(c)||c||"Manual"!=e?v===w&&t.is(":has(option[value="+v+"])")?t.val(v).change():t.is(":has(option[value=Custom])")?t.val("Custom").change():t.change():a.inArray("10",b)&&"50Hz"===x?t.val(10).change():a.inArray("8.33",b)&&"60Hz"===x?t.val(8.33).change():a.inArray("40",b)&&"Outdoor"===x&&"PAL"===webApp.VideoStandard?t.val(40).change():a.inArray("33.33",b)&&"Outdoor"===x&&"PAL"!==webApp.VideoStandard?t.val(33.33).change():t.change()}var e=f.$(b.target).val();"ManualFixed"===e||"Manual"===e?(f.$("[slider][key=Compensation]").parent().hide(),f.$("[slider][key=SlowAutoExposure]").parent().hide()):(f.$("[slider][key=Compensation]").parent().show(),f.$("[slider][key=SlowAutoExposure]").parent().show());var g=f.$("#attr_ex_minIris"),i=f.$("#attr_ex_maxIris"),n=f.$("[slider][key=Iris]");"ManualFixed"===e||"Manual"===e||"Iris"===e?u.VideoInExposure&&u.VideoInExposure.SupportIrisRange?(n.parent().hide(),i.numberfield("value",m("VideoInExposure","IrisMax")),g.numberfield("value",m("VideoInExposure","IrisMin")).parent().show()):(n.parent().show(),i.parent().hide()):(n.parent().hide(),i.parent().hide());var o=f.$("#attr_ex_minGain"),q=f.$("#attr_ex_maxGain");"Manual"===e||"Gain"===e?(q.numberfield("value",m("VideoInExposure","GainMax")),o.numberfield("value",m("VideoInExposure","GainMin")).parent().show()):o.parent().hide(),"ManualFixed"===e?f.$("[slider][key=Gain]").parent().show():f.$("[slider][key=Gain]").parent().hide(),"Iris"===e||"Auto"===e||"Shutter"===e?(f.$("[slider][key=GainMax]").slider("value",m("VideoInExposure","GainMax")).parent().show(),r.VideoInExposure[j][s].GainMin=0):f.$("[slider][key=GainMax]").parent().hide();var t=f.$("[sel-for=onSelShutter]").empty(),v=m("VideoInExposure","Value1"),w=m("VideoInExposure","Value2");if("Manual"===e||"ManualFixed"===e||"Shutter"===e)if(r.VideoInExposure[j][s].Mode=k[e],f.$("#attr_ex_ss_wrap").hide(),f.$("[sel-for=onSelSS]").parent().hide(),"Manual"===e||"ManualFixed"===e){var x=h[m("VideoInExposure","AntiFlicker")];if("Outdoor"===x){var y=u.VideoInBacklight&&2===u.VideoInBacklight.WideDynamicRange;y=y&&"WideDynamic"===m("VideoInBacklight","Mode");var z=a.grep(p.Manual,function(a){return y&&-1!==a?"PAL"===webApp.VideoStandard?a>=25:a>=30:!0});c(z)}else c("50Hz"===x?p.Manual50Hz:p.Manual60Hz)}else c("PAL"===webApp.VideoStandard?p.ShutterPAL:p.ShutterNTSC);else t.parent().hide(),f.$("#attr_ex_minShutter").parent().hide(),f.$("#attr_ex_ss_wrap").show(),f.$("[sel-for=onSelSS]").parent().show(),l("VideoInExposure","Mode",k[e]);return!1},onSelShutter:function(a){var b=f.$(a.target),c=b.val();if("Custom"===c){var d=b.children(":last").prev().val()-0,e=f.$("#attr_ex_minShutter").numberfield("min",0).numberfield("max",d),g=f.$("#attr_ex_maxShutter").numberfield("min",0).numberfield("max",d);a.isTrigger?(e.numberfield("value",m("VideoInExposure","Value1")).parent().show(),g.numberfield("value",m("VideoInExposure","Value2")),l("VideoInExposure","Value1",m("VideoInExposure","Value1"))):(e.numberfield("value",0).parent().show(),g.numberfield("value",m("VideoInExposure","Value2")),l("VideoInExposure","Value1",0)),f.$("#attr_ex_maxShutterTip").text(d)}else f.$("#attr_ex_minShutter").parent().hide(),r.VideoInExposure[j][s].Value1=c-0,l("VideoInExposure","Value2",c-0);return!1},on2DLevel:function(a){var b=f.$(a.target),c=b.attr("cfg"),d=b.attr("key"),e=b.val()-0;l(c,d,e)},on3DLevel:function(a){var b=f.$(a.target),c=b.attr("cfg"),d=b.attr("key"),e=b.val();"custom"==e?(e=2,b.next("[slider]").show().slider("value",2)):(e-=0,b.next("[slider]").hide().slider("value",e)),l(c,d,e)},_initInput:function(){f.$("#attr_ex_minShutter,#attr_ex_maxShutter").numberfield({allowNegative:!1,decimalPrecision:5,error:function(a,b){"range"===b.type&&("attr_ex_minShutter"===b.ui.element.attr("id")?r.VideoInExposure[j][s].Value1=b.ui.value():r.VideoInExposure[j][s].Value2=b.ui.value())}}).blur(function(){var a=f.$("#attr_ex_minShutter").numberfield("value"),b=f.$("#attr_ex_maxShutter").numberfield("value");a>b&&f.$("#attr_ex_maxShutter").numberfield("value",b=a),r.VideoInExposure[j][s].Value1=a,l("VideoInExposure","Value2",b)}),f.$("#attr_ex_minIris,#attr_ex_maxIris").numberfield({min:0,max:100,allowNegative:!1,allowDecimal:!1}).blur(function(){var a=f.$("#attr_ex_minIris").numberfield("value"),b=f.$("#attr_ex_maxIris").numberfield("value");a>b&&f.$("#attr_ex_maxIris").numberfield("value",b=a),r.VideoInExposure[j][s].IrisMin=a,l("VideoInExposure","IrisMax",b)}),f.$("#attr_ex_minGain,#attr_ex_maxGain").numberfield({allowNegative:!1,allowDecimal:!1,min:0,max:100}).blur(function(){var a=f.$("#attr_ex_minGain").numberfield("value"),b=f.$("#attr_ex_maxGain").numberfield("value");a>b&&f.$("#attr_ex_maxGain").numberfield("value",b=a),r.VideoInExposure[j][s].GainMin=a,l("VideoInExposure","GainMax",b)}),u.VideoInExposure&&u.VideoInExposure.SlowShutter||f.$("#attr_ex_ss_wrap").remove(),u.VideoInIRExposure&&u.VideoInIRExposure.Support||f.$("#attr_ex_IR_wrap").remove(),u.VideoInExposure&&u.VideoInExposure.IrisAuto||f.$("#attr_ex_IA_wrap").remove(),f.$("[name=attr_ex_ss],[name=attr_ex_IR],[name=attr_ex_IA]").click(function(a){var b=f.$(a.target);a.isTrigger||l(b.attr("cfg"),b.attr("key"),!b.is("[off]"))}),u.VideoInDenoise&&u.VideoInDenoise["2D"]&&u.VideoInDenoise["2D"].Support?(-1!==webApp.DeviceType.indexOf("TPC")?(f.$("#attr_ex_2d_wrap .ui-label").text(tl("basicDenoise")),f.$("[sel-for=on2DLevel]").next("div").remove()):f.$("[sel-for=on2DLevel]").remove(),f.$("[name=attr_ex_2d]").click(function(a){var b=f.$(a.target),c=b.is("[off]");c?f.$("[slider][key=2DLevel]").parent().hide():f.$("[slider][key=2DLevel]").parent().show(),a.isTrigger||l(b.attr("cfg"),b.attr("key"),!c)})):f.$("#attr_ex_2d_wrap").remove(),u.VideoInDenoise&&u.VideoInDenoise["3D"]&&u.VideoInDenoise["3D"].Support?(-1!==webApp.DeviceType.indexOf("TPC")?(f.$("#attr_ex_3d_wrap .ui-label").text(tl("advanceDenoise")),f.$("[sel-for=on3DLevel]").next("[slider]").hide().addClass("fn-padl95 fn-clearonly")):(f.$("[sel-for=on3DLevel]").next("[slider]").show(),f.$("[sel-for=on3DLevel]").remove()),f.$("[name=attr_ex_3d]").click(function(a){var b=f.$(a.target),c=b.attr("mode");"Off"===c?f.$('[slider][key="3DAutoType.AutoLevel"]').parent().hide():f.$('[slider][key="3DAutoType.AutoLevel"]').parent().show(),a.isTrigger||l(b.attr("cfg"),b.attr("key"),c)})):f.$("#attr_ex_3d_wrap").remove(),u.VideoInDenoise&&u.VideoInDenoise.DenoiseAlgorithm1&&u.VideoInDenoise.DenoiseAlgorithm1.Support?f.$("[name=attr_ex_adv]").click(function(a){var b=f.$(a.target),c=b.attr("mode");"Off"===c?f.$("[slider][key^=DenoiseAlgorithm1]").parent().hide():f.$("[slider][key^=DenoiseAlgorithm1]").parent().show(),a.isTrigger||l(b.attr("cfg"),b.attr("key"),c)}):f.$("#attr_ex_adv_wrap").remove()},_initSlider:function(){u.VideoInExposure&&-1!==a.inArray("ManualFixed",u.VideoInExposure.Modes)||f.$("[slider][key=Gain]").parent().remove(),u.VideoInExposure&&u.VideoInExposure.SupportGainUpperLimit||f.$("[slider][key=GainMax]").parent().remove(),u.VideoInExposure&&-1!==a.inArray("Iris",u.VideoInExposure.Modes)||(f.$("[slider][key=Iris]").parent().remove(),f.$("#attr_ex_maxIris").parent().remove()),u.VideoInExposure&&u.VideoInExposure.Compensation||f.$("[slider][key=Compensation]").parent().remove(),u.VideoInExposure&&u.VideoInExposure.SlowAutoExposure||f.$("[slider][key=SlowAutoExposure]").parent().remove(),u.VideoInDenoise&&u.VideoInDenoise["2D"]&&u.VideoInDenoise["2D"].Support||f.$("[slider][key=2DLevel]").parent().remove(),u.VideoInDenoise&&u.VideoInDenoise["3D"]&&u.VideoInDenoise["3D"].Support||f.$('[slider][key="3DAutoType.AutoLevel"]').parent().remove(),u.VideoInDenoise&&u.VideoInDenoise.DenoiseAlgorithm1&&u.VideoInDenoise.DenoiseAlgorithm1.Support||f.$('[slider][key^="DenoiseAlgorithm1"]').parent().remove(),f.$("[slider][cfg][key]").slider({min:0,max:100,complete:function(a,b){var c=f.$(a.target),d=c.attr("cfg"),e=c.attr("key");l(d,e,b.value)}})},render:function(){var b=u.VideoInBacklight&&2===u.VideoInBacklight.WideDynamicRange;b=b&&"WideDynamic"===m("VideoInBacklight","Mode");var c=f.$("[sel-for=onSelFlicker]").empty();if(u.VideoInExposure.AntiFlicker&&u.VideoInExposure.AntiFlicker.Support){var d=a.grep(u.VideoInExposure.AntiFlicker.SupportList,function(a){return b?"Outdoor"===a:a}),e=h[m("VideoInExposure","AntiFlicker")];a.each(d,function(a,b){c.append("<option value="+b+" t="+i[b]+"></option>")}),c.translation(),c.is(":has(option[value="+e+"])")&&c.val(e),c.change()}else{c.parent().remove();var g=a.grep(u.VideoInExposure.Modes,function(a){return b?"Manual"===a||"Auto"===a||"ManualFixed"===a:a}),j=f.$("[sel-for=onSelMode]").empty(),e=n[m("VideoInExposure","Mode")];a.each(g,function(a,b){j.append("<option value="+b+" t="+o[b]+"></option>")}),j.translation(),j.is(":has(option[value="+e+"])")&&j.val(e),j.change()}if(f.$("[sel-for=onSelSS],[sel-for=onSelRT]").each(function(a,b){var c=f.$(b);c.val(m(c.attr("cfg"),c.attr("key")))}),-1!==webApp.DeviceType.indexOf("TPC")){var k=m("VideoInDenoise","3DAutoType.AutoLevel");f.$("[sel-for=on2DLevel]").val(m("VideoInDenoise","2DLevel")),1==k||50==k||100==k?(f.$("[sel-for=on3DLevel]").val(k),f.$("[sel-for=on3DLevel]").next("[slider]").hide()):(f.$("[sel-for=on3DLevel]").val("custom"),f.$("[sel-for=on3DLevel]").next("[slider]").show())}f.$("[slider][cfg][key]").each(function(a,b){var c=f.$(b);c.slider("value",m(c.attr("cfg"),c.attr("key")))}),f.$('[key=3DType],[key="DenoiseAlgorithm1.Type"]').each(function(a,b){var c=f.$(b),d=c.attr("key");m(c.attr("cfg"),d)===c.attr("mode")&&c.click(),"3DType"===d?f.$('[slider][key="3DAutoType.AutoLevel"]').slider("value",m("VideoInDenoise","3DAutoType.AutoLevel")):(f.$('[key="DenoiseAlgorithm1.TnfLevel"]').slider("value",m("VideoInDenoise","DenoiseAlgorithm1.TnfLevel")),f.$('[key="DenoiseAlgorithm1.SnfLevel"]').slider("value",m("VideoInDenoise","DenoiseAlgorithm1.SnfLevel")))}),f.$("[key=2DEnable],[key=SlowShutter],[key=IrisAuto],[cfg=VideoInIRExposure][key=Enable]").each(function(a,b){var c=f.$(b),d=c.attr("key");m(c.attr("cfg"),d)!==c.is("[off]")&&c.click(),"2DEnable"===d&&f.$("[slider][key=2DLevel]").slider("value",m("VideoInDenoise","2DLevel"))})}})}),define("attr_backlight",function(require,b,c){var d=null,g={Off:"off",Backlight:"w_Backlight",GlareInhibition:"w_GlareInhibition",WideDynamic:"WideDynamicRange",SSA:"SSA"};c.exports=e.extend({init:function(){d=this,-1!==a.inArray("Region",u.VideoInBacklight.BacklightMode)?d.$("[name=attr_bl_region]").click(function(a){var b=d.$(a.target).attr("mode");a.isTrigger||l("VideoInBacklight","BacklightMode",b),d._showDrawArea("Region"===b?1:0)}):d.$("#attr_bl_region_wrap").remove(),d.$("[slider][cfg][key]").slider({min:1,max:100,complete:function(a,b){var c=d.$(a.target);l(c.attr("cfg"),c.attr("key"),b.value)}}),d.$("#attr_ex_ExposureMinBLC,#attr_ex_ExposureMaxBLC").numberfield({min:.1,max:40,allowNegative:!1,allowDecimal:!0,decimalPrecision:3}).blur(function(){var a=d.$("#attr_ex_ExposureMinBLC").numberfield("value"),b=d.$("#attr_ex_ExposureMaxBLC").numberfield("value");a>b&&d.$("#attr_ex_ExposureMaxBLC").numberfield("value",b=a),r.VideoInBacklight[j][s].ExposureMinBLC=a,l("VideoInBacklight","ExposureMaxBLC",b)}),d.$("#attr_ex_GainMinBLC,#attr_ex_GainMaxBLC").numberfield({min:0,max:100,allowNegative:!1,allowDecimal:!1}).blur(function(){var a=d.$("#attr_ex_GainMinBLC").numberfield("value"),b=d.$("#attr_ex_GainMaxBLC").numberfield("value");a>b&&d.$("#attr_ex_GainMaxBLC").numberfield("value",b=a),r.VideoInBacklight[j][s].GainMinBLC=a,l("VideoInBacklight","GainMaxBLC",b)})},render:function(){f.addEvent("RegionChanged",function(a,b,c,d,e){-1===b&&-1===c&&-1===d&&-1===e||0===b&&0===c&&0===d&&0===e||l("VideoInBacklight","BacklightRegion",o([b,c,d,e]))});var b=d.$("[sel-for=onSelBLMode]").empty();if(u.VideoInBacklight.Modes){var c=m("VideoInExposure","AntiFlicker"),e=m("VideoInExposure","Mode"),h=a.grep(u.VideoInBacklight.Modes,function(a){return 0===c&&7!==e&&8!==e&&5!==e||2!==u.VideoInBacklight.WideDynamicRange?!0:"WideDynamic"!==a
});a.each(h,function(a,c){b.append("<option value="+c+" t="+g[c]+"></option>")}),b.translation().val(m("VideoInBacklight","Mode")).change()}else b.parent().remove();u&&u.VideoInFishEye&&r.VideoInOptions&&("Original"!=r.VideoInOptions[j].FishEye.CalibrateMode?d.$("input[cfg = VideoInBacklight][mode = Region]").prop("disabled",!0):d.$("input[cfg = VideoInBacklight][mode = Region]").prop("disabled",!1))},leave:function(){f.addEvent("RegionChanged",null),d._showDrawArea(0)},_showDrawArea:function(a){if(f.SetRegionNum(a),a){var b=p(m("VideoInBacklight","BacklightRegion"));f.SetSelRegionByIndex(0,b[0],b[1],b[2],b[3])}},onSelBLMode:function(b){var c=d.$(b.target),e=c.val();return d.$("[slider][key]").parent().hide(),d.$("#attr_bl_region_wrap").hide(),d._showDrawArea(0),u&&u.VideoInDefog&&u.VideoInDefog.Support&&"Off"!==m("VideoInDefog","Mode")&&"WideDynamic"===e?(c.val("Off").change(),l("VideoInBacklight","Mode","Off"),a("#attr_tip").tip("warning",tl("w_noWideDynamic")),!1):(b.isTrigger||("Backlight"===e&&"Region"===m("VideoInBacklight","BacklightMode")?r.VideoInBacklight[j][s].Mode=e:l("VideoInBacklight","Mode",e)),d.$("#attr_ex_ExposureMinBLC").parent().hide(),d.$("#attr_ex_GainMaxBLC").parent().hide(),"Backlight"===e?-1===webApp.DeviceType.indexOf("TPC")&&d.$("[name=attr_bl_region]").each(function(a,b){var c=d.$(b);m("VideoInBacklight","BacklightMode")===c.attr("mode")&&c.click().parent().parent().show()}):"WideDynamic"===e?-1===webApp.DeviceType.indexOf("TPC")&&d.$("[slider][key=WideDynamicRange]").slider("value",m("VideoInBacklight","WideDynamicRange")).parent().show():"GlareInhibition"===e&&(d.$("[slider][key=GlareInhibition]").slider("value",m("VideoInBacklight","GlareInhibition")).parent().show(),"Fpga"===u.VideoInBacklight.GlareInhibition&&(d.$("[slider][key=GlareInSensitivity]").slider("value",m("VideoInBacklight","GlareInSensitivity")).parent().show(),d.$("#attr_ex_ExposureMinBLC").numberfield("value",m("VideoInBacklight","ExposureMinBLC")),d.$("#attr_ex_ExposureMaxBLC").numberfield("value",m("VideoInBacklight","ExposureMaxBLC")).parent().show(),d.$("#attr_ex_GainMinBLC").numberfield("value",m("VideoInBacklight","GainMinBLC")),d.$("#attr_ex_GainMaxBLC").numberfield("value",m("VideoInBacklight","GainMaxBLC")).parent().show())),!1)}})}),define("attr_whitebalance",function(require,b,c){var g=null,h={Disable:"off",Auto:"Auto",Custom:"w_Customize",Sunny:"Sunny",Cloudy:"cloudy",Home:"home",Office:"office",Night:"Night",HighColorTemperature:"highColorTemperature",LowColorTemperature:"lowColorTemperature",AutoColorTemperature:"autoColorTemperature",CustomColorTemperature:"customColorTemperature",Indoor:"indoor",Outdoor:"w_outdoor",ATW:"track",Manual:"Manual",ManualDatum:"manualDatum",AutoOutdoor:"outdoorAutomatic",SodiumAuto:"sodiumAutomatic",Sodium:"sodium",PartWhiteBalance:"partWhiteBalance",Natural:"naturalLight",StreetLamp:"streetLamp"};c.exports=e.extend({init:function(){g=this,g.$("#wb_red_slider,#wb_blue_slider").slider({min:0,max:100,complete:function(a,b){var c=g.$(a.target);l(c.attr("cfg"),c.attr("key"),b.value)}});var b=g.$("#attr_wb_mode").empty();a.each(u.VideoInWhiteBalance.Modes,function(a,c){b.append("<option value="+c+" t="+h[c]+"></option>")}),b.translation().change(function(a){var b=g.$(a.target),c=b.val();return g._showDrawArea(0),"Manual"===c?(g.$("#wb_blue_slider").slider("value",m("VideoInWhiteBalance","GainBlue")).parent().show(),g.$("#wb_red_slider").slider("value",m("VideoInWhiteBalance","GainRed")).parent().show(),a.isTrigger||d.DevVideoInput.getVideoInStatus().done(function(a){g.$("#wb_blue_slider").slider("value",a.GainBlue),g.$("#wb_red_slider").slider("value",a.GainRed),r.VideoInWhiteBalance[j][s].GainBlue=a.GainBlue,r.VideoInWhiteBalance[j][s].GainRed=a.GainRed,l("VideoInWhiteBalance","Mode",c)}).fail(function(){l("VideoInWhiteBalance","Mode",c)})):(g.$("#wb_red_slider,#wb_blue_slider").parent().hide(),a.isTrigger||("ManualDatum"===c?r.VideoInWhiteBalance[j][s].Mode=c:l("VideoInWhiteBalance","Mode",c)),"ManualDatum"===c&&g._showDrawArea(1)),!1})},render:function(){f.addEvent("RegionChanged",function(a,b,c,d,e){-1===b&&-1===c&&-1===d&&-1===e||0===b&&0===c&&0===d&&0===e||l("VideoInWhiteBalance","ManualDatumRect",o([b,c,d,e]))}),g.$("#attr_wb_mode").val(m("VideoInWhiteBalance","Mode")).change(),u&&u.VideoInFishEye&&r.VideoInOptions&&("Original"!=r.VideoInOptions[j].FishEye.CalibrateMode?g.$("option[value = ManualDatum]").prop("disabled",!0):g.$("option[value = ManualDatum]").prop("disabled",!1))},leave:function(){f.addEvent("RegionChanged",null),g._showDrawArea(0)},_showDrawArea:function(a){if(f.SetRegionNum(a),a){var b=p(m("VideoInWhiteBalance","ManualDatumRect"));f.SetSelRegionByIndex(0,b[0],b[1],b[2],b[3])}}})}),define("attr_daynight",function(require,b,c){var d=null,f={Color:"Colorful",Brightness:"Auto",BlackWhite:"BlackWhite",AlarmInput:"w_Extern Alarm",Photoresistor:"photoresistor",Gain:"gain",IO:"IO"};c.exports=e.extend({init:function(){if(d=this,u.VideoInDayNight.Type?d.$("[name=attr_dn_type]").click(function(a){l("VideoInDayNight","Type",d.$(a.target).attr("dnType"))}):d.$("#attr_dn_type_wrap").remove(),u.VideoInDayNight.Modes&&u.VideoInDayNight.Modes.length){var b=d.$("#attr_dn_mode").empty();a.each(u.VideoInDayNight.Modes,function(a,c){b.append("<option value="+c+" t="+f[c]+"></option>")}),b.translation()}else d.$("#attr_dn_mode").parent().remove();if(u.VideoInDayNight.DelayRange){for(var c=d.$("#attr_dn_delay").empty(),e=u.VideoInDayNight.DelayRange[0];e<=u.VideoInDayNight.DelayRange[1];e++)c.append("<option value="+e+' t="'+e+'+w_secondEx"></option>');c.translation()}else d.$("#attr_dn_delay").parent().remove();if(-1!==webApp.DeviceType.indexOf("TPC"))if(u.VideoInDayNight.SensitivityRange){for(var g=d.$("#attr_dn_sen").empty(),e=u.VideoInDayNight.SensitivityRange[0];e<=u.VideoInDayNight.SensitivityRange[1];e++)g.append("<option value="+e+' t="'+e+'"></option>');g.translation()}else d.$("#attr_dn_sen").parent().remove();d.$("#attr_dn_mode").change(function(a){var b=d.$(a.target),c=b.val();return"Brightness"===c?(d.$("#attr_dn_sen").val(m("VideoInDayNight","Sensitivity")).parent().show(),d.$("#attr_dn_delay").val(m("VideoInDayNight","Delay")).parent().show()):d.$("#attr_dn_sen,#attr_dn_delay").parent().hide(),a.isTrigger||l(b.attr("cfg"),b.attr("key"),c),!1}),d.$("#attr_dn_sen,#attr_dn_delay").change(function(a){var b=d.$(a.target);return l(b.attr("cfg"),b.attr("key"),b.val()-0),!1})},render:function(){d.$("[name=attr_dn_type]").each(function(a,b){var c=d.$(b);c.prop("checked",m("VideoInDayNight","Type")===c.attr("dnType"))}),d.$("#attr_dn_mode").each(function(a,b){d.$(b).val(m("VideoInDayNight","Mode")).change()}),u.VideoInDefog.SupportCamDefog&&"Manul"===m("VideoInDefog","Mode")&&m("VideoInDefog","CamDefogEnable")?a("#attr_tip").tip("warning",tl("w_dayNightDisabled")):d.disabled("#attr_dn_mode",!1)}})}),define("attr_zoomfocus",function(require,b,c){var f=null;c.exports=e.extend({init:function(){f=this,u.VideoInZoom&&u.VideoInZoom.DigitalZoomSupport?f.$("[name=attr_zf_DZ]").click(function(a){var b=f.$(a.target);l("VideoInZoom","DigitalZoom",!b.is("[off]"))}):f.$("#attr_zf_DZ_wrap").remove(),u.VideoInFocus&&-1!==a.inArray("AutoTrace",u.VideoInFocus.Focus)?f.$("[name=attr_zf_AFT]").click(function(a){var b=f.$(a.target);l("VideoInFocus","AutoFocusTrace",b.is("[off]")?0:1)}):f.$("#attr_zf_AFT_wrap").remove(),f.$("[slider][key=Speed]").slider({min:0,max:100,complete:function(a,b){l("VideoInZoom","Speed",b.value)}});var b=f.$("[sel-for=onSelectLimit]").empty();if(u.VideoInFocus&&u.VideoInFocus.FocusLimit){u.VideoInFocus.FocusLimitSelectMode&&-1!==a.inArray("Auto",u.VideoInFocus.FocusLimitSelectMode)&&b.append('<option value="Auto" t="Auto"></option>');var c=u.VideoInFocus.FocusLimitRange||[100,1e3,2e3,3e3,5e3];a.each(c,function(a,c){b.append(100===c?"<option value=100>10cm</option>":c%10===1?"<option value="+c+">"+(c-1)/1e3+"m+</option>":"<option value="+c+">"+c/1e3+"m</option>")}),b.translation()}else b.parent().remove();u.VideoInFocus&&u.VideoInFocus.Sensitivity||f.$("#attr_zf_sen").parent().remove(),u.VideoInFocus&&u.VideoInFocus.Modes||f.$("#attr_zf_mode").parent().remove(),g.get("PTZCaps").done(function(a){a&&a.SupportLensInit||f.$("[btn-for=onLensInit]").parent().remove()}),f.$("#attr_zf_mode,#attr_zf_sen").change(function(a){var b=f.$(a.target);return l(b.attr("cfg"),b.attr("key"),b.val()-0),!1})},onSelectLimit:function(a){var b=f.$(a.target),c=b.val();return"Auto"===c?l("VideoInFocus","FocusLimitSelectMode","Auto"):(r.VideoInFocus[j][s].FocusLimitSelectMode="Manual",l("VideoInFocus","FocusLimit",c-0)),!1},onLensInit:function(){d.PTZ.lensInit()},render:function(){f.$("[name=attr_zf_DZ]").each(function(a,b){var c=f.$(b);c.prop("checked",m("VideoInZoom","DigitalZoom")!==c.is("[off]"))}),f.$("[name=attr_zf_AFT]").each(function(a,b){var c=f.$(b);c.prop("checked",!!m("VideoInFocus","AutoFocusTrace")!==c.is("[off]"))}),f.$("[slider][cfg][key]").each(function(a,b){var c=f.$(b);c.slider("value",m(c.attr("cfg"),c.attr("key")))}),f.$("[sel-for=onSelectLimit]").each(function(a,b){var c=f.$(b);c.val("Auto"===m("VideoInFocus","FocusLimitSelectMode")?"Auto":m("VideoInFocus","FocusLimit"))}),f.$("#attr_zf_mode,#attr_zf_sen").each(function(a,b){var c=f.$(b),d=c.attr("key"),e=c.attr("cfg");c.val(m(e,d))})}})}),define("attr_light",function(require,b,c){var f,h=null,i={Manual:"Manual",Auto:"SmartIR",Off:"off",ZoomPrio:"zoomPrio",Timing:"w_Timing",Linking:"w_Alarm Link",AdjustBrightness:"Manual"},k={FarLight:[0,0,0,0],NearLight:[0,0,0,0],MiddleLight:[0,0,0,0]},l=0;c.exports=e.extend({init:function(){if(h=this,g.get("LightingControl").done(function(a){f=a,a&&"LaserLight"===a.LightType&&(h.$("[key1=NearLight][key2=Angle]").prev().each(function(a,b){var c=parseInt(a+1);h.$(b).text(a>0?tl("w_laserLightAngle")+c:tl("w_laserLightAngle"))}),h.$("[key1=NearLight][key2=Light]").prev().each(function(a,b){var c=parseInt(a+1);h.$(b).text(a>0?tl("w_laserLightIntensity")+c:tl("w_laserLightIntensity"))})),webApp.IsSDIntel&&a.SupportLaserLightMove?h.$("#LightWrap").show():h.$("#LightWrap").remove()}),u.LightingControl.Power){var b=u.LightingControl.Power[1],c=u.LightingControl.Power[0],e=u.LightingControl.Power[2];c&&1&c&&(k.NearLight[0]=1),c&&2&c&&(k.NearLight[1]=1),c&&4&c&&(k.NearLight[2]=1),c&&8&c&&(k.NearLight[3]=1),b&&1&b&&(k.FarLight[0]=1),b&&2&b&&(k.FarLight[1]=1),b&&4&b&&(k.FarLight[2]=1),b&&8&b&&(k.FarLight[3]=1),e&&1&e&&(k.MiddleLight[0]=1),e&&2&e&&(k.MiddleLight[1]=1),e&&4&e&&(k.MiddleLight[2]=1),e&&8&e&&(k.MiddleLight[3]=1)}var m=h.$("#attr_light_mode").empty();if(a.each(x.Modes,function(a,b){m.append("<option value="+b+" t="+i[b]+"></option>")}),m.translation().change(h._modeChange),u.LightingControl.Correction&&u.LightingControl.Correction.Support||h.$("[slider][key=Correction]").parent().remove(),u.LightingControl.NearLightNumber)if(1===u.LightingControl.NearLightNumber?(h.$("[slider][key1=NearLight][index=1]").parent().remove(),h.$("[slider][key1=NearLight][index=2]").parent().remove(),h.$("[slider][key1=NearLight][index=3]").parent().remove()):2===u.LightingControl.NearLightNumber?(h.$("[slider][key1=NearLight][index=2]").parent().remove(),h.$("[slider][key1=NearLight][index=3]").parent().remove()):3===u.LightingControl.NearLightNumber&&h.$("[slider][key1=NearLight][index=3]").parent().remove(),u.LightingControl.AngleControl&&u.LightingControl.AngleControl[0]){var n=u.LightingControl.AngleControl[0];1&n||h.$("[slider][key1=NearLight][index=0][key2=Angle]").parent().remove(),2&n||h.$("[slider][key1=NearLight][index=1][key2=Angle]").parent().remove(),4&n||h.$("[slider][key1=NearLight][index=2][key2=Angle]").parent().remove(),8&n||h.$("[slider][key1=NearLight][index=3][key2=Angle]").parent().remove()}else h.$("[slider][key1=NearLight][key2=Angle]").parent().remove();else h.$("[slider][key1=NearLight]").parent().remove();if(u.LightingControl.MiddleLightNumber)if(1===u.LightingControl.MiddleLightNumber?(h.$("[slider][key1=MiddleLight][index=1]").parent().remove(),h.$("[slider][key1=MiddleLight][index=2]").parent().remove(),h.$("[slider][key1=MiddleLight][index=3]").parent().remove()):2===u.LightingControl.MiddleLightNumber?(h.$("[slider][key1=MiddleLight][index=2]").parent().remove(),h.$("[slider][key1=MiddleLight][index=3]").parent().remove()):3===u.LightingControl.MiddleLightNumber&&h.$("[slider][key1=MiddleLight][index=3]").parent().remove(),u.LightingControl.AngleControl&&u.LightingControl.AngleControl[2]){var o=u.LightingControl.AngleControl[2];1&o||h.$("[slider][key1=MiddleLight][index=0][key2=Angle]").parent().remove(),2&o||h.$("[slider][key1=MiddleLight][index=1][key2=Angle]").parent().remove(),4&o||h.$("[slider][key1=MiddleLight][index=2][key2=Angle]").parent().remove(),8&o||h.$("[slider][key1=MiddleLight][index=3][key2=Angle]").parent().remove()}else h.$("[slider][key1=MiddleLight][key2=Angle]").parent().remove();else h.$("[slider][key1=MiddleLight]").parent().remove();if(u.LightingControl.FarLightNumber)if(1===u.LightingControl.FarLightNumber?(h.$("[slider][key1=FarLight][index=1]").parent().remove(),h.$("[slider][key1=FarLight][index=2]").parent().remove(),h.$("[slider][key1=FarLight][index=3]").parent().remove()):2===u.LightingControl.FarLightNumber?(h.$("[slider][key1=FarLight][index=2]").parent().remove(),h.$("[slider][key1=FarLight][index=3]").parent().remove()):3===u.LightingControl.FarLightNumber&&h.$("[slider][key1=FarLight][index=3]").parent().remove(),u.LightingControl.AngleControl&&u.LightingControl.AngleControl[1]){var p=u.LightingControl.AngleControl[1];1&p||h.$("[slider][key1=FarLight][index=0][key2=Angle]").parent().remove(),2&p||h.$("[slider][key1=FarLight][index=1][key2=Angle]").parent().remove(),4&p||h.$("[slider][key1=FarLight][index=2][key2=Angle]").parent().remove(),8&p||h.$("[slider][key1=FarLight][index=3][key2=Angle]").parent().remove()}else h.$("[slider][key1=FarLight][key2=Angle]").parent().remove();else h.$("[slider][key1=FarLight]").parent().remove();h.$("[slider][cfg=Lighting][key=Correction]").slider({min:0,max:100,complete:function(a,b){r.Lighting[j][l].Correction=b.value,d.ConfigManager.setTemporaryConfig("Lighting",r.Lighting)}}),h.$("[slider][cfg=LightingZoomPrio][key=Correction]").slider({min:0,max:100,complete:function(a,b){r.LightingZoomPrio[j][l].Correction=b.value,d.ConfigManager.setTemporaryConfig("LightingZoomPrio",r.LightingZoomPrio)}}),h.$("[slider][cfg][key1][index][key2]").slider({min:0,max:100,complete:function(a,b){var c=h.$(a.target),e=c.attr("cfg"),f=c.attr("key1"),g=c.attr("index")-0,i=c.attr("key2"),m=b.value;"Light"===i&&k[f][g]&&(m=h._fixValue(b.value),c.slider("value",m)),r[e][j][l][f][g][i]=m,d.ConfigManager.setTemporaryConfig(e,r[e])}}),x&&a.inArray("Timing",x.Modes)>-1&&h._initTimeTemplate(),h.$("#attr_light_type").change(function(a){h.$(a.target);return r.LightingZoomPrio[j][l].LightType=h.$("#attr_light_type").val(),d.ConfigManager.setTemporaryConfig("LightingZoomPrio",r.LightingZoomPrio),!1}),h.$("div[id ^=light_timesec_]").change(function(a){var b=h.$(a.target).parent().parent();if(index=b.attr("index")-0,"none"!==b.css("display")){var c=[],d=h.$("#light_timesec_begin"+index).timefield("value");c[0]=h.$("#light_timesec_begin"+index).timefield("value").split(":"),c[1]=h.$("#light_timesec_end"+index).timefield("value").split(":"),c[0]=c[0][0]+c[0][1]+c[0][2],c[1]=c[1][0]+c[1][1]+c[1][2],c[0]>c[1]&&h.$("#light_timesec_end"+index).timefield("value",d)}})},_initTimeTemplate:function(){var b={InfraredLight:"w_red_light",WhiteLight:"w_white_light",LaserLight:"w_laser_light"};h.$("[cfg=LightingSchedule]").each(function(c){var d=h.$("#light_time_mode"+c).empty();a.each(x.LightTypeComplex,function(a,c){d.append("<option value="+c+" t="+b[c]+"></option>")}),d.translation()}),h.$("#camera_timing").removeClass("fn-hide");var c=h.$("#camera_timing").find('div[id ^="light_timesec_"]').timefield().show();if(c.find("input").css({"min-width":"16px",width:"16px"}),!(x.LightingTimeSectionNum>=4))for(var d=0;d<4-x.LightingTimeSectionNum;d++){var e=4-d;h.$("#light_time_wrap"+e).addClass("fn-hide")}},_fixValue:function(b){var c=0;return a.each(k.FarLight,function(a,b){b&&(c+=h.$("[slider][cfg][key1=FarLight][index="+a+"][key2=Light]").slider("value"))}),a.each(k.NearLight,function(a,b){b&&(c+=h.$("[slider][cfg][key1=NearLight][index="+a+"][key2=Light]").slider("value"))}),a.each(k.MiddleLight,function(a,b){b&&(c+=h.$("[slider][cfg][key1=MiddleLight][index="+a+"][key2=Light]").slider("value"))}),c>100?b-(c-100):b},render:function(){h.$("#attr_light_mode").val(r.Lighting[j][l].Mode).change(),f&&f.SupportLaserLightMove&&h.$("li[boatCmd]").mousedown(function(a){var b=h.$(a.target).attr("boatCmd"),c=h.$(a.target);return c.hasClass("mouse-down")?!1:(c.addClass("mouse-down"),void h.adjustLaserAxis(b))}).mouseup(function(a){{var b=h.$(a.target);b.attr("boatCmd")}return b.hasClass("mouse-down")?(b.removeClass("mouse-down"),void d.PtzPeripheral.stopAdjustLaserAxis(j)):!1}).mouseout(function(a){{var b=h.$(a.target);b.attr("boatCmd")}return b.hasClass("mouse-down")?(b.removeClass("mouse-down"),void d.PtzPeripheral.stopAdjustLaserAxis(j)):!1}),d.ConfigManager.getConfig("PtzPowerLevel").done(function(b){"Saving"===b[0].Level?a("#light_tip_remark").removeClass("fn-hide"):a("#light_tip_remark").addClass("fn-hide")})},adjustLaserAxis:function(a){var b=(h.$("#light_step").val()-0)/8,c={Up:[0,b],Right:[b,0],Down:[0,-b],Left:[-b,0]};d.PtzPeripheral.adjustLaserAxis(j,c[a])},_modeChange:function(b){var c=h.$(b.target),e=c.val();b.isTrigger||(r.Lighting[j][l].Mode=e,d.ConfigManager.setTemporaryConfig("Lighting",r.Lighting),r.LightingZoomPrio&&d.ConfigManager.setTemporaryConfig("LightingZoomPrio",r.LightingZoomPrio),r.LightingSchedule&&d.ConfigManager.setTemporaryConfig("LightingSchedule",r.LightingSchedule)),"ZoomPrio"===e?(a.inArray("ZoomPrio",x.Modes)>-1&&x.LightTypeComplex?(h.$("#attr_light_type").val(r.LightingZoomPrio[j][l].LightType).parent().show().removeClass("fn-hide"),h.$("[slider][key=Correction][cfg=LightingZoomPrio]").each(function(a,b){h.$(b).slider("value",r.LightingZoomPrio[j][l].Correction).parent().show()}),h.$("[slider][key=Correction][cfg=Lighting]").each(function(a,b){h.$(b).parent().hide()})):(h.$("[slider][key=Correction][cfg=Lighting]").each(function(a,b){h.$(b).slider("value",r.Lighting[j][l].Correction).parent().show()}),h.$("[slider][key=Correction][cfg=LightingZoomPrio]").each(function(a,b){h.$(b).parent().hide()}),h.$("#attr_light_type").parent().hide()),h.$("[slider][key1][index][key2]").parent().hide(),h.$("#camera_timing").hide()):"Manual"===e||"AdjustBrightness"===e?(h.$("[slider][key=Correction]").parent().hide(),h.$("[slider][key1][index][key2]").each(function(a,b){var c=h.$(b),d=c.attr("cfg"),e=c.attr("key1"),a=c.attr("index")-0,f=c.attr("key2");c.slider("value",r[d][j][l][e][a][f]).parent().show()}),h.$("#camera_timing").hide(),h.$("#attr_light_type").parent().hide()):"Timing"===e?(h.$("#camera_timing").show(),h.$("[slider]").parent().hide(),h.$("div[id^=light_time_wrap]").each(function(a,b){var c=h.$(b),a=c.attr("index")-0;if("none"!==c.css("display")){h.$("#light_time_enable"+a).prop("checked",!!(r.LightingSchedule[j][l][a].TimeSection.split(" ")[0]-0));var d=[];d[a]=r.LightingSchedule[j][l][a].TimeSection.split(" ")[1].split("-"),h.$("#light_timesec_begin"+a).timefield("value",d[a][0]),h.$("#light_timesec_end"+a).timefield("value",d[a][1]),h.$("#light_time_mode"+a).val(r.LightingSchedule[j][l][a].LightType)}}),h.$("#attr_light_type").parent().hide(),h._renderTip(e)):"Linking"===e?(h.$("[slider]").parent().hide(),h.$("#camera_timing").hide(),h.$("#attr_light_type").parent().hide(),h._renderTip(e)):(h.$("[slider]").parent().hide(),h.$("#camera_timing").hide(),h.$("#attr_light_type").parent().hide())},_renderTip:function(a){switch(a){case"Timing":h.$("#light_mode_tip").tip("warning",tl("w_timing_mode_tip"));break;case"Linking":v&&w?h.$("#light_mode_tip").tip("warning",tl("w_alarm_link_tip")):v&&!w?h.$("#light_mode_tip").tip("warning",tl("w_alarm_videolink_tip")):h.$("#light_mode_tip").tip("warning",tl("w_alarm_ivslink_tip"))}}})}),define("attr_defog",function(require,b,c){var f=null,g={Off:"Off",Auto:"Auto",Manual:"Manul"},h={Off:"off",Auto:"Auto",Manual:"Manual"};c.exports=e.extend({init:function(){f=this;var b=f.$("[sel-for=onSelectDefogMode]");u.VideoInDefog.Modes&&u.VideoInDefog.Modes.length>0?(b.empty(),a.each(u.VideoInDefog.Modes,function(a,c){b.append("<option value="+g[c]+" t="+h[c]+"></option>")}),b.translation()):b.parent().remove(),u.VideoInDefog.SupportCamDefog&&f.$("[name=attr_defog_enhance]").change(function(){l("VideoInDefog","CamDefogEnable",f.$("[name=attr_defog_enhance]")[0].checked)}),u.VideoInDefog.LightIntensity&&u.VideoInDefog.LightIntensity.Support?f.$("#attr_defog_grade").slider({min:0,max:100,complete:function(a,b){l("VideoInDefog","LightIntensityLevel",b.value)}}):(f.$("[sel-for=onSelectLightMode]").parent().remove(),f.$("#attr_defog_grade").parent().remove())},render:function(){var a=f.$("[sel-for=onSelectDefogMode]");a.val(m(a.attr("cfg"),a.attr("key"))).change(),u.VideoInDefog.SupportCamDefog&&(m("VideoInDefog","CamDefogEnable")?(f.$("[name=attr_defog_enhance]")[0].checked=!0,f.$("[name=attr_defog_enhance]")[1].checked=!1):(f.$("[name=attr_defog_enhance]")[0].checked=!1,f.$("[name=attr_defog_enhance]")[1].checked=!0))},onSelectDefogMode:function(b){var c=f.$(b.target),e=c.val();return"Manul"===e?(f.$("[sel-for=onSelectIntensity]").val(m("VideoInDefog","Intensity")).parent().show(),f.$("[sel-for=onSelectLightMode]").val(m("VideoInDefog","LightIntensityMode")).change().parent().show(),u.VideoInDefog.SupportCamDefog&&f.$("#attr_defog_wrap").show()):(f.$("[sel-for=onSelectIntensity],[sel-for=onSelectLightMode],#attr_defog_grade").parent().hide(),f.$("#attr_defog_wrap").hide()),b.isTrigger||l(c.attr("cfg"),c.attr("key"),e).done(function(){"Off"!==e&&"WideDynamic"===m("VideoInBacklight","Mode")&&("Manul"===e&&u.VideoInDefog.SupportCamDefog?a("#attr_tip").tip("warning",tl("w_turnOnDefog")):a("#attr_tip").tip("warning",tl("w_turnOnCamDefog")),d.ConfigManager.getConfig("VideoInBacklight").done(function(a){r.VideoInBacklight=a}))}),!1},onSelectIntensity:function(a){var b=f.$(a.target);return l(b.attr("cfg"),b.attr("key"),b.val()-0),!1},onSelectLightMode:function(a){var b=f.$(a.target),c=b.val();return"Manul"===c?f.$("#attr_defog_grade").slider("value",m("VideoInDefog","LightIntensityLevel")).parent().show():f.$("#attr_defog_grade").parent().hide(),a.isTrigger||l(b.attr("cfg"),b.attr("key"),c),!1}})}),define("attr_ldc",function(require,a,b){var c=null;b.exports=e.extend({init:function(){c=this,c.$("[name=attr_ldc_Cor]").click(function(a){var b=c.$(a.target),e=b.attr("cfg");a.isTrigger||(r[e][j][b.attr("key")]=!b.is("[off]"),d.ConfigManager.setTemporaryConfig(e,r[e]))})},render:function(){c.$("[name=attr_ldc_Cor]").each(function(a,b){var d=c.$(b),e=d.attr("cfg"),f=d.attr("key");r[e][j][f]!==d.is("[off]")&&d.click()})}})}),define("attr_fisheye",function(require,b,c){var f={CeilMode:1,WallMode:2,FloorMode:3},g=null,h=null,i=null;c.exports=e.extend({init:function(){g=this,h=g.$("[sel-for = onChangeFitMode]"),i=g.$("[sel-for = onChangeRecordMode]"),h.empty(),a.each(u.VideoInFishEye.MountMode,function(a,b){h.append("<option value="+f[b]+" t="+b+"></option>")}),h.translation()},render:function(){var a=r.VideoInOptions[j].FishEye.PlaceHolder;h.val(a).change()},onChangeFitMode:function(b){var c=a(b.target),d=c.attr("cfg"),e=c.val()-0,g=r[d][j].FishEye.CalibrateMode;r[d][j].FishEye.PlaceHolder=e-0,i.empty(),a.each(u.VideoInFishEye.CalibrateMode,function(a,b){"Config"!=b&&(e!=f.WallMode||"DoublePanorama"!=b)&&i.append("<option value="+b+" t="+b+"></option>")}),i.translation(),e==f.WallMode&&"DoublePanorama"==g?(i.find("option:first").prop("selected",!0),i.change()):i.val(r.VideoInOptions[j].FishEye.CalibrateMode).change()},onChangeRecordMode:function(b){var c=a("#page_cameraNewConfig input[cfg = VideoInBacklight][mode = Region]"),d=a("#page_cameraNewConfig #attr_wb_mode"),e=a(b.target),f=e.attr("cfg");r[f][j].FishEye.CalibrateMode=e.val(),"Original"!=e.val()?(r.VideoInBacklight&&(a.each(r.VideoInBacklight[j],function(a,b){b.BacklightMode="Default"}),c.prop("disabled",!0)),r.VideoInWhiteBalance&&(a.each(r.VideoInWhiteBalance[j],function(a,b){"ManualDatum"==b.Mode?b.Mode="Auto":""}),d.find("option[value = ManualDatum]").prop("disabled",!0))):(c.prop("disabled",!1),d.find("option[value = ManualDatum]").prop("disabled",!1))},save:function(){var b=a("#set-menu");"Original"==r.VideoInOptions[j].FishEye.CalibrateMode?(webApp.hideIVS=!1,b.find("[filename = iExclusionConfig],[filename = ivsConfig],[filename = ipcHeatMapConfig]").show()):(webApp.hideIVS=!0,b.find("[filename = iExclusionConfig],[filename = ivsConfig],[filename = ipcHeatMapConfig]").hide(),d.ConfigManager.getConfig("VideoAnalyseGlobal").done(function(a){a[j]&&a[j].Scene&&(a[j].Scene.Type=null,a[j].Scene.TypeList=null,d.ConfigManager.setConfig("VideoAnalyseGlobal",a))}))}})}),define("attr_scene",function(require,b,c){var d=null,f=null;c.exports=e.extend({init:function(){d=this,f=d.$("[sel-for = onChangeSceneMode]"),u.NotifyScene&&u.NotifyScene.Modes&&(f.empty(),a.each(u.NotifyScene.Modes,function(a,b){f.append("<option value="+b+" t=w_"+b+"></option>")})),f.translation()},render:function(){var a=r.VideoInSceneMode[j][s].SceneMode;f.val(a)},onChangeSceneMode:function(a){var b=d.$(a.target),c=b.val();r.VideoInSceneMode[j][s].SceneMode=c,l("VideoInSceneMode","SceneMode",c)}})})}),define("camera_attr_thermal",function(require,a,b){require("jsCore/modules/cameraTPC");var c=null;b.exports=e.extend({init:function(){c=i.$("#camera_attr_tBox").cameraTPC()},render:function(){c.cameraTPC("render")},onDelete:function(){c.cameraTPC("onDelete")},leave:function(){c.cameraTPC("leave")},onDefaultT:function(){c.cameraTPC("onDefaultT")},onRefreshT:function(){c.cameraTPC("onRefreshT")},onSaveT:function(){c.cameraTPC("onSaveT")}})})}),define("camera_cfg",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase");require("jsCore/modules/timeDrag");var f=null,g=null,h=0;c.exports=e.extend({init:function(){f=this,f.$("[name=cfg_mode]").click(function(b){var c=a(b.target),d=c.attr("mode");f.$("[mode-for][mode-for!="+d+"]").hide(),f.$("[mode-for="+d+"]").show()}),f.$("#cfg_timeDrag").timeDrag(),f.render()},render:function(){f._getConfig(!1)},onRefresh:function(){return f._getConfig(!0),!1},onDefault:function(){return d.ConfigManager.getDefault("VideoInMode").done(function(a){g=a,f._render(),f.tip("success","Defaultsuccess")}).fail(function(){f.tip("error","Defaultfailure")}),!1},onSave:function(){g[h].Config.length=0;var a=f.$("[name=cfg_mode]:checked").attr("mode");if("fulltime"===a)g[h].Mode=0,g[h].Config[0]=f.$("#cfg_daynight").val()-0,g[h].TimeSection[0][1]="0 00:00:00-23:59:59";else if("normal"===a)g[h].Mode=0,g[h].Config[0]=2,g[h].TimeSection[0][1]="0 00:00:00-23:59:59";else if("switch"===a){g[h].Mode=1,g[h].Config.push(0),g[h].Config.push(1);var b=f.$("#cfg_timeDrag").timeDrag("startTime"),c=f.$("#cfg_timeDrag").timeDrag("endTime");if(b===c)return f.tip("warning","SunTimeError");g[h].TimeSection[0][0]="1 "+b+"-"+c,g[h].TimeSection[0][1]="0 00:00:00-00:00:00"}return d.ConfigManager.setConfig("VideoInMode",g).done(function(){f.tip("success","Succeed in saving configure")}).fail(function(){f.tip("error","Saving failure")}),!1},_getConfig:function(a){d.ConfigManager.getConfig("VideoInMode").done(function(b){g=b,f._render(),a&&f.tip("success","Operateingsuccess")}).fail(function(){f.tip("error","Operateingfailure")})},_render:function(){if(f.$("#cfg_daynight").val(0),0===g[h].Mode)switch(g[h].Config[0]){case 0:f.$("[mode=fulltime]").prop("checked",!0).click();break;case 1:f.$("[mode=fulltime]").prop("checked",!0).click(),f.$("#cfg_daynight").val(1);break;case 2:f.$("[mode=normal]").prop("checked",!0).click()}else f.$("[mode=switch]").prop("checked",!0).click();var a=g[h].TimeSection[0][0].split(" ")[1];f.$("#cfg_timeDrag").timeDrag("startTime",a.split("-")[0]),f.$("#cfg_timeDrag").timeDrag("endTime",a.split("-")[1])}})}),define("camera_focus",function(require,a,b){require("jsCore/modules/zoomFocus");var c=require("jsCore/pageBase"),d=null;b.exports=c.extend({init:function(){d=this,d.$("#c_f_zoomfocus").zoomFocus(),d.render()},render:function(){plugin.cover("#c_f_video",function(a){plugin.SetRegionNum(0),plugin.SetModuleMode(1),plugin.open(),a&&d.$("#c_f_zoomfocus").zoomFocus("render")}),d.$("#c_f_zoomfocus").zoomFocus("render")},leave:function(){d.$("#c_f_zoomfocus").zoomFocus("leave"),plugin.hide()}})}),define("camera_steady",function(require,a,b){var c=require("jsCore/rpc"),d=require("jsCore/pageBase"),e=require("jsCore/modules/timeSection"),f=null,g=null,h=null,i=null,j=null,k={};b.exports=d.extend({init:function(){f=this,g=f.$("[sel-for=onSteadyMode]"),h=f.$("#camera_steady_timeM"),i=f.$("#camera_steady_holdM"),j=f.$("[cfg=Bright]").numberfield({min:1,max:255,allowDecimal:!1,allowNegative:!1}),f.$("input[id^=camera_steady_]").click(f.onRadio),g.on("change",f._setModeOptions),f.render()},render:function(){f._getConfig(!1)},onSteadytmSet:function(){return k[1][0]&&k[1][0].Config&&k[1][0].Config.TimeSection&&e.open(k[1][0].Config.TimeSection).done(function(a){k[1][0].Config.TimeSection=a}),!1},onRadio:function(){var a=h.is(":checked"),b=i.is(":checked");a&&(f.$("#camera_steady_bright_wrap").show(),f.disabled("#camera_steady_bright_wrap",!1),f.$("#camera_steady_time_wrap").show(),h.prop("checked",!0),k[1][0].Config.AutoMode="Timing"),b&&(f.$("#camera_steady_bright_wrap").hide(),f.$("#camera_steady_time_wrap").hide(),i.prop("checked",!0),k[1][0].Config.AutoMode="Brightness")},onRefresh:function(){return f._getConfig(!0),!1},onDefault:function(){return c.ConfigManager.getDefault("DHRS").done(function(a){k=a,f._setModeOptions(),f._renderElements(),f.tip("success","Defaultsuccess")}).fail(function(){f.tip("error","Defaultfailure")}),!1},onConfirm:function(){return f._saveData(),c.ConfigManager.setConfig("DHRS",k).done(function(){f.tip("success","Succeed in saving configure")}).fail(function(){f.tip("error","Saving failure")}),!1},_getConfig:function(a){c.ConfigManager.getConfig("DHRS").done(function(b){k=b,f._renderElements(),a&&f.tip("success","Operateingsuccess")}).fail(function(){f.tip("error","Operateingfailure")})},_renderElements:function(){"Timing"==k[1][0].Config.AutoMode?h.prop("checked",!0):i.prop("checked",!0),"Close"==k[1][0].Config.Mode?(g.val("Close"),f.$("#camera_steady_bright_wrap").show(),f.disabled("#camera_steady_bright",!0),f.$("#camera_steady_auto_wrap").hide(),f.$("#camera_steady_time_wrap").hide()):"Open"==k[1][0].Config.Mode?(g.val("Open"),f.$("#camera_steady_bright_wrap").show(),f.disabled("#camera_steady_bright",!1),f.$("#camera_steady_time_wrap").hide()):"Auto"==k[1][0].Config.Mode&&(g.val("Auto"),f.$("#camera_steady_auto_wrap").show(),h.prop("checked")?(f.$("#camera_steady_bright_wrap").show(),f.disabled("#camera_steady_bright",!1),f.$("#camera_steady_time_wrap").show()):(f.$("#camera_steady_bright_wrap").hide(),f.disabled("#camera_steady_bright",!1),f.$("#camera_steady_time_wrap").hide())),f.$("#camera_steady_bright").numberfield("value",k[1][0].Config.Brightness),"Timing"==k[1][0].Config.AutoMode&&h.prop("checked",!0)||i.prop("checked",!0)},_setModeOptions:function(){"Close"==g.val()?(f.$("#camera_steady_bright_wrap").show(),f.disabled("#camera_steady_bright",!0),f.$("#camera_steady_auto_wrap").hide(),f.$("#camera_steady_time_wrap").hide()):"Open"==g.val()?(f.$("#camera_steady_bright_wrap").show(),f.disabled("#camera_steady_bright",!1),f.$("#camera_steady_auto_wrap").hide(),f.$("#camera_steady_time_wrap").hide()):(f.$("#camera_steady_auto_wrap").show(),h.prop("checked")?(f.$("#camera_steady_bright_wrap").show(),f.disabled("#camera_steady_bright",!1),f.$("#camera_steady_time_wrap").show()):(f.$("#camera_steady_bright_wrap").hide(),f.disabled("#camera_steady_bright",!1),f.$("#camera_steady_time_wrap").hide()))},_saveData:function(){f._setModeOptions(),k[1][0].Config.Mode=g.val(),"Timing"==k[1][0].Config.AutoMode?h.prop("checked",!0):i.prop("checked",!0),k[1][0].Config.Brightness=f.$("#camera_steady_bright").numberfield("value")
}})}),define("camera_flick",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=require("jsCore/plugin"),g=require("jsCore/ability");common=require("common/common"),require("widget/js/dui.slider");var h,i=null,j=0,k=0,l="",m={};c.exports=e.extend({init:function(){i=this,i.$("#flick_nY").numberfield({min:0,max:8191,allowDecimal:!1,allowNegative:!1}).blur(function(){i._pluginChange()}),f.CheckFuncSupport(2).done(function(b){b?a("#c_f_fullscreen").show():a("#c_f_fullscreen").hide()}),i.$("input[mode]").click(i.onRadio),i._initSlider(),i.render()},render:function(){f.cover("#flick_video",function(){f.SetRegionNum(0),f.SetModuleMode(1),f.EnableVideoAnalyseModule(!0),f.open()}),f.addEvent("VideoAnalyzeConfig",function(a){k=JSON.parse(a).EventParam.ShapeID,f.GetVideoAnalyseShapeConfigData(k).done(function(a){a&&(a=JSON.parse(a).Line1[0][1],i.$("#flick_nY").numberfield("value",a))})}),i._getConfig(!1)},_pluginChange:function(){f.DeleteAllVideoAnalyseShape(),h=i.$("#flick_nY").numberfield("value"),l='{"Line1":[[0,'+h+"],[8191,"+h+"]]}",f.CreateMainVideoAnalyseShape(0,"LineShapeEvent","LineShape","Line1",l,"MovedHLine").done(function(){})},_getConfig:function(a){d.ConfigManager.getConfig("VideoInFlicker").done(function(b){m=b,i._render(),a&&i.$("#flicker_tip").tip("success",tl("Operateingsuccess"))}).fail(function(){i.$("#flicker_tip").tip("error",tl("Operateingfailure"))})},_render:function(){i.$("[data]").each(function(a,b){var c=i.$(b),d=c.attr("key");c.slider("value",parseInt(m[0][d][a]))}),"Open"==m[0].Mode&&i.$("[mode=on]").prop("checked",!0),"Close"==m[0].Mode&&i.$("[mode=off]").prop("checked",!0),"Auto"==m[0].Mode&&i.$("[mode=auto]").prop("checked",!0),i.$("#flick_nY").numberfield("value",m[0].YCoordinate[0]),i._pluginChange()},_initSlider:function(){g.get("VideoInputCapsEx").always(function(a){j=a&&a.Flicker&&a.Flicker.MaxAmplitude,i.$("[data]").slider({min:0,max:j||64,complete:function(a,b){var c=i.$(a.target);m[0].Amplitude[parseInt(c.attr("data"))]=b.value}})})},onFullScreen:function(){return f.SetFullScreen(),!1},leave:function(){f.addEvent("VideoAnalyzeConfig",null),f.DeleteAllVideoAnalyseShape(),f.hide()},onRadio:function(){i.$("[mode=on]").prop("checked")?m[0].Mode="Open":i.$("[mode=off]").prop("checked")?m[0].Mode="Close":i.$("[mode=auto]").prop("checked")&&(m[0].Mode="Auto")},onDefault:function(){d.ConfigManager.getDefault("VideoInFlicker").done(function(a){m=a,i._render(),i.$("#flicker_tip").tip("success",tl("Defaultsuccess"))}).fail(function(){i.$("#flicker_tip").tip("error",tl("Defaultfailure"))})},onRefresh:function(){i._getConfig(!0)},onSave:function(){m[0].YCoordinate[0]=i.$("#flick_nY").numberfield("value"),m[0].YCoordinate[1]=i.$("#flick_nY").numberfield("value"),d.ConfigManager.setConfig("VideoInFlicker",m).done(function(){i.$("#flicker_tip").tip("success",tl("Succeed in saving configure"))}).fail(function(){i.$("#flicker_tip").tip("error",tl("Saving failure"))})}})}),define("camera_matrixSwitch",function(require,a,b){var c=require("jsCore/rpc"),d=require("jsCore/pageBase"),e=null,f={};b.exports=d.extend({init:function(){e=this,$matrixSwitch=e.$("[sel-for=onSelMatrixSwitch]"),$matrixSwitch.on("change",e._setMatrixSwitch),e.render()},render:function(){e._getConfig(!1)},onRefresh:function(){return e._getConfig(!0),!1},onDefault:function(){return c.ConfigManager.getDefault("CSCMatrixSwitch").done(function(a){f=a,e._renderElements(),e.tip("success","Defaultsuccess")}).fail(function(){e.tip("error","Defaultfailure")}),!1},onConfirm:function(){return e._setMatrixSwitch(),c.ConfigManager.setConfig("CSCMatrixSwitch",f).done(function(){e.tip("success","Succeed in saving configure")}).fail(function(){e.tip("error","Saving failure")}),!1},_getConfig:function(a){c.ConfigManager.getConfig("CSCMatrixSwitch").done(function(b){f=b,e._renderElements(),a&&e.tip("success","Operateingsuccess")}).fail(function(){e.tip("error","Operateingfailure")})},_renderElements:function(){"BT601"===f[0].RGBTOYUVMatrix?$matrixSwitch.val("BT601"):"BT709"===f[0].RGBTOYUVMatrix&&$matrixSwitch.val("BT709")},_setMatrixSwitch:function(){"BT601"===$matrixSwitch.val()?f[0].RGBTOYUVMatrix="BT601":"BT709"===$matrixSwitch.val()&&(f[0].RGBTOYUVMatrix="BT709")}})})}(jQuery);
!function(a){define(function(require,b,c){c.exports=require("jsCore/pageTab"),c.exports.prototype.pla_hs=-1!==a.inArray("LechangePro",webApp.VSPs)}),define("pla_gays",function(require,a,b){var c=require("jsCore/pageBase"),d=require("jsCore/rpc"),e=(require("common/common"),null),f=null,g=null,h=0;b.exports=c.extend({init:function(){e=this,g=0;var a=e.$("[sel-for=onSelectAlarm]");if(webApp.ALARM_IN_NUMBER<=0)a.parent().remove(),e.$("#p_g_chnNo2").parent().remove();else if(1===webApp.ALARM_IN_NUMBER)a.hide();else{a.empty();for(var b=0;b<webApp.ALARM_IN_NUMBER;b++)a.append("<option value="+b+">"+(tl("w_Alarm")+(b+1))+"</option>")}e.$("#p_g_sipNo,#p_g_sipDom,#p_g_devNo,#p_g_pswd,#p_g_code,#p_g_id,#p_g_chnNo1").textfield(),e.$("#p_g_chnNo2").textfield().blur(function(){f.alarmInfo[g].id=e.$("#p_g_chnNo2").textfield("value")}),e.$("#p_g_sipPort,#p_g_localPort,#p_g_times").numberfield({max:65535,min:0,allowDecimal:!1,allowNegative:!1}),e.$("#p_g_life").numberfield({max:3600,min:30,allowDecimal:!1,allowNegative:!1}),e.$("#p_g_beat").numberfield({max:3600,min:10,allowDecimal:!1,allowNegative:!1}),e.$("#p_g_sipIP").ipfield(),e.render()},render:function(){this._getConfig()},_render:function(){e.$("#p_g_enable").prop("checked",f.Enable),e.$("#p_g_sipNo").textfield("value",f.sipSvrId),e.$("#p_g_sipDom").textfield("value",f.domain),e.$("#p_g_sipIP").ipfield("value",f.sipSvrIp),e.$("#p_g_sipPort").numberfield("value",f.sipSvrPort),e.$("#p_g_devNo").textfield("value",f.deviceId),e.$("#p_g_pswd").textfield("value",f.password),e.$("#p_g_localPort").numberfield("value",f.localSipPort),e.$("#p_g_life").numberfield("value",f.sipRegExpires),e.$("#p_g_beat").numberfield("value",f.keepAliveCircle),e.$("#p_g_times").numberfield("value",f.maxTimeoutTimes),e.$("#p_g_code").textfield("value",f.civilCode),e.$("#p_g_id").textfield("value",f.intervideoID),e.$("#p_g_chnNo1").textfield("value",f.channelInfo[0].id),e.$("#p_g_level1").val(f.channelInfo[0].alarmLevel),e.$("[sel-for=onSelectAlarm]").val(g).change();var a=e.$("[sel-for=onSelectChannel]");a.empty();for(var b=0;b<f.channelSum;b++)a.append("<option value="+b+">"+(tl("w_Channel")+(b+1))+"</option>");a.val(h),f.channelSum>1&&a.removeClass("fn-hide")},onSelectAlarm:function(a){g=e.$(a.target).val()-0,e.$("#p_g_chnNo2").textfield("value",f.alarmInfo[g].id),e.$("[sel-for=onSelectAlarmLevel]").val(f.alarmInfo[g].alarmLevel)},onSelectAlarmLevel:function(a){f.alarmInfo[g].alarmLevel=e.$(a.target).val()-0},onSelectChannel:function(a){f.channelInfo[h].id=e.$("#p_g_chnNo1").textfield("value"),f.channelInfo[h].alarmLevel=e.$("#p_g_level1").val()-0,h=e.$(a.target).val()-0,e.$("#p_g_chnNo1").textfield("value",f.channelInfo[h].id),e.$("#p_g_level1").val(f.channelInfo[h].alarmLevel)},_getConfig:function(a){d.ConfigManager.getConfig("VSP_GAYS").done(function(b){f=b,e._render(),a&&e.tip("success","Operateingsuccess")}).fail(function(){e.tip("error","Operateingfailure")})},onSave:function(){f.Enable=e.$("#p_g_enable").prop("checked"),f.sipSvrId=e.$("#p_g_sipNo").textfield("value"),f.domain=e.$("#p_g_sipDom").textfield("value"),f.sipSvrIp=e.$("#p_g_sipIP").ipfield("value"),f.sipSvrPort=e.$("#p_g_sipPort").numberfield("value"),f.deviceId=e.$("#p_g_devNo").textfield("value"),f.password=e.$("#p_g_pswd").textfield("value"),f.localSipPort=e.$("#p_g_localPort").numberfield("value"),f.sipRegExpires=e.$("#p_g_life").numberfield("value"),f.keepAliveCircle=e.$("#p_g_beat").numberfield("value"),f.maxTimeoutTimes=e.$("#p_g_times").numberfield("value"),f.civilCode=e.$("#p_g_code").textfield("value"),f.intervideoID=e.$("#p_g_id").textfield("value"),f.channelInfo[h].id=e.$("#p_g_chnNo1").textfield("value"),f.channelInfo[h].alarmLevel=e.$("#p_g_level1").val()-0,d.ConfigManager.setConfig("VSP_GAYS",f).done(function(a){e.tip("success","Succeed in saving configure"),webApp.isNeedReboot(a)&&webApp.reboot("The configration take effect! The device is restarting now,please reconnect later...")}).fail(function(){e.tip("error","Saving failure")})},onRefresh:function(){this._getConfig(!0)},onDefault:function(){d.ConfigManager.getDefault("VSP_GAYS").done(function(a){f=a,g=0,h=0,e._render(),e.tip("success","Defaultsuccess")}).fail(function(){e.tip("error","Defaultfailure")})}})}),define("pla_hs",function(require,a,b){var c=require("jsCore/pageBase"),d=require("jsCore/rpc"),e=(require("common/common"),null),f=null;b.exports=c.extend({init:function(){e=this,e.$("#p_h_srvIp").textfield(),d.MagicBox.getSerialNo().done(function(a){e.$("#p_h_sriNum").text(a),d.MagicBox.getDeviceType().done(function(b){d.MagicBox.getSystemInfoNew().done(function(c){var d=c["2DCode"];""!==d?(e.$("#p_h_CodeContainer").removeClass("fn-hide"),e.$("#p_h_vrfCode").text(d),e.$("#p_h_qrCode").html(create_qrcode("{SN:"+a+",DT:"+b+",RC:"+d+"}"))):e.$("#p_h_qrCode").html(create_qrcode("{SN:"+a+",DT:"+b+"}"))})})}),e.render()},render:function(){this._getConfig()},_render:function(){e.$("#p_h_enable").prop("checked",f.Enable),e.$("#p_h_srvIp").textfield("value",f.RsServerIP),e.$("#p_h_state").text(tl(f.Online?"w_online":"w_not_online")).removeClass().addClass(f.Online?"ui-tip-green":"ui-tip-red")},_getConfig:function(a){d.ConfigManager.getConfig("VSP_HS").done(function(b){f=b,e._render(),a&&e.tip("success","Operateingsuccess")}).fail(function(){e.tip("error","Operateingfailure")})},onSave:function(){f.Enable=e.$("#p_h_enable").prop("checked"),d.ConfigManager.setConfig("VSP_HS",f).done(function(){e.tip("success","Succeed in saving configure")}).fail(function(){e.tip("error","Saving failure")})},onRefresh:function(){this._getConfig(!0)},onDefault:function(){d.ConfigManager.getDefault("VSP_HS").done(function(a){var b=f.Online;f=a,f.Online=b,e._render(),e.tip("success","Defaultsuccess")}).fail(function(){e.tip("error","Defaultfailure")})}})})}(jQuery);
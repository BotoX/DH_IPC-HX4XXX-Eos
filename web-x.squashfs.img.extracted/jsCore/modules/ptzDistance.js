!function(a){define(function(require,b,c){function d(b,c){var d=this;d.options=a.extend(!0,{},c),d.e=a(b).empty().append(g).translation(),d.$=function(a){return d.e.find(a)},d.curWin=0,d.$(".u-tab").tab()}var e=require("../plugin"),f=require("../rpc"),g=require("./ptzDistance.html");a.fn.ptzDistance=function(){var b=arguments[0],c=2<=arguments.length?Array.prototype.slice.call(arguments,1):[],e=this;return this.each(function(){var f=a(this),g=f.data("ptzDistance");if(g||f.data("ptzDistance",g=new d(f,b)),"string"===a.type(b)&&a.isFunction(g[b])){var h=g[b].apply(g,c);if(void 0!==h)return e=h,!1}}),e},d.prototype.onRun=function(){var a=this,b=a.$("a[btn-for=onRun]"),c=b.attr("data-index")-0;1===c?(e.ActiveCrossLocation(!0),b.attr("data-index",2).text(tl("startLaserDistMeasure")),a.$("#ptz_dstText").hide()):f.LaserDistMeasure.getDistance(a.curWin).done(function(b){a.$("#ptz_dstText").text(tl("distance")+": "+b+" "+tl("meters")).show()})},d.prototype.onClose=function(){var a=this,b=a.$("a[btn-for=onRun]"),c=b.attr("data-index")-0;2===c&&(e.ActiveCrossLocation(!1),b.attr("data-index",1).text(tl("readyLaserDistMeasure")),a.$("#ptz_dstText").hide())},d.prototype.changeWin=function(a){var b=this;(0===a||1===a||2===a)&&(b.curWin=a)},d.prototype.getStatus=function(){var a=this;return a.$("a[btn-for=onRun]").attr("data-index")-0!==1},d.prototype.leave=function(){var a=this,b=a.$("a[btn-for=onRun]"),c=b.attr("data-index")-0;1!==c&&(e.ActiveCrossLocation(!1),b.attr("data-index",1).text(tl("readyLaserDistMeasure")),a.$("#ptz_dstText").hide())},c.exports=d})}(jQuery);
!function(a){define(function(require,b){function c(b,c){var g=this,h=g.e=b,i=g.o=a.extend(!0,{},k,c);h.html(j).translation(),i.holiday||h.find("[holiday]").remove(),h.find("[section]").timefield(),h.find("#schedule").schedule({holiday:i.holiday,type:i.type,change:function(a,b){i.value=b,f.call(g,i.day)}}),h.find("[chktype=only]").hide(),h.find("[chktype][chktype!=only]").parent().hide(),1===i.type.length&&"general"===i.type[0]?h.find("[chktype=only]").show():a.each(i.type,function(a,b){h.find("[chktype="+b+"]").parent().show()}),e.call(g),f.call(g,g.o.day),d.call(g)}function d(){var b=this,c=b.e;c.find(":checkbox[id=all]").click(function(){c.find(":checkbox[day]:not(:disabled)").prop("checked",a(this).prop("checked"))}),c.find(":checkbox[day]").click(function(){c.find(":checkbox[id=all]").prop("checked",c.find(":checkbox[day]").length===c.find(":checkbox[day]:checked").length)}),c.find(":checkbox[chktype]").click(function(){g.call(b)}),c.find("a[day]").click(function(){return b.o.day=a(this).attr("day")-0,f.call(b,b.o.day),!1}),c.find(":text").keyup(function(b){var d=a(b.target),e=d.closest("div[section]").attr("section")-0,f=d.closest("div[section]").attr("ii")-0,g=d.data("index");if(39===b.which)return 0===f&&2===g?c.find("div[section="+e+"][ii=1]").children(":text:eq(0)").select():1===f&&2===g&&5>e?c.find("div[section="+(e+1)+"][ii=0]").children(":text:eq(0)").select():(5!==e||1!==f||2!==g)&&c.find("div[section="+e+"][ii="+f+"]").children(":text:eq("+(g+1)+")").select(),!1;if(37===b.which)return 1===f&&0===g?c.find("div[section="+e+"][ii=0]").children(":text:eq(2)").select():0===f&&0===g&&e>0?c.find("div[section="+(e-1)+"][ii=1]").children(":text:eq(2)").select():(0!==e||0!==f||0!==g)&&c.find("div[section="+e+"][ii="+f+"]").children(":text:eq("+(g-1)+")").select(),!1;if(38===b.which)return e>0&&c.find("div[section="+(e-1)+"][ii="+f+"]").children(":text:eq("+g+")").select(),!1;if(40===b.which)return 5>e&&c.find("div[section="+(e+1)+"][ii="+f+"]").children(":text:eq("+g+")").select(),!1;if(2===d.val().length){if(0===f&&2===g)return c.find("div[section="+e+"][ii=1]").children(":text:eq(0)").select(),!1;if(1===f&&2===g&&5>e)return c.find("div[section="+(e+1)+"][ii=0]").children(":text:eq(0)").select(),!1}}).blur(function(d){var e=a(d.target),f=e.closest("div[section]"),h=f.attr("section")-0,i=f.attr("ii")-0,j=[];return j[i]=f.timefield("value").split(":"),j[(i+1)%2]=c.find("div[section="+h+"][ii="+(i+1)%2+"]").timefield("value").split(":"),3600*j[0][0]+60*j[0][1]+1*j[0][2]>3600*j[1][0]+60*j[1][1]+1*j[1][2]&&c.find("div[section="+h+"][ii=1]").timefield("value",j[0].join(":")),g.call(b),!1})}function e(){var a=this,b=a.e.find("#schedule");b.schedule("setTimeSchedules",a.o.value),a.o.value=b.schedule("getTimeSchedules")}function f(b){var c=this,d=c.e;d.find(":checkbox[id=all]").prop("checked",!1),d.find(":checkbox[day]").prop({checked:!1,disabled:!1}).next("span").removeClass(" fn-color-red"),d.find(":checkbox[day="+b+"]").prop({checked:!0,disabled:!0}).next("span").addClass(" fn-color-red"),d.find("span[t^=TimeSection]").closest(".ui-form-item").each(function(d,e){h.call(c,a(e),c.o.value[b][d])})}function g(){var b=this,c=b.e,d=[];c.find("span[t^=TimeSection]").closest(".ui-form-item").each(function(c,e){d.push(i.call(b,a(e)))}),c.find(":checkbox[day]:checked").each(function(c,e){a.extend(!0,b.o.value[a(e).attr("day")],d)}),e.call(b)}function h(b,c){var d=this,e=c.trim().split(" "),f=e[0]-0,g=e[1].split("-");1===d.o.type.length&&"general"===d.o.type[0]?b.find("[chktype=only]").prop("checked",f):(b.find("[chktype=general]").prop("checked",1&f),b.find("[chktype=motion]").prop("checked",2&f),b.find("[chktype=alarm]").prop("checked",4&f)),b.find("[section]").each(function(b,c){a(c).timefield("value",g[b])})}function i(a){var b=this.o.type,c=0;return 1===b.length&&"general"===b[0]?a.find("[chktype=only]").prop("checked")&&(c|=1):(a.find("[chktype=general]").prop("checked")&&(c|=1),a.find("[chktype=motion]").prop("checked")&&(c|=2),a.find("[chktype=alarm]").prop("checked")&&(c|=4)),c+" "+a.find("[section]:eq(0)").timefield("value")+"-"+a.find("[section]:eq(1)").timefield("value")}require("widget/js/dui.schedule");var j=require("./timeSection.html"),k={holiday:!1,day:0,type:["general"],value:[["7 04:40:54-07:16:21","7 15:19:04-18:32:42","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["7 03:02:43-05:02:43","7 07:38:10-09:43:37","7 12:46:21-14:38:10","7 18:54:31-20:40:53","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["7 03:27:16-05:27:16","7 10:29:59-12:32:43","7 18:16:21-19:46:20","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["7 04:16:21-06:43:37","7 17:32:42-19:02:42","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["7 05:19:05-07:27:16","7 15:57:15-18:08:10","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["7 06:21:48-08:29:59","7 14:24:32-16:32:42","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["7 08:21:48-10:24:32","7 12:38:10-14:43:37","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"],["7 10:29:59-12:21:48","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59","0 00:00:00-23:59:59"]]};a.fn.timesection=function(){var b=arguments[0],d=2<=arguments.length?Array.prototype.slice.call(arguments,1):[],e=this;return this.each(function(){var f=a(this),g=f.data("timesection");if(g||f.data("timesection",g=new c(f,b)),"string"===a.type(b)&&a.isFunction(g[b])){var h=g[b].apply(g,d);if(void 0!==h)return e=h,!1}}),e},c.prototype.value=function(b,c){var d=this;return b?(d.o.value=a.extend(!0,[],b),d.o.day=0,e.call(d),f.call(d,d.o.day),d.e.prev().find("#timeSctionTitle").text(c&&c.title?tl(c.title):tl("w_TimeAlarmPeriod")),d.e):(g.call(d),a.extend(!0,[],d.o.value))},c.prototype.setType=function(a){var b=this.e;b.find("#schedule").schedule("setType",a)},function(){var d='<div class="u-dialog fn-width780">                                <div class="u-dialog-head">                                    <h1 t="w_TimeAlarmPeriod" id="timeSctionTitle"></h1>                                    <i class="i-close" data-action="close"></i>                                </div>                                <div class="u-dialog-content"></div>                                <div class="u-dialog-foot">                                    <a class="u-button" data-action="confirm" t="w_Confirm"></a>                                    <a class="u-button" data-action="close" t="w_Cancel"></a>                                </div>                             </div>',e=a(d).translation().dialog({confirm:function(){f.resolve(g.value()),e.dialog("close")},close:function(){f.reject()}}).appendTo(document.body),f=null,g=new c(e.find(".u-dialog-content"));b.open=function(b,c){return a.Deferred(function(a){f=a,g.value(b,c),e.dialog("show")}).promise()}}()})}(jQuery);
!function(a){define(function(require,b,c){function d(b,c){var d=this;d.options=a.extend({},g,c),d.e=a(b),d.$=function(a){return d.e.find(a)},d.e.html(e).translation(),d.$(".ui-label").css("width",d.e.attr("ui-label")),d.$(".ui-select").css("width",d.e.attr("ui-select"))}var e=require("./ptzPreset.html"),f=require("../rpc"),g={channel:0,isShowIVSPreset:!1};a.fn.ptzPreset=function(){var b=arguments[0],c=2<=arguments.length?Array.prototype.slice.call(arguments,1):[],e=this;return this.each(function(){var f=a(this),g=f.data("ptzPreset");if(g||f.data("ptzPreset",g=new d(f,b)),"string"===a.type(b)&&a.isFunction(g[b])){var h=g[b].apply(g,c);if(void 0!==h)return e=h,!1}}),e},d.prototype.render=function(){var b=this;b.def=a.Deferred(),-1===webApp.DeviceType.indexOf("SD")?(b.e.hide(),b.$("#p_preset").append("<option value = '0'>0</option>"),b.def.resolve()):f.PTZ.getPresets(b.options.channel).done(function(c){if(b.$("#p_preset").empty(),null!=c&&0!=c.length&&webApp.DeviceType.contains("SD")){var d=null;b.e.show(),webApp.PresetID||f.ConfigManager.getConfig("PtzMovement").done(function(a){for(i=0;i<a.length;i++){var b=a[i];if("Preset"==b.Function){webApp.PresetID=b.Index;break}webApp.PresetID=0}});var e=!1;a.each(c,function(a,c){d=b.options.isShowIVSPreset?1===c.Type?"fn-color-ivsGreen":"fn-color-black":"",b.$("#p_preset").append("<option value = '"+c.Index+"' title = '"+c.Name+"' class = '"+d+"'>"+c.Name+"</option>"),c.Index==webApp.PresetID&&(e=!0)}),e?b.$("#p_preset").val(webApp.PresetID):(b.$("#p_preset").selectedIndex=0,webApp.PresetID=b.$("#p_preset").val()-0),b.$("#p_preset option:selected").hasClass("fn-color-ivsGreen")?b.$("#p_preset").addClass("fn-color-ivsGreen"):b.$("#p_preset").removeClass("fn-color-ivsGreen"),f.PTZ.gotoPreset(b.$("#p_preset").val()-0,null,b.options.channel)}else b.e.hide(),b.$("#p_preset").append("<option value = '0'>0</option>");b.def.resolve()}).fail(function(){b.def.reject()})},d.prototype.change=function(b,c,d,e){var g=this;return d=d||null,e=e||0,a.isFunction(b)&&a.isFunction(c)&&g.$("#p_preset").change(function(){b(),f.PTZ.gotoPreset(g.$("#p_preset").val()-0,d,e),webApp.PresetID=g.$("#p_preset").val()-0,g.$("#p_preset option:selected").hasClass("fn-color-ivsGreen")?g.$("#p_preset").addClass("fn-color-ivsGreen"):g.$("#p_preset").removeClass("fn-color-ivsGreen"),c()}),g.e},d.prototype.get=function(){var a=this;return a.$("#p_preset").val()-0},d.prototype.set=function(a,b,c){var d=this;return c=c||0,d.$("#p_preset").val(a),b=b||null,f.PTZ.gotoPreset(a,b,c),webApp.PresetID=a,d.e},d.prototype.isIVSPreset=function(a){var b=this,c=!1;return a=a-0||0,b.$("#p_preset option").each(function(d,e){var f=b.$(e),g=f.val()-0;return a===g?(c=f.hasClass("fn-color-ivsGreen"),!1):void 0}),c},d.prototype.complete=function(){var a=this;return a.def.promise()},c.exports=d})}(jQuery);
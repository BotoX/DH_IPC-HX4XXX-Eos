!function(a){define(function(require){function b(b,c){var d=this;d.options=a.extend({},h,c),d.e=b.empty().append(e).translation(),d.init()}function c(){var b=a(this);b.siblings().removeClass("current"),b.addClass("current");var c=b.attr("data-for")-0;d.SetTrackMode(c?0:1),d.SetShowMultiScreenMode(c),"Original Rate"==webApp.DisplayMode&&(0==c&&d.SetShowMode(1),0!=c&&d.SetShowMode(2))}var d=require("../plugin"),e=require("./triggerTrack.html"),f=require("../rpc"),g=require("../ability"),h=null,i={"3M":["0","4","5"],"4M":["0","1","2"],"4K":["0","1","2"]};a.fn.triggerTrack=function(){var c=arguments[0],d=2<=arguments.length?Array.prototype.slice.call(arguments,1):[],e=this;return this.each(function(){var f=a(this),g=f.data("triggerTrack");if(g||f.data("triggerTrack",g=new b(f,c)),"string"===a.type(c)&&a.isFunction(g[c])){var h=g[c].apply(g,d);if(void 0!==h)return e=h,!1}}),e},b.prototype.init=function(){var b=this;b.$(".u-tab").tab(),b.$(".triggerTrack_list").delegate("li","click",c),b.$("#trackTime").numberfield({min:0,max:300,allowDecimal:!1,allowNegative:!1}).on("blur",function(){d.SetTrackTimeout(b.$("#trackTime").numberfield("value"))});var e="4K";g.get("VideoInputCaps").always(function(c){c&&c.SubChannel&&(e=c.SubChannel+"M"),b.$(".triggerTrack_list li").each(function(){var b=a(this).attr("data-for");a.inArray(b,i[e])<0&&a(this).css("display","none")})})},b.prototype.render=function(){var b=this;f.ConfigManager.getConfig("VideoAnalyseRule").done(function(b){a.each(b,function(b,c){a.each(c,function(a,b){"Normal"==b.Class&&d.SetRuleTrackAlarm(b.Name,!!b.TrackEnable)})})}),b.$(".triggerTrack_list li:first").trigger("click")},b.prototype.getScreenMode=function(){var a=this,b=a.$(".triggerTrack_list .current");return b.length>0?b.attr("data-for")-0:0},b.prototype.leave=function(){this.$(".triggerTrack_list li:first").trigger("click")},b.prototype.$=function(a){return this.e.find(a)}})}(jQuery);
!function(a){define(function(require,b,c){var d=require("jsCore/pageBase"),e=require("jsCore/plugin");c.exports=d.extend({init:function(){var b=this,c=b.element.children(".u-tab"),d=c.find("[condition]"),e=b.element.children(".u-tab-content"),f=[];b.tabs={},b.current=null,a.isFunction(b.getCondition)&&b.getCondition(),d.each(function(c,d){var g=a(d),h=g.attr("data-for"),i=b[h];void 0!==i&&("function"===a.type(i)&&(i=i()),"boolean"===a.type(i)?i?g.show():(g.remove(),e.find("[data-page="+h+"]").remove()):"function"===a.type(i.done)&&(i.done(function(a){a?g.show():(g.remove(),e.find("[data-page="+h+"]").remove())}),f.push(i)))}),a.when.apply(null,f).done(function(){c.tab({switched:function(a,c){var d=b.tabs[c.from],f=b.tabs[c.to];d&&d.leave(),f?(f.render(),b.current=f):require.async(c.to,function(a){b.tabs[c.to]=new a({element:e.find("[data-page="+c.to+"]")}),b.current=b.tabs[c.to]})}})})},render:function(){this.current&&this.current.render()},leave:function(){this.current&&this.current.leave(),e.close()},destory:function(){a.each(this.tabs,function(b,c){a.isFunction(c.destory)&&c.destory()}),this.current=null,this.tabs=null}})})}(jQuery);
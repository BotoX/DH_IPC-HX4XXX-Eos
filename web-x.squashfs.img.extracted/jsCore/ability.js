!function(a){define(["jsCore/rpc"],function(require,b,c){function d(b){var c=this;K("NetApp","getNetInterfaces",arguments[1]).done(function(d){if(a.isArray(d))switch(b){case"3G":c.resolve(!!a.grep(d,function(a){return"3G"===a.Name&&-1===a.Type.indexOf("TD-LTE")&&-1===a.Type.indexOf("FDD-LTE")}).length);break;case"4G":c.resolve(!!a.grep(d,function(a){return-1!==a.Type.indexOf("TD-LTE")||-1!==a.Type.indexOf("FDD-LTE")}).length);break;case"WIFI":c.resolve(!!a.grep(d,function(a){return"Wireless"===a.Type&&"eth2"===a.Name}).length);break;default:c.resolve(!1)}else c.resolve(!1)}).fail(function(){c.resolve(!1)})}function e(a){var b=this;K("Alarm","getAlarmCaps",arguments[1]).done(function(c){if(c)switch(a){case"AlarmPir":b.resolve(c.AlarmPir);break;case"Flash":b.resolve(c.Flash);break;default:b.resolve(!1)}else b.resolve(!1)}).fail(function(){b.resolve(!1)})}function f(){var b=this;K("MagicBox","getDeviceType",arguments[1]).done(function(c){b.resolve("string"===a.type(c)?c:"")}).fail(function(){b.resolve("")})}function g(){var a=this;K("OSDManager","getCustomCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function h(){var a=this;K("MagicBox","getSerialNo",arguments[1]).done(a.resolve).fail(function(){a.resolve("")})}function j(){var b=this;K("MagicBox","getDeviceClass",arguments[1]).done(function(c){b.resolve("string"===a.type(c)?c:"")}).fail(function(){b.resolve("")})}function k(b){var c=this,d=O.indexOf(b);K("MagicBox","getProductDefinition",arguments[1],[O]).done(function(b){c.resolve(a.isArray(b)&&b[d].result&&b[d].params?b[d].params.definition:null)}).fail(function(){c.resolve(null)})}function l(){var a=this;K("VideoProcessManager","getCaps",arguments[1],["LDC"]).done(function(b){a.resolve(b.Support)}).fail(function(){a.resolve(!1)})}function m(){var a=this;K("Alarm","getInSlots",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function n(){var a=this;K("Alarm","getOutSlots",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function o(){var a=this;K("DevVideoInput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function p(){var a=this;K("DevVideoInput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function q(){var a=this;K("DevVideoInput","getCapsEx",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function r(){var a=this;K("WideViewControl","getCaps",arguments[1],[0,"WideViewControl"]).done(a.resolve).fail(function(){a.resolve(null)})}function s(){var a=this;K("Security","getEncryptInfo",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function t(a){var b=this;K("DevVideoInput","getCapsEx",arguments[1]).done(function(c){return c&&c.ImageStabilization&&c.ImageStabilization.Type?"OcxStabilization"===a?b.resolve(!!(4&c.ImageStabilization.Type)):"OpticsStabilization"===a?b.resolve(!!(2&c.ImageStabilization.Type)):"ElecStabilization"===a?b.resolve(!!(1&c.ImageStabilization.Type)):void 0:b.resolve(!1)}).fail(function(){b.resolve(!1)})}function u(){var a=this;K("DevAudioInput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function v(){var a=this;K("DevAudioInput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function w(){var a=this;K("DevAudioOutput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function x(){var a=this;K("DevAudioDetect","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function y(){var a=this;K("DevVideoDetect","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function z(){var a=this;K("DevAudioOutput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function A(){var a=this;K("DevVideoAnalyse","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function B(){var a=this;K("RecordManager","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function C(){var a=this;K("PTZ","getCurrentProtocolCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function D(){var a=this;K("FaceBoard","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function E(){var a=this,b=0;-1!==webApp.DeviceType.indexOf("SD")?K("PTZ","getPresets",arguments[1]).done(function(c){c?K("ConfigManager","getConfig",arguments[1],["PtzMovement"]).done(function(c){for(i=0;i<c.length;i++){var d=c[i];if("Preset"==d.Function){b=d.Index+1;break}b=0}a.resolve(b)}).fail(function(){a.resolve(b)}):a.resolve(b)}).fail(function(){a.resolve(b)}):a.resolve(b)}function F(b){var c=this;K("ConfigManager","getConfig",arguments[1],["SmartEncode"]).done(function(d){d&&d[0]&&d[0].Enable?ability.get("VideoInputCapsEx").done(function(d){var e=!1;if(d&&d.VideoInConflict&&d.VideoInConflict.IsConflict){var f;"DSPConflict"===b?f="DSP":"ROIConflict"===b?f="ROI":"ExtraConflict"===b?f="Extra2":"RotateConflict"===b?f="Rotate_90":"TVOutConflict"===b&&(f="TVOut"),a.each(d.VideoInConflict.ConflictTable,function(b,c){return-1!==a.inArray("SmartEnc",c)&&-1!==a.inArray(f,c)?(e=!0,!1):void 0})}c.resolve(e)}):c.resolve(!1)}).fail(function(){c.resolve(!1)})}function G(a){var b=this;K("MagicBox","getProcessInfo",arguments[1]).done(function(c){b.resolve(-1!==c.toUpperCase().indexOf(a))}).fail(function(){b.resolve(!1)})}function H(){var a=this;K("MagicBox","getProcessInfo",arguments[1]).done(a.resolve).fail(function(){a.resolve("")})}function I(){var a=this;K("ConfigManager","getConfig",arguments[1],["VideoStandard"]).done(a.resolve).fail(function(){a.resolve("")})}function J(){var a=this;K("EventManager","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function K(a,b,c,d){var e=a+"."+b+(d?d.toString():""),f=P[e];return(c||!f)&&(f=P[e]=L[a][b].apply(L[a],d||[]).done(function(a){null==a&&delete P[e]}).fail(function(){delete P[e]})),f}var L=require("jsCore/rpc"),M={AlarmPir:e,Flash:e,"3G":d,WIFI:d,"4G":d,OcxStabilization:t,OpticsStabilization:t,ElecStabilization:t,LDC:l,S2:G,HI:G,A5S:G,DM36:G,DM38:G,DSPConflict:F,ROIConflict:F,ExtraConflict:F,RotateConflict:F,TVOutConflict:F},N={DeviceType:f,AlarmIn:m,AlarmOut:n,ChannelNum:o,SerialNo:h,AudioInputNum:u,AudioOutputNum:z,AudioInputCaps:v,AudioOutputCaps:w,AudioDetectCaps:x,VideoDetectCaps:y,EncryptInfo:s,DeviceClass:j,VideoStandard:I,WideViewControl:r,RecordCaps:B,VideoInputCaps:p,VideoInputCapsEx:q,OSDCustom:g,PTZCaps:C,ProcessInfo:H,IVSCaps:A,FaceBoardCaps:D,getPreset:E,EventCaps:J},O=["HasPtz","IsPtzAlarm","VSP","MaxExtraStream","CameraSwitchComV","IsLocalStore","IEEE802_1X","VPN","SupportedWPS","CameraAttribute","PtzFunctionMenu","LightingControl","RainBrushControl","CifPFrameSize","AudioFileManager","AudioProperties","WirelessAlarm","GB28181","VolumeDetect","AnomalyDetect","MutationDetect","MajorVersion","MinorVersion","VendorAbbr","OEMVersion","Revision","TypeVersion","BuildDate","WebVersion","MaxPreRecordTime","PTZFunctionViaApp","IntelliTracker","VSPs","FontColour","FontBorder","FontSize","QueryDatabase","PtzManualMotionDetect","VideoAnalyse","VideoStandards","Languages","SnapshotInterval","IsGpsInfoOsd","PtzOperationStatus","Focus","Iris","RotateResolutionLimit","EncodingResolutionLimit","SpecVer","LensControl","LensControlMix","smallPtz","FireWarning","TemperatureDifference","PresetFocusROI","IntelligentFocus","Industry","SteadyLightControl","CSCMatrixSwitch","TrackPositionLimit","AroudWifiSearch","VideoOutControlMode","CaptureSetResolution","SupportHardwarePtzDevice","AudioTalkMode","AnalogCollect","PtzDirectionCalibration","VideoInFocusMode","IsLaserDistMeasure","EncodePriority","PtzViewSector","SyncTime","SupportFlipTransducer","MagSensor"];a.each(O,function(a,b){N[b]=k}),c.exports={is:function(b,c){return a.Deferred(function(a){"function"==typeof M[b]&&M[b].call(a,b,c)}).promise()},get:function(b,c){return a.Deferred(function(a){"function"==typeof N[b]&&N[b].call(a,b,c)}).promise()},clear:function(){P={}}};var P={}})}(jQuery);